var SaxonJS=function(){var t=function(){"use strict";var t;try{var r=(new DOMParser).parseFromString("<","text/xml");t=r.getElementsByTagName("parsererror")[0].namespaceURI}catch(t){}var o={inBrowser:!0,asyncGet:function(t,e,n){var r=new XMLHttpRequest;return r.open("GET",t,!0),0!==n&&(r.timeout=n),r.onload=function(n){4===r.readyState&&(200===r.status?e(r.responseText):e(new c(r.statusText+": "+t,"SXJS0006")))},r.ontimeout=function(n){e(new c("Document fetch timeout: "+t,"SXJS0008"))},r.onabort=function(n){e(new c("Document fetch aborted: "+t,"SXJS0008"))},r.onerror=function(n){e(new c("Document fetch failed: "+t,"SXJS0006"))},r.send(null),r},asyncGetXml:function(t,e,n){return o.asyncGet(t,function(n){var r=null;n instanceof c?r=n:(r=o.parseXmlFromString(n))._saxonBaseUri=t,e(t,r)},n)},asyncGetMultipleXml:function(t,e){var n=t.length,r={};function i(t,o){if(o instanceof c)throw o;r[t]=o,--n<=0&&e(r)}for(var a=0;a<t.length;a++)t[a]?o.asyncGetXml(t[a],i,0):n--},addXml:function(t,e,n,r){return!n[t]||n[t]instanceof c?o.asyncGetXml(t,function(t,r){O("Add to pool "+t,2),n[t]=r,e(n)},r):(O("Doc already in pool "+t,2),e(n),null)},addMultipleXml:function(t,e,n,r){var i=t.length,a={};function u(t){--i<=0&&n(t)}for(var s=0;s<t.length;s++)t[s]?a[t[s]]=o.addXml(t[s],u,e,r):i--;return a},makeHttpRequest:function(t,n,r){var i=l.convertToJS(t,!1,!0);!function(t){if(!t.href)throw c("'href' must be specified in HTTP request","SXJS0006");function n(e){throw c(e+" in HTTP request to: "+t.href,"SXJS0006")}t.method||n("'method' must be specified"),t.method=t.method.toUpperCase(),"status-only"in t&&"boolean"!=typeof t["status-only"]&&n("'status-only' parameter must be of type xs:boolean"),t.allowedBody="GET"!=t.method&&"HEAD"!=t.method,t.hasData="body"in t||"multipart-bodies"in t,("multipart-bodies"in t||"multipart-headers"in t)&&n("Multipart requests not yet implemented"),!t.allowedBody&&t.hasData&&n("Body and multipart body content must be null for "+t.method+" request"),"headers"in t||(t.headers={});var r=t["media-type"]||t.headers["content-type"]||"";t.hasData&&""===r&&n("No content type specified"),"media-type"in t&&(t.headers["content-type"]=r),"multipart-bodies"in t&&!/$multipart\//.test(r)&&n("Content type must be multipart media type for multipart request"),("username"in t&&!("password"in t)||!("username"in t)&&"password"in t)&&n("Must set both (or neither) username and password"),t.body instanceof DocumentFragment&&(t.body=function(t,e){if(t instanceof DocumentFragment){var n=document.implementation.createDocument(null,null,null),r=n.importNode(t,!0);n.appendChild(r),t=n}return t}(t.body)),"text/xml"!=r&&"application/xml"!=r&&"text/xml-external-parsed-entity"!=r&&"application/xml-external-parsed-entity"!=r&&!/\+xml$/.test(r)&&"text/html"!=r||t.body instanceof XMLDocument||n("HTTP request body must be a document node, supplied item is: "+e(t.body)),O("HTTP request prepared",2)}(i),"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")});var a=new XMLHttpRequest;"override-media-type"in i&&a.overrideMimeType(i["override-media-type"]),"username"in i?a.open(i.method,i.href,!0,i.username,i.password):a.open(i.method,i.href,!0),"timeout"in i&&0===r&&(r=i.timeout),0!==r&&(a.timeout=r);for(var u in i.headers)i.headers.hasOwnProperty(u)&&a.setRequestHeader(u,i.headers[u]);var s={};function f(t,e){return function(r){s.status=0,s.message=t+": "+i.href,s.error=e,s.type=r.type,n(l.convertFromJS(s,!1,!0))}}return a.ontimeout=f("HTTP request timeout","SXJS0008"),a.onabort=f("HTTP request aborted","SXJS0008"),a.onerror=f("HTTP request failed","SXJS0009"),a.onload=function(t){if(O("Saxon-JS processing httpRequest response",2),s.headers={},s.status=a.status,s.message=a.statusText,s.type=t.type,!i["status-only"]&&a.status<400){var e=a.getResponseHeader("Content-Type").split(/;/),r=e[0],u=(e[1].trim(),i["override-media-type"]||r);switch(s["media-type"]=u,u){case"text/xml":case"application/xml":case"text/xml-external-parsed-entity":case"application/xml-external-parsed-entity":case"text/html":s.body=a.responseXML||o.parseXmlFromString(a.responseText);break;default:if(/\+xml$/.test(u)){s.body=a.responseXML||o.parseXmlFromString(a.responseText);break}if(/^text\//.test(u)){s.body=a.responseText;break}if(/^multipart\//.test(u)){s.body=a.responseText;break}s.body=a.responseText}}var c,f;c=s,""===(f=a.getAllResponseHeaders())||f.split(/\r\n/).forEach(function(t){if(""!==t.trim()){var e=t.indexOf(":");e>=0?c.headers[t.substring(0,e).toLowerCase()]=t.substring(e+1).trim():O("No ':' separator found in HTTP response header "+t)}}),n(l.convertFromJS(s,!1,!0))},a.send(i.body),a},parseXmlFromString:function(e){e=e.replace(/\r\n|\r(?!\n)/g,"\n");try{if(!/Edge\//.test(window.navigator.userAgent)&&/^.+<\?xml/i.test(e))throw new Error;var n=(new DOMParser).parseFromString(e,"application/xml");n.documentElement;if(n.getElementsByTagNameNS(t,"parsererror").length>0)throw new Error;return n}catch(t){throw c("Misplaced or malformed XML","FODC0002")}},readResource:function(t){var e,n=new XMLHttpRequest,r=o.resolveUri(t,o.baseUri());if(n.open("GET",r,!1),n.send(null),200!=n.status)throw c("Failed to read resource at "+t,"SXJS0006");if("\ufeff"==(e=n.responseText).charAt(0))throw c(e.substring(1),"FODC0002");return e},readFile:function(t,e){var n,r=new XMLHttpRequest;try{r.open("GET",t,!1),r.send(null)}catch(e){throw c("Get failure "+t,"FODC0002")}if(200!=r.status)throw c("Failed to read file at "+t,"FODC0002");if("\ufeff"==(n=r.responseText).charAt(0))throw c(n.substring(1),"FODC0002");if(n.indexOf("\0")>=0)throw c("External file contains non-XML characters","FOUT1190");return n},resolveUri:function(t,e){try{var n,r=document,o=r.getElementsByTagName("base")[0],i=o&&o.href,a=r.head||r.getElementsByTagName("head")[0],u=o||a.appendChild(r.createElement("base")),s=r.createElement("a");return u.href=e||"",s.href=t,n=s.href,o?o.href=i:a.removeChild(u),n}catch(n){throw c("Illegal URI: href="+t+" base="+e,"FODC0005")}},baseUri:function(){for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++)if(/SaxonJS(\.min)?.js/.test(t[e].getAttribute("src")))return t[e].src;return t[t.length-1].src},initialize:function(){!function(){Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null===this||void 0===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(e=n[i],t.call(o,e,i,n))return i;return-1},enumerable:!1,configurable:!1,writable:!1});String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)})}(),n._init()},deliverMessage:function(t){"function"!=typeof t.deliverMessage&&(t.deliverMessage=function(t){console.log("xsl:message: "+t)})},saxonPrint:function(t){console.log(t)}};return{platform:o}}();function e(t){"use strict";if(null===t)return"#null";if(void 0===t)return"#undefined";var n,r;if(t instanceof l.XdmArray){var o;for(n="[",o=0;o<t.value.length&&o<3;o++)0!==o&&(n+=","),n+=e(t.value[o]);return t.value.length>=4&&(n+=",...("+t.value.length+")"),n+="]"}if(t instanceof u)return n="map{",t.forAllPairs(function(t){n+=e(t.k),n+=": ",n+=e(t.v),n+=", "}),n+="}";if(t instanceof l.XDMValue)return"XDMValue "+e(t.value);if(t instanceof l.JSValue)return"JSValue "+e(t.value);if(!a.isNode(t)||a.isAttr(t)||a.isNSNode(t)){if(a.isAttr(t))return"attribute @"+t.name;if(a.isNSNode(t))return"ns:"+t.prefix+"="+t.uri;if(t.type)return"string"===t.type?'"'+t.toString()+'"':"integer"===t.type||"boolean"===t.type?t.toString():"xs:"+t.type+"("+t.toString()+")";if("object"==typeof t&&"length"in t){var i;for(n="(",i=0;i<t.length&&i<3;i++)0!==i&&(n+=","),n+=e(t[i]);return t.length>=4&&(n+=",...("+t.length+")"),n+=")"}return"function"==typeof t?t.toString():"??? "+t}if(n={1:"element <"+t.tagName+">",2:"attribute @"+t.name,3:"text:"+(t.nodeValue?t.nodeValue.substring(0,8):"''"),7:"pi",8:"comment",9:"document "+(t._saxonDocumentNumber?"#"+t._saxonDocumentNumber:"(No nr / #0)"),11:"docFrag"}[t.nodeType],"9"==t.nodeType)for(r=0;r<t.childNodes.length;r++)n+="~>"+e(t.childNodes[r]);return n}var n=function(){"use strict";var t={"integer<decimal":1,"decimal<numeric":1,"double<numeric":1,"float<numeric":1,"integer<numeric":1,"dateTimeStamp<dateTime":1};function o(e,n){return e==n||1==t[e+"<"+n]}function i(t,e){throw new c("Casting from xs:"+t.type+" to xs:"+e+" is not allowed","XPTY0004")}function a(t,e,n){throw new c('Supplied value "'+t+'" is not a valid xs:'+e+(n?" ("+n+")":""),"FORG0001")}function u(t,e){throw new c('Supplied value "'+t+'" is not a valid xs:'+e,"FOCA0002")}function s(t,e){throw new c("Cannot compare xs:"+t+" with xs:"+e,"XPTY0004")}function f(t,e){if(t=h.trim(t),/.\.$/.test(t)&&(t+="0"),/^(\-|\+)?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee](\-|\+)?[0-9]+)?$/.test(t))return parseFloat(t);if(/^(\-|\+)?NaN$/.test(t))return NaN;if(/^\-INF$/.test(t))return-1/0;if(/^(\+)?INF$/.test(t))return 1/0;if(e)throw new c("Cannot convert string '"+t+"' to a number","FORG0001");return NaN}function m(t){return t.toString(36)}var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function g(t){t=t.replace(/\s/g,""),/^(....)*$/.test(t)||a(t,"base64Binary","length must be a multiple of 4"),/^[A-Za-z0-9+/]*=?=?$/.test(t)||a(t,"base64Binary","only [A-Za-z0-9+/] allowed, or '=' at the end"),/^([^=]*|.*[AQgw]==|.*[AEIMQUYcgkosw048]=)$/.test(t)||a(t,"base64Binary","invalid characters before '='");var e,n,r,o,i,u,s=0,c=0,l=[];if(0===t.length)return t;t+="";do{e=(u=p.indexOf(t.charAt(s++))<<18|p.indexOf(t.charAt(s++))<<12|(o=p.indexOf(t.charAt(s++)))<<6|(i=p.indexOf(t.charAt(s++))))>>16&255,n=u>>8&255,r=255&u,l[c++]=64==o?String.fromCharCode(e):64==i?String.fromCharCode(e,n):String.fromCharCode(e,n,r)}while(s<t.length);return l.join("")}function d(t){t=h.trim(t),/^([a-fA-F0-9][a-fA-F0-9])*$/.test(t)||a(t,"hexBinary");var e,n=[];for(e=0;e<t.length;e+=2)n.push(String.fromCharCode(parseInt(t.substring(e,e+2),16)));return n.join("")}function y(t,n){this.value=t,this.type=n||"string","string"!=typeof t&&l.internalError("bad input to string constructor "+e(t))}function S(t,e){this.value=t,this.type=e}function x(t,e){"number"!=typeof t&&l.internalError("type of value supplied to XdmDouble is not number: "+typeof t),this.value=t,this.type=e||"double"}function N(t,e){"number"!=typeof t&&l.internalError("type of value supplied to XdmInteger is not number: "+typeof t),this.value=t,this.type=e||"integer"}function b(t,e){this.value=new Big(t),this.type=e||"decimal"}function w(t){this.value=t,"boolean"!=typeof t&&l.internalError("type of value supplied to XdmBoolean is not boolean: "+typeof t)}function T(t,e,n){if(this.prefix=t||"",this.uri=e||"",this.local=n,""!==t&&!h.isNCName(t))throw new c("Invalid prefix: '"+t+"'","FORG0001");if(!h.isNCName(n))throw new c("Invalid local name: '"+n+"'","FORG0001")}function E(t,e,n){this.UTCdate=t,this.timezoneOffset=e,this.type=n||"dateTime",t instanceof Date||l.internalError("type of UTCdate supplied to XdmDateTime is not Date"),e&&"number"!=typeof e&&l.internalError("type of value for timezone offset supplied to XdmDateTime is not number: "+typeof value)}function C(t){return(100+t).toString().substring(1)}function O(t){return(1e4+t).toString().substring(1)}function A(t,e,n){if(this.months=t,this.milliseconds=e,"number"==typeof t&&"number"==typeof e||l.internalError("type of value supplied to XdmDuration is not number: "+typeof t+", "+typeof e),t>0&&e<0||t<0&&e>0)throw new c("Months/seconds must both be negative or both positive","FORG0001");this.type=n||"duration"}y.prototype={value:null,type:"string",_hash:0,toString:function(){return this.value},compareTo:function(t){return t instanceof y?r.codepointComparison(this.value,t.value):"untypedAtomic"==this.type?n[t.type].cast(this).compareTo(t):void s(this.type,t.type)},equals:function(t){return 0===this.compareTo(t)},hashCode:function(){if(this.value.length<=4)return this.value;var t=this._hash,e=this.value.length;if(0===t&&e>0){var n;for(n=0;n<e;n++)t=31*t+this.value.charAt(n++);this._hash=t}return m(t)},matchKey:function(){return"s"+this.toString()}},S.prototype={value:null,type:"hexBinary",toString:function(){return"hexBinary"==this.type?(t=this.value,e="",l.stringToCodepoints(t).forEach(function(t){e+=(t+256).toString(16).substring(1).toUpperCase()}),e):function(t){var e,n,r,o,i,a=0,u=0,s=[];if(!t)return t;do{e=(i=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,n=i>>12&63,r=i>>6&63,o=63&i,s[u++]=p.charAt(e)+p.charAt(n)+p.charAt(r)+p.charAt(o)}while(a<t.length);var c=s.join(""),l=t.length%3;return(l?c.slice(0,l-3):c)+"===".slice(l||3)}(this.value);var t,e},compareTo:function(t){if(t instanceof S&&this.type==t.type)return r.codepointComparison(this.value,t.value);s(this.type,t.type)},equals:function(t){return 0===this.compareTo(t)},hashCode:function(){return new y(this.value).hashCode()},matchKey:function(){return("hexBinary"==this.type?"h":"i")+this.toString()}},x.prototype={value:0,type:"double",toString:function(){if(0===this.value)return 1/this.value<0?"-0":"0";if(this.value==Number.POSITIVE_INFINITY)return"INF";if(this.value==Number.NEGATIVE_INFINITY)return"-INF";var t,e=this.value,n=Math.abs(e);if(n>=1e6||n<1e-6){var r=(t=e.toExponential()).indexOf("e"),o=t.substring(0,r);return o.includes(".")||(o+=".0"),o+"E"+t.substring(r+1).replace("+","")}if("float"===this.type&&e%1!=0){var i=(t=(e<0?e-5e-8:e+5e-8).toString()).indexOf(".");return(t=t.substring(0,i+6)).replace(/0+$/,"")}return e.toString()},equals:function(t){return 0===this.compareTo(t)},compareTo:function(t){if("toNumber"in t)return this.value<t.toNumber()?-1:this.value==t.toNumber()?0:1;s(this.type,t.type)},hashCode:function(){return m(this.value)},matchKey:function(){return"n"+this.hashCode()},toNumber:function(){return this.value},toDouble:function(){return this},abs:function(){return new x(Math.abs(this.value),this.type)},negate:function(){return new x(-this.value,this.type)},ceiling:function(){return new x(Math.ceil(this.value),this.type)},floor:function(){return new x(Math.floor(this.value),this.type)},round:function(t){var e;if(0===t)e=Math.round(this.value);else{var n=Math.pow(10,-t);e=Math.round(this.value/n)*n}return new x(e,this.type)},roundHalfToEven:function(t){if(isNaN(this.value)||!isFinite(this.value))return this;var e=new b(Big(this.value)).roundHalfToEven(t);return 0===e.toNumber()&&this.value<0&&(e=n.double.fromString("-0")),n[this.type].cast(e)}},N.prototype={value:0,type:"integer",toString:function(){return this.value.toString()},equals:function(t){return 0===this.compareTo(t)},compareTo:function(t){if("toNumber"in t)return this.value-t.toNumber();s(this.type,t.type)},hashCode:function(){return m(this.value)},matchKey:function(){return"n"+this.hashCode()},toDouble:function(){return new x(this.value)},toNumber:function(){return this.value},toBig:function(){return new Big(this.value)},abs:function(){return new N(Math.abs(this.value))},negate:function(){return new N(-this.value)},ceiling:function(){return this},floor:function(){return this},round:function(t){if(t<0){var e=Math.pow(10,-t);return new N(Math.round(this.value/e)*e)}return this},roundHalfToEven:function(t){if(t<0){var e=Math.pow(10,-t);return new N(parseInt(Big(this.value).div(e).round(0,2).times(e),10))}return this}},b.prototype={value:null,type:"decimal",toString:function(){return this.value.toFixed()},equals:function(t){return 0===this.compareTo(t)},compareTo:function(t){return t instanceof b?this.value.cmp(t.value):"toDouble"in t?this.value-t.toDouble().value:void s(this.type,t.type)},hashCode:function(){return m(this.toNumber())},matchKey:function(){return"n"+this.hashCode()},toBig:function(){return this.value},toDouble:function(){return new x(parseFloat(this.value))},toNumber:function(){return parseFloat(this.value)},abs:function(){return new b(this.value.abs(),this.type)},negate:function(){var t=Big(this.value);return t.s=-t.s,new b(t,"decimal"==this.type?"decimal":"integer")},ceiling:function(){return new b(this.value.round(0,this.value.s<0?0:3),this.type)},floor:function(){return new b(this.value.round(0,this.value.s<0?3:0),this.type)},round:function(t){function e(t,e){var n=new Big(t);return n.e+=e,n}var n=this.value,r=0;t<0&&(r=t,t=0,n=e(n,r));var o=n.s>0?Big(0):this.floor().abs();return n=n.plus(o).round(t,1).minus(o),0!==e&&(n=e(n,-r)),new b(n,"decimal"==this.type?"decimal":"integer")},roundHalfToEven:function(t){var e;if(t<0){var n=Big(10).pow(-t);e=this.value.div(n).round(0,2).times(n)}else e=this.value.round(t,2);return new b(e,"decimal"==this.type?"decimal":"integer")}},w.prototype={value:null,type:"boolean",toString:function(){return this.value.toString()},toBoolean:function(){return this.value},compareTo:function(t){if(t instanceof w)return(this.value?1:0)-(t.value?1:0);s(this.type,t.type)},equals:function(t){return 0===this.compareTo(t)},hashCode:function(){return this.value.toString()},matchKey:function(){return"b"+this.toString()}},T.prototype={prefix:null,uri:null,local:null,type:"QName",toEQName:function(){return"Q{"+this.uri+"}"+this.local},toString:function(){return(this.prefix.length>0?this.prefix+":":"")+this.local},equals:function(t){return t instanceof T&&this.local==t.local&&this.uri==t.uri},compareTo:function(){throw new c("QNames are not ordered","FORG0006")},hashCode:function(){return this.uri.substring(this.uri.length-3)+":"+new y(this.local).hashCode()},matchKey:function(){return"q"+this.toEQName()}},E.prototype={type:"dateTime",UTCdate:null,timezoneOffset:null,proxy:function(){var t=new Date,e=null!==this.timezoneOffset?this.timezoneOffset:-t.getTimezoneOffset();return new Date(this.UTCdate.getTime()+60*e*1e3)},_ISOEdit:function(t){if(t=t.substr(0,t.length-1),0===this.UTCdate.getUTCMilliseconds())t=t.replace(".000","");else for(;"0"==t.charAt(t.length-1);)t=t.substr(0,t.length-1);return t=t.replace(/^-0?0?/,"-")},toString:function(){var t=this._ISOEdit(this.proxy().toISOString()),e="-"==t.charAt(0)?1:0;return function(n){switch(n){case"dateTime":case"dateTimeStamp":return t;case"date":return t.substring(0,10+e);case"time":return t.substring(11+e);case"gYearMonth":return t.substring(0,7+e);case"gYear":return t.substring(0,4+e);case"gMonthDay":return"-"+t.substring(4+e,10+e);case"gMonth":return"-"+t.substring(4+e,7+e);case"gDay":return"--"+t.substring(7+e,10+e);default:throw"type not recognised "+n}}(this.type)+this.tzOffsetToString()},compareTo:function(t){if(t instanceof E&&(o(t.type,this.type)||o(this.type,t.type)))return+this.UTCdate.getTime()-t.UTCdate.getTime();s(this.type,t.type)},equals:function(t){return 0===this.compareTo(t)},hashCode:function(){return m(this.UTCdate.getTime()-1454346732296)},matchKey:function(){return"t"+this.hashCode()},adjustByMinutes:function(t){return n.dateTime.fromDate(new Date(this.UTCdate.getTime()+60*t*1e3),this.timezoneOffset)},addMonths:function(t){var e=this.toString(),r=parseInt(e.substring(0,4),10),o=parseInt(e.substring(5,7),10),i=parseInt(e.substring(8,10),10),a=r+Math.floor((o+t-1)/12),u=a<0,s=(o+t-1)%12+1;for(s<=0&&(s+=12);!k([a,s,i,0,0,0]);)i-=1;return n[this.type].fromString((u?"-"+O(-a):O(a))+"-"+C(s)+"-"+C(i)+e.substring(10))},tzOffsetToString:function(){var t=this.timezoneOffset;if(null===t)return"";if(0===t)return"Z";var e=Math.abs(t);return(t<0?"-":"+")+C(Math.floor(e/60))+":"+C(e%60)}},A.prototype={type:"duration",months:0,milliseconds:0,parts:function(){var t=[];function e(e,n){n.forEach(function(n){1e3!=n?(t.push(Math.floor(e/n)),e%=n):t.push(e/n)})}return e(Math.abs(this.months),[12,1]),e(Math.abs(this.milliseconds),[864e5,36e5,6e4,1e3]),t},signum:function(){var t=this.months+this.milliseconds;return t<0?-1:t>0?1:0},toString:function(){var t,e=this.signum();return 0===e?t="yearMonthDuration"==this.type?"P0M":"PT0S":(t=e<0?"-P":"P",this.parts().forEach(function(e,n){3==n&&(t+="T"),0!==e&&(t+=6==n?e/1e3+"S":e+["Y","M","D","H","M","S"][n])}),t=t.replace(/T$/,"")),t},compareTo:function(t){if(n.yearMonthDuration.matches(this)&&n.yearMonthDuration.matches(t))return this.months-t.months;if(n.dayTimeDuration.matches(this)&&n.dayTimeDuration.matches(t))return this.milliseconds-t.milliseconds;throw new c("Cannot compare durations that mix months and seconds","XPTY0004")},equals:function(t){return t instanceof A&&this.months==t.months&&this.milliseconds==t.milliseconds},hashCode:function(){return this.months.toString()+":"+this.milliseconds.toString()},matchKey:function(){return"d"+this.hashCode()}};var D={hierarchy:t,isSubtype:o,anyAtomicType:{name:"anyAtomicType",matches:function(t){return t instanceof y||t instanceof b||t instanceof N||t instanceof x||t instanceof S||t instanceof w||t instanceof A||t instanceof E||t instanceof T}},untypedAtomic:{name:"untypedAtomic",fromString:function(t){return new y(t,"untypedAtomic")},matches:function(t){return"untypedAtomic"==t.type},cast:function(t){return new y(t.toString(),"untypedAtomic")}},string:{name:"string",fromString:function(t){return new y(t,"string")},matches:function(t){return o(t.type,"string")},cast:function(t){return new y(t.toString(),"string")},isStringLike:function(t){return t instanceof y}},anyURI:{name:"anyURI",fromString:function(t){return new y(t.replace(/[ \r\t\n]+/g," ").replace(/^[ ]|[ ]$/g,""),"anyURI")},matches:function(t){return"anyURI"==t.type},cast:function(t){if(t instanceof y)return n.anyURI.fromString(t.toString());i(t,"anyURI")}},double:{name:"double",fromString:function(t){return new x(f(t,!0))},fromStringUnfailing:function(t){return new x(f(t,!1))},fromNumber:function(t){return new x(t)},matches:function(t){return"double"==t.type},cast:function(t){return null===t||void 0===t?n.double.fromNumber(NaN):n.string.matches(t)||n.untypedAtomic.matches(t)?n.double.fromString(t.toString()):n.numeric.matches(t)?n.double.fromNumber(t.toNumber()):n.boolean.matches(t)?n.double.fromNumber(t.toBoolean()?1:0):"number"==typeof t?n.double.fromNumber(t):void i(t,"double")}},decimal:{name:"decimal",fromString:function(t){if(t=h.trim(t),/^(\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+)$/.test(t))return new b(new Big(t));/INF|NaN/.test(t)&&u(t,"decimal"),a(t,"decimal")},fromBig:function(t){return new b(t)},fromNumber:function(t){if(isNaN(t)||!isFinite(t))throw new c("Cannot convert NaN or INF to a decimal","FOCA0002");return new b(new Big(t))},matches:function(t){return t instanceof b||t instanceof N},cast:function(t){return n.decimal.matches(t)?new b(t.value,"decimal"):n.string.matches(t)||n.untypedAtomic.matches(t)?n.decimal.fromString(t.toString()):n.numeric.matches(t)?n.decimal.fromNumber(t.toNumber()):n.boolean.matches(t)?n.decimal.fromString(t.toBoolean()?"1":"0"):void i(t,"decimal")}},float:{name:"float",fromString:function(t){return new x(f(t,!0),"float")},fromNumber:function(t){return Math.fround&&(t=Math.fround(t)),new x(t,"float")},matches:function(t){return"float"==t.type},cast:function(t){return n.float.fromNumber(n.double.cast(t).toNumber())}},boolean:{name:"boolean",fromString:function(t){switch(h.trim(t)){case"true":case"1":return new w(!0);case"false":case"0":return new w(!1);default:a(t,"boolean")}},fromBoolean:function(t){return new w(t)},matches:function(t){return t instanceof w},cast:function(t){return n.string.matches(t)||n.untypedAtomic.matches(t)?n.boolean.fromString(t.toString()):n.numeric.matches(t)?n.boolean.fromBoolean(0!==t.toNumber()&&!isNaN(t.toNumber())):n.boolean.matches(t)?t:"boolean"==typeof t?n.boolean.fromBoolean(t):void i(t,"boolean")}},integer:{name:"integer",base:"decimal",matches:function(t){return o(t.type,"integer")},fromString:function(t){if(/^\s*(\-|\+)?[0-9]+\s*$/.test(t))return t.length>9?new b(t,"integer"):new N(parseInt(t,10));/INF|NaN/.test(t)&&u(t,"integer"),a(t,"integer")},fromNumber:function(t){if(isNaN(t)||t==Number.NEGATIVE_INFINITY||t==Number.POSITIVE_INFINITY)throw new c("Cannot convert NaN or INF to an integer","FOCA0002");return new N(Math.trunc(t))},fromBig:function(t){return new b(t,"integer")},valid:function(t){return 0===t.value.mod(1)},cast:function(t){return n.string.matches(t)||n.untypedAtomic.matches(t)?n.integer.fromString(t.toString()):n.numeric.matches(t)?n.integer.fromNumber(t.toNumber()):n.boolean.matches(t)?n.integer.fromNumber(t.toBoolean()?1:0):void i(t,"integer")},convertFromJS:function(t){return"number"==typeof t?n.integer.fromNumber(t):"boolean"==typeof t?n.integer.fromNumber(t?1:0):"string"==typeof t?n.integer.fromString(t):n.integer.fromString(t.toString())}},numeric:{name:"numeric",members:["double","decimal","float"],matches:function(t){return t instanceof x||t instanceof N||t instanceof b},cast:function(t){return n.string.matches(t)||n.untypedAtomic.matches(t)?n.double.fromString(t.toString()):n.numeric.matches(t)?t:n.boolean.matches(t)?n.double.fromNumber(t.toBoolean()?1:0):void i(t,"numeric")},numberFn:function(t){var e=n.double;if(null===t)return e.fromNumber(Number.NaN);if(n.boolean.matches(t))return e.fromNumber(t.toBoolean()?1:0);if(n.numeric.matches(t))return e.cast(t);try{return e.fromString(t.toString())}catch(t){return e.fromNumber(Number.NaN)}}},QName:{name:"QName",matches:function(t){return t instanceof T},fromParts:function(t,e,n){return new T(t,e,n)},fromString:function(t,e){if("Q{"==(t=h.trim(t)).substring(0,2))return n.QName.fromEQName(t);h.isQName(t)||a(t,"QName");var r=t.split(":");if(1==r.length)return n.QName.fromParts("",e(""),r[0]);var o=e(r[0]);if(null===o)throw c("Undeclared prefix: "+r[0],"FONS0004");return n.QName.fromParts(r[0],o,r[1])},fromEQName:function(t){var e=t.indexOf("{"),n=t.indexOf("}"),r=l.wsCollapse(t.substring(e+1,n));if("http://www.w3.org/2000/xmlns/"==r)throw c("Use of reserved namespace: "+r,"XQST0070");return new T("",r,t.substring(n+1))},cast:function(t,e){if(n.string.matches(t)||n.untypedAtomic.matches(t)){if(e)return n.QName.fromString(t.toString(),e);throw c("Casting to QName requires a namespace resolver","FORG0001")}if(n.QName.matches(t))return t;i(t,"QName")}},dateTime:{name:"dateTime",matches:function(t){return o(t.type,"dateTime")},fromString:function(t){return U(t,"dateTime")},fromDate:function(t,e){return new E(t,e,"dateTime")},cast:function(t){return n.dateTime.matches(t)?t:n.date.matches(t)?n.dateTime.fromDate(t.UTCdate,t.timezoneOffset):n.string.matches(t)||n.untypedAtomic.matches(t)?n.dateTime.fromString(t.toString()):void i(t,"dateTime")}},date:{name:"date",matches:function(t){return t instanceof E&&"date"==t.type},fromString:function(t){return U(t,"date")},fromDate:function(t,e){var r=new E(t,e,"date").toString(),o="-"==r.charAt(0)?11:10;return new E(n.dateTime.fromString(r.substring(0,o)+"T00:00:00"+r.substring(o)).UTCdate,e,"date")},cast:function(t){return n.date.matches(t)?t:n.dateTime.matches(t)?n.date.fromDate(t.UTCdate,t.timezoneOffset):n.string.matches(t)||n.untypedAtomic.matches(t)?n.date.fromString(t.toString()):void i(t,"date")}},time:{name:"time",matches:function(t){return t instanceof E&&"time"==t.type},fromString:function(t){return U(t,"time")},fromDate:function(t,e){var r=new E(t,e,"time");return new E(n.dateTime.fromString("1972-01-01T"+r.toString()).UTCdate,e,"time")},cast:function(t){return n.time.matches(t)?t:n.dateTime.matches(t)?n.time.fromDate(t.UTCdate,t.timezoneOffset):n.string.matches(t)||n.untypedAtomic.matches(t)?n.time.fromString(t.toString()):void i(t,"time")}},dateTimeStamp:{name:"dateTimeStamp",matches:function(t){return t instanceof E&&"dateTimeStamp"==t.type},fromString:function(t){return U(t,"dateTimeStamp")},fromDate:function(t,e){return new E(t,e,"dateTimeStamp")},cast:function(t){return n.dateTimeStamp.matches(t)?t:n.dateTime.matches(t)||n.date.matches(t)?n.dateTimeStamp.fromDate(t.UTCdate,t.timezoneOffset):n.string.matches(t)||n.untypedAtomic.matches(t)?n.dateTimeStamp.fromString(t.toString()):void i(t,"dateTimeStamp")}},duration:{name:"duration",matches:function(t){return o(t.type,"duration")},fromString:function(t){return $(t,"duration")},fromMonthsMilliseconds:function(t,e){return new A(t,e,"duration")},cast:function(t){return n.duration.matches(t)?t:n.string.matches(t)||n.untypedAtomic.matches(t)?n.duration.fromString(t.toString()):void i(t,"duration")}},hexBinary:{name:"hexBinary",matches:function(t){return"hexBinary"===t.type},fromString:function(t){return new S(d(t),"hexBinary")},cast:function(t){return t instanceof S?new S(t.value,"hexBinary"):n.string.matches(t)||n.untypedAtomic.matches(t)?new S(d(t.toString()),"hexBinary"):void i(t,"hexBinary")}},base64Binary:{name:"base64Binary",matches:function(t){return"base64Binary"===t.type},fromString:function(t){return new S(g(t),"base64Binary")},encodeFromString:function(t){return new S(t,"base64Binary")},cast:function(t){return t instanceof S?new S(t.value,"base64Binary"):n.string.matches(t)||n.untypedAtomic.matches(t)?new S(g(t.toString()),"base64Binary"):void i(t,"base64Binary")}}};function _(t){var e=D[t]={};e.name=t,e.matches=function(e){return e instanceof E&&e.type==t},e.fromString=function(e){return U(e,t)},e.fromDate=function(e,n){return new E(e,n,t)},e.cast=function(e){if(D[t].matches(e))return e;if(n.dateTime.matches(e)||n.date.matches(e)){var r=D[t];return r.fromString(r.fromDate(e.UTCdate,e.timezoneOffset).toString())}if(n.string.matches(e)||n.untypedAtomic.matches(e))return D[t].fromString(e.toString());i(e,t)}}_("gYearMonth"),_("gYear"),_("gMonthDay"),_("gMonth"),_("gDay");var F={dateTime:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|(\+|-)[0-9]{2}:[0-9]{2})?\s*$/,date:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2}-[0-9]{2})(Z|(\+|-)[0-9]{2}:[0-9]{2})?\s*$/,time:/^\s*([0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|(\+|-)[0-9]{2}:[0-9]{2})?\s*$/,dateTimeStamp:/^\s*(-?[0-9]+-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(?:\.[0-9]+)?)(Z|(\+|-)[0-9]{2}:[0-9]{2})\s*$/,gYearMonth:/^\s*(-?(?:[1-9][0-9]{4,}|[0-9]{4})-[0-9]{2})(Z|(\+|-)[0-9]{2}:[0-9]{2})?\s*$/,gYear:/^\s*(-?[1-9][0-9]{4,}|-?[0-9]{4})(Z|(\+|-)[0-9]{2}:[0-9]{2})?\s*$/,gMonthDay:/^\s*--([0-9]{2}-[0-9]{2})(Z|(\+|-)[0-9]{2}:[0-9]{2})?\s*$/,gMonth:/^\s*--([0-9]{2})(Z|(\+|-)[0-9]{2}:[0-9]{2})?\s*$/,gDay:/^\s*---([0-9]{2})(Z|(\+|-)[0-9]{2}:[0-9]{2})?\s*$/,duration:/^\s*\-?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]*)?)S)?)?\s*$/,dayTimeDuration:/^\s*\-?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]*)?)S)?)?\s*$/,yearMonthDuration:/^\s*\-?P(?:([0-9]+)Y)?(?:([0-9]+)M)?\s*$/},M={dateTime:function(t){return I(t)},date:function(t){return t+"T00:00:00"},time:function(t){return"1972-01-01T"+I(t)},dateTimeStamp:function(t){return I(t)},gYearMonth:function(t){return t+"-01T00:00:00"},gYear:function(t){return t+"-01-01T00:00:00"},gMonthDay:function(t){return"1972-"+t+"T00:00:00"},gMonth:function(t){return"1972-"+t+"-01T00:00:00"},gDay:function(t){return"1972-01-"+t+"T00:00:00"}};function I(t){if(-1!=t.indexOf(".",t.length-4)){for(var e=t.split("."),n=e[1];n.length<3;)n+="0";t=e[0]+"."+n}return t}function k(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5];return!(n<1||n>12||r<1||r>[31,e%4==0&&!(e%100==0&&e%400!=0)?29:28,31,30,31,30,31,31,30,31,30,31][n-1]||o>=24||i>=60||a>=60)}function P(t,e){var n=t.split(/[\-T:]/).map(function(t){return parseFloat(t)}),r=n[0];if(r<1||r>9999)throw c("Year "+r+" is out of range","FODT0001");if(!k(n))throw new c("Invalid date "+e,"FORG0001")}function U(t,e){var n=t.match(F[e]);null===n&&a(t,e);var r,o,i=n[2]?n[2]:"",u=M[e](n[1])+i;if(/24:00:00(\.0+)?([Z\+\-]|$)/.test(u)&&(u="time"==e?u.substring(0,10)+"T00:00:00":v["t+u"](U(u.substring(0,10),"date"),$("P1D","dayTimeDuration")).toString()+"T00:00:00"),"-"==u.charAt(0))P(u.substring(1,20),t),o=u.substr(1).split(/[\-T:]/).map(function(t){return parseFloat(t)}),r=new Date(Date.UTC(-o[0],o[1]-1,o[2],o[3],o[4],o[5]));else{P(u.substring(0,19),t);var s=u.split(/[\-T:]/),c=(o=u.split(/[\-T:]/).map(function(t){return parseFloat(t)}))[5],l=c-Math.floor(c);(r=new Date(Date.UTC(s[0],o[1]-1,o[2],o[3],o[4],c,Math.round(1e3*l)))).setUTCFullYear(s[0])}if(""===i){var f=new Date;r=new Date(r.getTime()+60*f.getTimezoneOffset()*1e3)}else r=new Date(r.getTime()-60*R(i)*1e3);return new E(r,R(n[2]?n[2]:""),e)}function R(t){if(""===t)return null;if("Z"==t)return 0;var e=t.split(":"),n=parseInt(e[0],10),r=/^\-.*/.test(e[0]),o=Math.abs(n),i=parseInt(e[1],10);if(o>14||i>59)throw c("Invalid timezone "+t,"FORG0001");return(r?-1:1)*(60*o+i)}var X=function(t,e){return e*(void 0===t?0:parseInt(t,10))},B=function(t,e){return e*(void 0===t?0:Math.round(1e3*parseFloat(t)))},J=function(t,e){return e?-t:t},L=[function(t,e){return J(X(t[1],12)+X(t[2],1),e.match(/^\s*\-.*/))},function(t,e){return J(X(t[3],864e5)+X(t[4],36e5)+X(t[5],6e4)+B(t[6],1),e.match(/^\s*\-.*/))},function(t,e){return J(X(t[1],864e5)+X(t[2],36e5)+X(t[3],6e4)+B(t[4],1),e.match(/^\s*\-.*/))},function(){return 0}],z={duration:[0,1],dayTimeDuration:[3,2],yearMonthDuration:[0,3]};function $(t,e){var n=t.match(F[e]);return null!==n&&/\d/.test(t)&&!/T$/.test(t)||a(t,e),new A(L[z[e][0]](n,t),L[z[e][1]](n,t),e)}return D._init=function(){function r(e,n,r){var i=D[e]={},u=D[n];i.name=e,i.base=u,i.matches=function(t){return o(t.type,e)},i.downCast=function(t){return r(t)||a(t.toString(),e),t.type=e,t},i.fromString=function(t){return i.downCast(u.fromString(t))},i.cast=function(t){return i.downCast(u.cast(t))},function(e){for(var n=D[e];n.base;)t[e+"<"+(void 0!==n.base.name?n.base.name:n.base)]=1,n=n.base;"decimal"!=n&&"double"!=n&&"float"!=n||(t[e+"<numeric"]=1)}(e)}function i(t,e,n){r(t,e,n);var o=D[t],i=D[e];o.fromString=function(e){return/INF|NaN/.test(e)&&u(e,t),o.downCast(i.fromString(e))},o.fromNumber=function(e){return r=i.fromNumber(e),o=r.toNumber(),!isNaN(o)&&isFinite(o)||u(r.toString(),t),n(r)||a(r.toString(),t),r.type=t,r;var r,o}}function s(t,e,n,o){r(t,e,n);var i=D[t],u=D[e];i.downCast=function(e){var r=o(e.toString());return n(r)||a(r,t),new y(r,t)},i.fromString=function(t){return i.downCast(u.fromString(o(t)))}}function c(t,e,o){r(t,e,o);var i=D[t],u=D[e];i.downCast=function(e){return e instanceof A?new A("yearMonthDuration"==t?e.months:0,"dayTimeDuration"==t?e.milliseconds:0,t):(o(e)||a(e.toString(),t),e.type=t,e)},i.fromMonthsMilliseconds=function(t,e){return i.downCast(u.fromMonthsMilliseconds(t,e))},i.cast=function(e){return u.matches(e)?i.downCast(e):n.string.matches(e)||n.untypedAtomic.matches(e)?$(e.toString(),t):i.downCast(u.cast(e))}}n.double.NaN=n.double.fromNumber(NaN),i("nonPositiveInteger","integer",function(t){return t.toNumber()<=0}),i("negativeInteger","nonPositiveInteger",function(t){return t.toNumber()<0}),i("long","integer",function(t){var e=t.toBig();return e.cmp(Big("-9223372036854775808"))>=0&&e.cmp(Big("9223372036854775807"))<=0}),i("int","long",function(t){return t.toNumber()>=-2147483648&&t.toNumber()<=2147483647}),i("short","int",function(t){return t.toNumber()>=-32768&&t.toNumber()<=32767}),i("byte","short",function(t){return t.toNumber()>=-128&&t.toNumber()<=127}),i("nonNegativeInteger","integer",function(t){return t.toNumber()>=0}),i("positiveInteger","nonNegativeInteger",function(t){return t.toNumber()>0}),i("unsignedLong","nonNegativeInteger",function(t){return t.toNumber()>=0&&t.toBig().cmp(Big("18446744073709551615"))<=0}),i("unsignedInt","unsignedLong",function(t){return t.toNumber()>=0&&t.toBig().cmp(Big("4294967295"))<=0}),i("unsignedShort","unsignedInt",function(t){return t.toNumber()>=0&&t.toNumber()<=65535}),i("unsignedByte","unsignedShort",function(t){return t.toNumber()>=0&&t.toNumber()<=255});var f=function(){return!0};s("normalizedString","string",f,function(t){return t.replace(/[ \r\t\n]/g," ")}),s("token","normalizedString",f,l.wsCollapse),s("language","token",function(t){return/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(t)},l.wsCollapse),s("NMTOKEN","token",h.isNMTOKEN,l.wsCollapse),s("Name","token",h.isName,l.wsCollapse),s("NCName","Name",h.isNCName,l.wsCollapse),s("ID","NCName",h.isNCName,l.wsCollapse),s("IDREF","NCName",h.isNCName,l.wsCollapse),s("ENTITY","NCName",h.isNCName,l.wsCollapse),c("yearMonthDuration","duration",function(t){return 0===t.milliseconds}),c("dayTimeDuration","duration",function(t){return 0===t.months}),D.dayTimeDuration.fromNumberOfMinutes=function(t){return new A(0,60*t*1e3,"dayTimeDuration")},D.showValue=e,D._init=function(){}},D}(),r=function(){"use strict";var t="http://www.w3.org/2005/xpath-functions/collation/codepoint",e="http://www.w3.org/2013/collation/UCA";function o(t,e,r,o){for(var i,a,u=n.numeric.matches,s=n.untypedAtomic.matches;null!==(i=t.next());)for(var c=m.ForArray(e);null!==(a=c.next());){var l=s(i)?s(a)?n.string.cast(i):u(a)?n.double.cast(i):n[a.type].cast(i):i,f=s(a)?s(i)?n.string.cast(a):u(i)?n.double.cast(a):n[i.type].cast(a):a;if(!(u(l)&&isNaN(l.value)||u(f)&&isNaN(f.value)))if("="==r?o.equals(l,f):"!="==r?!o.equals(l,f):D(r,o.compare(l,f)))return m.oneBoolean(!0)}return m.oneBoolean(!1)}function i(t,e){return t.equals(e)}function f(t,e){return t.compareTo(e)}function h(t){return null===t}function g(t){return(n.double.matches(t)||n.float.matches(t))&&isNaN(t.toNumber())}function d(t,e){return function(n,r){return e(n)||e(r)?!!e(n)&&e(r):t(n,r)}}function v(t,e){return function(n,r){return e(n)||e(r)?e(n)?e(r)?0:-1:1:t(n,r)}}function y(t){return v(t,h)}function S(t){return v(t,g)}function x(t,e){return null===t?NaN:n.numeric.matches(t)?t.toNumber():e?n.double.fromString(t.toString()).toNumber():n.double.fromStringUnfailing(t.toString()).toNumber()}function N(t){return function(e,n){var r=x(e,t),o=x(n,t);return isNaN(r)?isNaN(o)?0:-1:isNaN(o)?1:r-o}}function b(t){return function(e,n){var r=x(e,t),o=x(n,t);return isNaN(r)?isNaN(o):!isNaN(o)&&r-o==0}}function w(t){return function(e,r){return n.string.isStringLike(e)&&n.string.isStringLike(r)?t(e.value,r.value):e.equals(r)}}function T(t){return function(e,r){return n.string.isStringLike(e)&&n.string.isStringLike(r)?t(e.value,r.value):e.compareTo(r)}}function E(e,r){var o=e.split("|");if("DESC"==o[0]){var a=E(e.slice(5),r);return{equals:a.equals,compare:function(t,e){return a.compare(e,t)}}}var u,s,l={};switch(o[0]){case"NC":return l.equals=b(!1),l.compare=N(!1),l;case"QUNC":return l.equals=b(!0),l.compare=N(!0),l;case"DblSC":return l.equals=d(i,g),l.compare=y(S(f)),l;case"CCC":return l.equals=w(B().equals),l.compare=y(T(B().compare)),l;case"TEXT":u=o[1]||t,X(s=R(u,r),u);l.equals=d(function(t,e){return s.equals(t.toString(),e.toString())},h);return l.compare=y(function(t,e){return T(s.compare)(n.string.cast(t),n.string.cast(e))}),l;case"CAVC":case"DecSC":case"GAC":case"AtSC":case"CalVC":return{equals:d(i,h),compare:y(S(f))};case"EQC":return l.equals=d(i,h),l.compare=function(t,e){return l.equals(t,e)?0:1},l;case"CAC":return u=o[1]||t,X(s=R(u,r),u),l.equals=function(t,e){return s.equals(t.toString(),e.toString())},l.compare=function(t,e){return s.compare(t.toString(),e.toString())},l;default:throw new c("Unknown comparer "+e,"SXJS0003")}}function C(e,r){var o=l,i=null;e.hasAttribute("comp")&&(i=(i=e.getAttribute("comp")).replace(/^DESC\|/,""));var a=o.evaluateIfPresent(o.argRole(e,"collation"),r).next(),u=o.evaluateIfPresent(o.argRole(e,"order"),r).next(),s=o.evaluateIfPresent(o.argRole(e,"lang"),r).next(),f=o.evaluateIfPresent(o.argRole(e,"caseOrder"),r).next(),m=o.evaluateIfPresent(o.argRole(e,"dataType"),r).next();f=null===a&&null!==f?f.toString():"#default";try{s=null===a&&null!==s&&""!==s.toString()?n.language.fromString(s.toString()):null}catch(t){throw c("@lang: "+t.message,"XTDE0030")}return u=null===u?"ascending":u.toString(),m=null===m?null:m.toString(),{comp:i,collation:a=null===a?t:a.toString(),order:u,lang:s,caseOrder:f,dataType:m}}function O(t,e){return A(C(t,e),e)}function A(t,e){var r=R(t.collation,e);X(r,t.collation);var o,i,a=r.compare,u="#default"!=t.caseOrder?(o=a,i="lower-first"==t.caseOrder,function(t,e){var n=t.toString(),r=e.toString(),a=n.toLowerCase(),u=r.toLowerCase(),s=o(a,u);if(0===s){for(var c=0;c<n.length;c++)if(n.charAt(c)!=r.charAt(c))return i==(n.charAt(c)==n.charAt(c).toLowerCase())?-1:1;return 0}return s}):T(a);function s(e){return"descending"==t.order?function(t,n){return e(n,t)}:e}if("number"==t.dataType)return s(N(!1));if("text"==t.dataType){return s(y(function(t,e){return u(n.string.cast(t),n.string.cast(e))}))}if(t.comp){var c=t.comp;if("DblSC"==c)return s(y(S(f)));if("CalVC"==c||"DecSC"==c)return s(y(f));if("CCC"==c)return s(y(u))}return s(u)}function D(t,e){switch(t){case"=":case"eq":return 0===e;case"<":case"lt":return e<0;case">":case"gt":return e>0;case">=":case"ge":return e>=0;case"<=":case"le":return e<=0;case"!=":case"ne":return 0!==e;default:throw new c("Unknown operator "+t,"SXJS0003")}}function _(t,e,n){var r,o,i=t.expand(),a=e.expand();for(t=m.ForArray(i),e=m.ForArray(a);;){if(r=t.next(),o=e.next(),null===r)return null===o;if(null===o)return!1;if(!F(r,o,n))return!1}}function F(t,e,r){var o=a;if(t===e)return!0;if(o.isNode(t)){if(!o.isNode(e)||!o.isSameNodeType(t.nodeType,e.nodeType))return!1;switch(t.nodeType){case o.DOCUMENT_NODE:case o.DOCUMENT_FRAGMENT_NODE:return _(s.child(t),s.child(e));case o.ELEMENT_NODE:if(!o.nameOfNode(t).equals(o.nameOfNode(e)))return!1;var i,u=s.attribute(t).expand();if(u.length!=s.attribute(e).count())return!1;for(i=0;i<u.length;i++){var f=u[i],p=o.nameOfNode(f),h=p.uri?p.uri:null;if(!e.hasAttributeNS(h,p.local))return!1;if(e.getAttributeNS(h,p.local)!=f.value)return!1}return _(s.child(t),s.child(e),r);case o.ATTRIBUTE_NODE:return o.nameOfNode(t).equals(o.nameOfNode(e))&&t.value==e.value;case o.NAMESPACE_NODE:return t.prefix==e.prefix&&t.uri==e.uri;case o.PROCESSING_INSTRUCTION_NODE:return t.target==e.target&&(r?r(t.textContent,e.textContent):t.textContent==e.textContent);case o.TEXT_NODE:case o.COMMENT_NODE:return r?r(t.textContent,e.textContent):t.textContent==e.textContent;default:throw new c("Unknown node type "+t.nodeType,"SXJS0003")}}else{if(l.isArray(t)){if(!l.isArray(e)||e.value.length!=t.value.length)return!1;for(var d=0;d<t.value.length;d++)if(!_(m.ForArray(t.value[d]),m.ForArray(e.value[d],r)))return!1;return!0}if(l.isMap(t)){if(!l.isMap(e))return!1;var v=t.keys(),y=e.keys();return v.length==y.length&&m.ForArray(v).every(function(n){return e.containsKey(n)&&_(m.ForArray(t.get(n)),m.ForArray(e.get(n)))})}if(g(t)&&g(e))return!0;if(r&&n.string.isStringLike(t)&&n.string.isStringLike(e))return r(t.value,e.value);try{return t.equals(e)}catch(t){return!1}}}function M(t,e){return t.map(function(t){var r=l.argRole(t,"dataType"),o=null===r?null:l.evaluate(r,e).next();return"number"==o?function(t){return null===t?null:n.double.fromStringUnfailing(t.toString())}:"text"==o?function(t){return null===t?null:n.string.cast(t)}:function(t){return t}})}function I(t,e){if(l.isAstral(t)||l.isAstral(e)){var n=function(t,e){for(var n=l,r=n.stringToCodepoints(t.toString()),o=n.stringToCodepoints(e.toString()),i=0;;){if(i==r.length)return i==o.length?0:-1;if(i==o.length)return 1;if(r[i]!=o[i])return r[i]-o[i];i++}}(t,e);return n<0?-1:0===n?0:1}return t<e?-1:t==e?0:1}function k(t,e){return t.substring(0,e.length)===e}function P(t,e){return t.substring(t.length-e.length)===e}function U(t,e){return e?e.next().toString():a.getAttribute(t,"collation")}function R(t,n){var r=t&&!k(t,e)?n.fixed.options.collations[t]:B();if(!r)throw c("Unrecognized collation "+t,"FOCH0002");return r}function X(t,e){if(!t.hasOwnProperty("compare")||!t.hasOwnProperty("compare"))throw c("Collation "+e+" cannot be used for sorting","XTDE1035")}function B(){return{equals:function(t,e){return t===e},compare:function(t,e){return I(t,e)},contains:function(t,e){return-1!=t.indexOf(e)},startsWith:function(t,e){return k(t,e)},endsWith:function(t,e){return P(t,e)},indexOf:function(t,e){return t.indexOf(e)},collationKey:function(t){return t}}}return{allocateCodedComparer:E,allocateCompareFn:O,caseblindCollation:function(){function t(t){return t?(t+"").toUpperCase():""}return{equals:function(e,n){return t(e)===t(n)},compare:function(e,n){return I(t(e),t(n))},contains:function(e,n){return-1!=t(e).indexOf(t(n))},startsWith:function(e,n){return k(t(e),t(n))},endsWith:function(e,n){return P(t(e),t(n))},indexOf:function(e,n){return t(e).indexOf(t(n))},collationKey:function(e){return t(e)}}},cmpFn:T,codepointCollation:B,codepointCollationUri:t,codepointComparison:I,compareFnWithProps:A,deepEqualItems:F,deepEqualSequences:_,eqFn:w,fotsCaseblindCollationUri:"http://www.w3.org/2010/09/qt-fots-catalog/collation/caseblind",gc:o,gc10comparer:function(t){return{equals:function(e,r){var o=n.numeric.matches,i=function(t){return n.numeric.numberFn(t).toNumber()};return n.untypedAtomic.matches,o(e)||o(r)?i(e)===i(r):t.equals(e,r)},compare:t.compare}},generalComparison:function(t,e,n){var r=l,i=r.evalChild1(t,e),a=r.evalChild2(t,e).expand(),u=E(t.getAttribute("comp"),e);return n||(n=t.getAttribute("op")),o(i,a,n,u)},getCollation:function(t,e,n){return R(U(t,e),n)},getCollatingFn:function(t,e,n,r){var o=U(t,e),i=R(o,r)[n];if(!i)throw c("Collation "+o+" has no "+n+" method","FOCH0002",t);return i},getConverters:M,grouping:function(e,o){var i=m.Tracker(l.evaluate(l.argRole(e,"select"),o)),s=o.newContext(!1);function f(t){var e=[];return i.forEachItem(function(n){t(e,n)}),e}s.focus=i;var h={starting:function(){var t=p(l.argRole(e,"match"));return f(function(e,n){1==i.position||t(n,s)?e.push({group:[n]}):e[e.length-1].group.push(n)})},ending:function(){var t=p(l.argRole(e,"match")),n=!1;return f(function(e,r){1==i.position||n?e.push({group:[r]}):e[e.length-1].group.push(r),n=t(r,s)})},adjacent:function(){var n=l.argRole(e,"collation"),r=R(n?l.evaluate(n,o).next().toString():t,o),a=l.argRole(e,"key"),u=null;return f(function(t,e){var n=l.evaluate(a,s).expand();1!=i.position&&_(m.ForArray(n),m.ForArray(u),r.equals)?t[t.length-1].group.push(e):(t.push({group:[e],key:n}),u=n)})},by:function(){var n=l.argRole(e,"collation"),i=R(n?l.evaluate(n,o).next().toString():t,o),a=r.trieWithCollation(i),u=l.argRole(e,"key");return f(function(t,e){var n,r=[];l.evaluate(u,s).forEachItem(function(o){a.containsKey(o)?(n=a.get(o),r.findIndex(function(t){return t==n})<0&&(t[n].group.push(e),r.push(n))):(n=t.length,t.push({group:[e],key:[o]}),a.inSituPut(o,n),r.push(n))})})},by_c:function(){var r=l.argRole(e,"collation"),i=R(r?l.evaluate(r,o).next().toString():t,o),a=l.argRole(e,"key"),p=new u,h=i.collationKey;if(!h)throw new c("Collation is unsuitable for keys and grouping","XTDE1110");return p.options={sameKey:function(t,e){return _(m.ForArray(t),m.ForArray(e),i.equals)},hash:function(t){return t.map(function(t){return n.string.isStringLike(t)?h(t.matchKey()):t.matchKey()}).join()}},f(function(t,e){var n,r=l.evaluate(a,s).expand();p.containsKey(r)?t[n=p.get(r)].group.push(e):(n=t.length,t.push({group:[e],key:r}),p.inSituPut(r,n))})}};h.adjacent_c=h.adjacent;var g=h[e.getAttribute("algorithm")+(l.hasFlag(e,"c")?"_c":"")](),d=a.getChildElements(e,"sortKey");if(d.length>0){var v=m.Tracker(m.ForArray(g)),y=o.newContext(!1);y.focus=v;var S=d.map(function(t){return O(t,o)});v.forEachItem(function(t,e){t.sortKeys=d.map(function(n){var r=y.focus;return r.current=t.group[0],r.position=e+1,y.currentGroup=t.group,y.currentGroupingKey=t.key,l.evalChild1(n,y).next()})}),g.sort(function(t,e){for(var n=0;n<S.length;n++){var r=S[n](t.sortKeys[n],e.sortKeys[n]);if(r<0)return-1;if(r>0)return 1}return 0})}var x=o.newContext(!1);x.focus=m.Tracker(m.ForArray(g));for(var N=l.argRole(e,"content"),b=[],w=0;null!==x.focus.next();){var T=g[w++],E=x.focus;E.current=T.group[0],E.position=w,x.currentGroup=T.group,x.currentGroupingKey=T.key,Array.prototype.push.apply(b,l.evaluate(N,x).expand())}return m.ForArray(b)},htmlCaseInsensitiveCollationUri:"http://www.w3.org/2005/xpath-functions/collation/html-ascii-case-insensitive",itemIsNaN:g,lexicographicCompare:function(t,e,r){for(var o=t.next(),i=e.next();;){if(null===o)return null===i?0:-1;if(null===i)return 1;if(r){if(!F(o,i,r.equals))return g(o)?-1:n.string.matches(o)&&n.string.matches(i)?r.compare(o.value,i.value):o.compareTo(i);o=t.next(),i=e.next()}else{if(!F(o,i))return g(o)?-1:o.compareTo(i);o=t.next(),i=e.next()}}},sortKeyProps:C,sortSequence:function(t,e){var n=a,r=m.Tracker(l.evalChild1(t,e)),o=[],i=n.getChildElements(t,"sortKey"),u=i.map(function(t){return O(t,e)}),s=M(i,e),c=e.newContext(!1);return c.tempOutputState="sort key",c.focus=r,r.forEachItem(function(t){var e=i.map(function(t,e){return s[e](l.evalChild1(t,c).next())});o.push({item:t,keys:e})}),o.sort(function(t,e){var n;for(n=0;n<u.length;n++){var r=u[n](t.keys[n],e.keys[n]);if(0!==r)return r}return 0}),m.ForArray(o).mapOneToOne(function(t){return t.item})},testComparison:D,testEquality:function(t,e){switch(t){case"=":case"eq":return e;case"!=":case"ne":return!e;case"<":case"lt":case">":case"gt":case">=":case"ge":case"<=":case"le":throw new c("Operator "+t+" not allowed for unordered types","SXJS0003");default:throw new c("Unknown operator "+t,"SXJS0003")}},trieWithCollation:function(t){var e=new u,r=t.collationKey;if(!r)throw new c("Collation is unsuitable for keys and grouping","XTDE1110");var o=function(t){return n.string.isStringLike(t)?r(t.matchKey()):t.matchKey()};return e.options={sameKey:function(t,e){return o(t)===o(e)},hash:function(t){return o(t)}},e},xsltsCaseblindCollationUri:"http://www.w3.org/xslts/collation/caseblind"}}();function o(t,e,n){this.prefix=null===t?"":t,this.uri=null===e?"":e,n&&(this.parentNode=n)}o.prototype={prefix:null,uri:null,parentNode:null,nodeType:13};function i(t,e,n){this.qname=t,this.value=e,this.parent=n,this.name=this.qname.toString(),this.namespaceURI=this.qname.uri,this.localName=this.qname.local,this.prefix=this.qname.prefix}i.prototype={qname:null,value:null,parent:null,nodeType:2};var a=function(){"use strict";var t=1;return{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION:4,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NAMESPACE_NODE:13,shallowCopy:function(t,e,n,r){if(a.isNode(t)){var u,s;switch(t.nodeType){case a.DOCUMENT_NODE:case a.DOCUMENT_FRAGMENT_NODE:u=e.resultDocument.createDocumentFragment();var f=e.newContext(!1);l.makeComplexContent(u,r(f),e);break;case a.ELEMENT_NODE:s=a.nameOfNode(t),u=e.createElement(s.uri,s.toString()),n&&n.indexOf("c")>=0&&!(SaxonJS.getPlatform().inBrowser&&u instanceof HTMLElement)&&a.inScopeNamespaces(t).forEach(function(t){a.declareNS(u,t.prefix,t.uri)}),u._saxonBaseUri=a.baseURI(t),l.makeComplexContent(l.markLocal(u,n),r(e),e);break;case a.ATTRIBUTE_NODE:u=new i(a.nameOfNode(t),t.value,null);break;case a.TEXT_NODE:u=e.resultDocument.createTextNode(t.textContent);break;case a.COMMENT_NODE:u=e.resultDocument.createComment(t.textContent);break;case a.PROCESSING_INSTRUCTION_NODE:u=e.resultDocument.createProcessingInstruction(t.target,t.textContent);break;case a.NAMESPACE_NODE:u=new o(t.prefix,t.uri);break;default:throw c("Unknown node type "+t.nodeType,"SXJS0003")}return m.Singleton(l.markLocal(u,n))}return m.Singleton(t)},copyItem:function(t,e,n){if(!a.isNode(t))return t;var r,u,c,f=function(t,e){n&&n.indexOf("m")>=0&&(e._saxonOriginal=t)};switch(t.nodeType){case a.DOCUMENT_NODE:case a.DOCUMENT_FRAGMENT_NODE:var m=e.resultDocument.createDocumentFragment();return(r=a.obtainDocumentNumber(m))._saxonBaseUri=t._saxonBaseUri,l.makeComplexContent(r,s.child(t).mapOneToOne(function(t){return a.copyItem(t,e,n)}),e),f(t,r),l.markLocal(r,n);case a.NAMESPACE_NODE:return new o(t.prefix,t.uri);case a.ELEMENT_NODE:return c=a.nameOfNode(t),u=e.createElement(c.uri,c.toString()),n&&n.indexOf("c")>=0&&!(SaxonJS.getPlatform().inBrowser&&u instanceof HTMLElement)&&a.inScopeNamespaces(t).forEach(function(t){a.declareNS(u,t.prefix,t.uri)}),s.attribute(t).forEachItem(function(t){var e=""===t.namespaceURI?null:t.namespaceURI;u.setAttributeNS(e,t.name,t.value)}),s.child(t).forEachItem(function(t){var r=a.copyItem(t,e,n);r.nodeType==a.ELEMENT_NODE&&""===a.nameOfNode(r).uri&&""!==c.uri&&a.declareNS(r,"",""),u.appendChild(r)}),u._saxonBaseUri=a.baseURI(t),f(t,u),l.markLocal(u,n);case a.DOCUMENT_TYPE_NODE:return null;case a.ATTRIBUTE_NODE:return new i(a.nameOfNode(t),t.value,null);default:return f(t,u=SaxonJS.getPlatform().inBrowser?window.document.importNode(t,!0):cloneNode(e.resultDocument,t,!0)),l.markLocal(u,n)}},ownerDocument:function(t){return s.ancestorOrSelf(t).expand().pop()},obtainDocumentNumber:function(e){return"_saxonDocumentNumber"in e||(e._saxonDocumentNumber=t++),e},documentNumber:function(t){return a.obtainDocumentNumber(t)._saxonDocumentNumber},nameOfNode:function(t){if(!t||!t.nodeType)return null;switch(t.nodeType){case a.ELEMENT_NODE:return SaxonJS.getPlatform().inBrowser&&t instanceof HTMLElement&&"http://www.w3.org/1999/xhtml"==t.namespaceURI?n.QName.fromParts("","",t.localName):n.QName.fromParts(t.prefix,t.namespaceURI,t.localName);case a.ATTRIBUTE_NODE:return"xml"==t.prefix?n.QName.fromParts(t.prefix,l.KNOWN_URI.xml,t.localName):t.qname;case a.PROCESSING_INSTRUCTION_NODE:return n.QName.fromParts("","",t.target);case a.NAMESPACE_NODE:return t.prefix?n.QName.fromParts("","",t.prefix):null;default:return null}},getChildElements:function(t,e){for(var n=[],r=t.firstChild;null!==r;)r.nodeType!=a.ELEMENT_NODE||e&&e!=r.tagName||n.push(r),r=r.nextSibling;return n},firstElementChild:function(t,e){for(var n=t.firstChild;null!==n;){if(n.nodeType==a.ELEMENT_NODE&&(!e||e==n.tagName))return n;n=n.nextSibling}return null},inDocumentOrder:function(t){var e=t.expand();return e.sort(a.compareDocumentOrder),m.ForArray(e).mapOneToOne(function(t,n){return n>0&&a.isSameNode(t,e[n-1])?null:t})},compareDocumentOrder:function(t,e){function r(t){return s.ancestor(t).count()}if(a.isSameNode(t,e))return 0;var o=a.xdmParentNode(t),i=a.xdmParentNode(e);if(null===o){if(null===i){var u=a.obtainDocumentNumber;return u(t)._saxonDocumentNumber<u(e)._saxonDocumentNumber?-1:1}return t===i?-1:a.compareDocumentOrder(t,i)}if(null===i)return e===o?1:a.compareDocumentOrder(o,e);if(o!==i){if(t===i)return-1;if(e===o)return 1;var l=r(o),f=r(i);return l==f?a.compareDocumentOrder(o,i):l>f?a.compareDocumentOrder(o,e):a.compareDocumentOrder(t,i)}var m=t.nodeType,p=e.nodeType;if(m==a.ATTRIBUTE_NODE){if(p==a.ATTRIBUTE_NODE){var h,g=o.attributes;for(h=0;h<g.length;h++){var d=n.QName.fromParts(g[h].prefix,g[h].namespaceURI,g[h].localName);if(d.equals(a.nameOfNode(t)))return-1;if(d.equals(a.nameOfNode(e)))return 1}throw c("Att not found in parent","SXJS0004")}return p==a.NAMESPACE_NODE?1:-1}if(m==a.NAMESPACE_NODE)return p==a.NAMESPACE_NODE?t.prefix<e.prefix?-1:1:-1;if(p==a.ATTRIBUTE_NODE||p==a.NAMESPACE_NODE)return 1;for(var v=t,y=e;;){if(null===(v=v.previousSibling))return-1;if(v===e)return 1;if(null===(y=y.previousSibling))return 1;if(y===t)return-1}},xdmParentNode:function(t){return a.isAttr(t)?t.parent:t.parentNode},declareNS:function(t,e,n){t.setAttributeNS("http://www.w3.org/2000/xmlns/",""===e?"xmlns":"xmlns:"+e,n)},inScopeNamespaces:function(t){for(var e,n=[{prefix:"xml",uri:l.KNOWN_URI.xml}],r={xml:!0},o=s.ancestorOrSelf(t);null!==(e=o.next())&&e.nodeType==a.ELEMENT_NODE;){var i,u=e.attributes;for(i=0;i<u.length;i++){var c=u[i].name;if("xmlns"==c.substring(0,5))if(5!=c.length||r[""]){if(":"==c.charAt(5)){var f=c.substring(6);r[f]||(r[f]=!0,n.push({prefix:f,uri:u[i].value}))}}else r[""]=!0,""!==u[i].value&&n.push({prefix:"",uri:u[i].value})}}return n},hasNamespaceUndeclaration:function(t){var e=t.attributes.getNamedItem("xmlns");return e&&""===e.value},getInheritedAttribute:function(t,e){for(var n=t;n&&n.nodeType==a.ELEMENT_NODE;){if(n.hasAttribute(e))return n.getAttribute(e);n=n.parentNode}return null},getAttribute:function(t,e,n){return t.hasAttribute(e)?t.getAttribute(e):arguments.length>2?n:null},getAttributeAsEQName:function(t,e,n){var r=a.getAttributeAsQName(t,e,n);return null===r?null:"Q{"+r.uri+"}"+r.local},getAttributeAsQName:function(t,e,n){return t.hasAttribute(e)?a.resolveLexicalQName(t,t.getAttribute(e),n):null},resolveLexicalQName:function(t,e,r){var o=n.QName;if(/^Q\{/.test(e))return o.fromEQName(e);if(/:/.test(e)){return o.fromString(e,function(e){return"xml"==e?l.KNOWN_URI.xml:t.lookupNamespaceURI(e)})}var i=r&&t.lookupNamespaceURI(null)||"";return o.fromParts("",i,e)},isAttr:function(t){return t instanceof i},isNSNode:function(t){return t instanceof o},isNode:function(t){return t instanceof Node&&!(t.nodeType==a.PROCESSING_INSTRUCTION_NODE&&"xml"==t.target)||a.isAttr(t)||a.isNSNode(t)},isSameNode:function(t,e){return t===e||a.isNSNode(t)&&a.isNSNode(e)&&t.parentNode&&e.parentNode&&t.parentNode==e.parentNode&&t.prefix==e.prefix||a.isAttr(t)&&a.isAttr(e)&&t.parent&&e.parent&&t.parent==e.parent&&a.nameOfNode(t).equals(a.nameOfNode(e))},isSameNodeType:function(t,e){return t==e||t==a.DOCUMENT_NODE&&e==a.DOCUMENT_FRAGMENT_NODE||e==a.DOCUMENT_NODE&&t==a.DOCUMENT_FRAGMENT_NODE},isAbsoluteURI:function(t){return/^(?:[a-z]+:)?\/\//i.test(t)},baseURI:function(t){function e(t){var e=a.xdmParentNode(t);return e?a.baseURI(e):t._saxonBaseUri?t._saxonBaseUri:null}if(null===t||a.isNSNode(t))return null;if(t.nodeType==a.ELEMENT_NODE&&t.hasAttribute("xml:base")){var n=t.getAttribute("xml:base");return a.isAbsoluteURI(n)?n:SaxonJS.getPlatform().resolveUri(n.toString(),e(t)).toString()}return e(t)},xmlToString:function(t,e){for(var n=e["saxon:line-length"],r=!0,o="",i=e["saxon:indent-spaces"];i-- >0;)o+=" ";var u="  ";function l(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\n/g,"&#xa;")}return function t(e,i,f,m){var p,h,g,d,v=f,y=m,S=0,x="";function N(){x.length-S>n&&(S=(x+="\n"+i+u).length)}var b=!1,w=!1,T=!1;switch(e.nodeType){case a.DOCUMENT_NODE:for(h=e.childNodes,d=0;d<h.length;++d)g=h[d],S=x.length,x+=(d>0?"\n":"")+t(g,"");break;case a.DOCUMENT_FRAGMENT_NODE:for(h=e.childNodes,d=0;d<h.length;++d)g=h[d],S=x.length,x+="\n"+t(g,"");break;case a.ELEMENT_NODE:p=a.nameOfNode(e),x+=(r?i:"")+"<"+p;var E="",C=e.parentNode;if(C&&C.nodeType!=a.ELEMENT_NODE&&(C=null),s.namespace(e).forEachItem(function(t){E="";var e=C?C.lookupNamespaceURI(t.prefix):"unknown";e||""!==t.prefix||(e=C.lookupNamespaceURI(null)),C&&e==t.uri||"xml"==t.prefix||(E=""===t.prefix?' xmlns="'+t.uri+'"':" xmlns:"+t.prefix+'="'+t.uri+'"'),x+=E,N()}),a.hasNamespaceUndeclaration(e)&&(x+=E=' xmlns=""',N()),s.attribute(e).forEachItem(function(t){E=" "+t.name+'="'+l(t.value)+'"',x+=E,N()}),x=x.replace(/\s+$/,""),0===(h=e.childNodes).length)x+="/>";else{for(x+=">",d=0;d<h.length;++d)b=(g=h[d]).nodeType==a.TEXT_NODE&&""!==g.nodeValue,x+=(T=!r||b||w)?"":"\n",x+=t(g,T?"":i+o,v,y),w=b;T||(x+="\n"+i),x+="</"+p+">"}break;case a.ATTRIBUTE_NODE:p=a.nameOfNode(e).toString(),x+=p+'="'+l(e.value)+'"';break;case a.TEXT_NODE:x=e.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;");break;case a.COMMENT_NODE:x+="\x3c!--"+e.nodeValue+"--\x3e";break;case a.PROCESSING_INSTRUCTION_NODE:x+="<?"+e.target+" "+e.nodeValue+"?>";break;case a.DOCUMENT_TYPE_NODE:x+="<!DOCTYPE "+e.name+' SYSTEM "'+e.systemId+'">';break;case a.NAMESPACE_NODE:break;case a.CDATA_SECTION:return e.data;default:throw c("Unknown node type "+e.nodeType,"SXJS0003")}return x}(t,"",[],"")}}}(),u=function(){"use strict";var t=0,n={hash:function(t){return t.hashCode()},sameKey:function(t,e){function n(t){return"timezoneOffset"in t&&null!==t.timezoneOffset}try{return(t.equals(e)||r.itemIsNaN(t)&&r.itemIsNaN(e))&&n(t)==n(e)}catch(t){return!1}}};function o(t,e){for(var n=function t(e,n){if(""===n)return e.leafKVPs;var r=n.charAt(0);return e.subTries.hasOwnProperty(r)?t(e.subTries[r],n.substring(1)):[]}(t,t.options.hash(e)),r=0;r<n.length;r++)if(t.options.sameKey(n[r].k,e))return n[r];return null}function i(t){this.leafKVPs=[],this.subTries={},this.options=t||{hash:n.hash,sameKey:n.sameKey}}return i.prototype={leafKVPs:[],subTries:{},options:n,containsKey:function(t){return null!==o(this,t)},get:function(t){var e=o(this,t);return null===e?[]:e.v},inSituPut:function(e,n){!function e(n,r,o,a){if(""===a){for(var u=0;u<n.leafKVPs.length;u++)if(n.options.sameKey(n.leafKVPs[u].k,r))return void(n.leafKVPs[u]={k:r,v:o});n.leafKVPs.push({k:r,v:o})}else{var s,c=a.charAt(0);n.subTries.hasOwnProperty(c)?s=n.subTries[c]:((s=new i(n.options)).id=t++,n.subTries[c]=s),e(s,r,o,a.substring(1))}}(this,e,n,this.options.hash(e))},put:function(t,e){return function t(e,n,r,o){var a=new i(e.options),u=!1;if(""===o)return a.leafKVPs=e.leafKVPs.map(function(t){return e.options.sameKey(t.k,n)?(u=!0,{k:n,v:r}):t}),u||a.leafKVPs.push({k:n,v:r}),a.subTries=e.subTries,a;var s=o.charAt(0);for(var c in e.subTries)e.subTries.hasOwnProperty(c)&&(c==s?(a.subTries[c]=t(e.subTries[c],n,r,o.substring(1)),u=!0):a.subTries[c]=e.subTries[c]);if(!u){var l=new i(e.options);l=t(l,n,r,o.substring(1)),a.subTries[s]=l}return a.leafKVPs=e.leafKVPs,a}(this,t,e,this.options.hash(t))},remove:function(t){return function t(e,n,r){var o=new i(e.options);if(""===r)return o.leafKVPs=e.leafKVPs.filter(function(t){return!e.options.sameKey(t.k,n)}),o.subTries=e.subTries,o;var a=r.charAt(0);for(var u in e.subTries)e.subTries.hasOwnProperty(u)&&(o.subTries[u]=u==a?t(e.subTries[u],n,r.substring(1)):e.subTries[u]);return o.leafKVPs=e.leafKVPs,o}(this,t,this.options.hash(t))},forAllPairs:function(t){this.leafKVPs.forEach(t);for(var e in this.subTries)this.subTries.hasOwnProperty(e)&&this.subTries[e].forAllPairs(t)},display:function(){O("HashTrie:"),function t(n,r){r>0&&O("Subtrie "+r),n.leafKVPs.forEach(function(t){O(e(t.k)+": "+e(t.v))});for(var o in n.subTries)n.subTries.hasOwnProperty(o)&&t(n.subTries[o],r+1)}(this,0)},keys:function(){var t=[];return this.forAllPairs(function(e){t.push(e.k)}),t},conforms:function(t,e,n){var r=this;return m.ForArray(r.keys()).every(function(o){var i=r.get(o);return t(o)&&n(i.length)&&m.ForArray(i).every(e)})}},i}(),s=function(){"use strict";var t=a,e={ancestor:function(e){var n;switch(e.nodeType){case t.DOCUMENT_NODE:case t.DOCUMENT_FRAGMENT_NODE:return m.Empty;case t.ATTRIBUTE_NODE:return e.parent?m.Stepping(e.parent,function(t){return t.parentNode}):m.Empty;default:return(n=e.parentNode)?m.Stepping(n,function(t){return t.parentNode}):m.Empty}},ancestorOrSelf:function(t){return m.Join([m.Singleton(t),s.ancestor(t)])},attribute:function(e){if(e.nodeType==t.ELEMENT_NODE){var r,o,a=e.attributes,u=[];for(r=0;r<a.length;r++)("xmlns"!=(o=a[r].name).substring(0,5)||5!=o.length&&":"!=o.charAt(5))&&u.push(new i(n.QName.fromParts(a[r].prefix,a[r].namespaceURI,a[r].localName),a[r].value,e));return m.ForArray(u)}return m.Empty},child:function(e){function n(t){return m.Stepping(t.firstChild,function(t){return t.nextSibling})}if(null===e)return m.Empty;switch(e.nodeType){case t.DOCUMENT_NODE:return n(e).filter(function(e){return!(e.nodeType==t.PROCESSING_INSTRUCTION_NODE&&"xml"==e.target||e.nodeType==t.TEXT_NODE)});case t.DOCUMENT_FRAGMENT_NODE:case t.ELEMENT_NODE:return n(e);default:return m.Empty}},descendant:function(t){return s.child(t).mapOneToMany(function(t){return s.descendantOrSelf(t)})},descendantOrSelf:function(t){return m.Join([m.Singleton(t),s.descendant(t)])},following:function(e){switch(e.nodeType){case t.DOCUMENT_NODE:case t.DOCUMENT_FRAGMENT_NODE:return m.Empty;case t.ATTRIBUTE_NODE:case t.NAMESPACE_NODE:var n=t.xdmParentNode(e);return null===n?m.Empty:m.Join([s.descendant(n),s.following(n)]);default:return s.ancestorOrSelf(e).mapOneToMany(function(t){return s.followingSibling(t).mapOneToMany(s.descendantOrSelf)})}},followingSibling:function(e){switch(e.nodeType){case t.DOCUMENT_NODE:case t.DOCUMENT_FRAGMENT_NODE:case t.ATTRIBUTE_NODE:case t.NAMESPACE_NODE:return m.Empty;default:return m.Stepping(e.nextSibling,function(t){return t.nextSibling})}},namespace:function(e){return e.nodeType==t.ELEMENT_NODE?m.ForArray(t.inScopeNamespaces(e).map(function(t){return new o(t.prefix,t.uri,e)})):m.Empty},parent:function(e){return m.Singleton(t.xdmParentNode(e))},preceding:function(t){return s.ancestorOrSelf(t).mapOneToMany(function(t){return s.precedingSibling(t).mapOneToMany(function(t){return m.ForArray(s.descendantOrSelf(t).expand().reverse())})})},precedingSibling:function(e){switch(e.nodeType){case t.DOCUMENT_NODE:case t.DOCUMENT_FRAGMENT_NODE:case t.ATTRIBUTE_NODE:case t.NAMESPACE_NODE:return m.Empty;default:return m.Stepping(e.previousSibling,function(t){return t.previousSibling})}},self:function(t){return m.Singleton(t)}};return e["ancestor-or-self"]=e.ancestorOrSelf,e["descendant-or-self"]=e.descendantOrSelf,e["following-sibling"]=e.followingSibling,e["preceding-sibling"]=e.precedingSibling,e}();function c(t,e,n){if(!(this instanceof c))return new c(t,e,n);this.name="XError",this.message=t||"Default Message",this.code=e||"FORG0001",n&&this.setExpr(n),this.stack=(new Error).stack}c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.code=null,c.prototype.xsltLineNr=null,c.prototype.xsltModule=null,c.prototype.compiledLineNr=null,c.prototype.isGlobal=!1,c.prototype.setExpr=function(t){this.xsltLineNr=a.getInheritedAttribute(t,"line"),this.xsltModule=a.getInheritedAttribute(t,"module"),this.compiledLineNr=t.lineNumber,null!==this.xsltLineNr&&(this.message+=" at "+this.xsltModule+"#"+this.xsltLineNr)},c.test=function(t){if(t)throw c.call(this,arguments[1],arguments[2],arguments[3])};var l=function(){"use strict";var t=a,i=function(){};function f(){}var p={among:function(t,e){var n=U(t,e).next();return R(t,e).filter(function(t){return t===n})},analyzeString:function(t,e){var n=K(X(t,"select"),e).next();if(null===n)return m.Empty;n=n.toString();var r=K(X(t,"regex"),e).next().toString(),o=K(X(t,"flags"),e).next().toString(),i=X(t,"matching"),a=X(t,"nonMatching"),u=b(n,r,o,!0,!1),s=e.newContext(!1),c=u.map(function(t){return t.string});return s.focus=m.Tracker(m.ForArray(c)),s.focus.mapOneToMany(function(t){var e=u[s.focus.position-1];return e.matching?(s.focus.regexGroups=e.groups,i?K(i,s):m.Empty):(s.focus.regexGroups=[],a?K(a,s):m.Empty)})},and:function(t,e){return m.oneBoolean(E(U(t,e))&&E(R(t,e)))},applyImports:function(t,e){var n=e.currentMode.mode;if(!n)throw c("applyImports: no current mode","XTDE0560",t);if(e.noCurrentFocus())throw c("applyImports: no context item","XTDE0560",t);var r=e.newContext(!0);return r.currentComponent=e.currentMode,A(t,e,r),r.focus=m.Solo(e.getCurrentFocus()),r.focus.regexGroups=e.focus.regexGroups,n.applyImports(r)},applyT:function(t,e){var n,r=e.newContext(!0);if(B(t,"c")){var o=e.currentComponent.actor.tagName;n="function"===o||"globalVariable"===o||"globalParam"===o?e.fixed.modes[""]:e.currentMode.mode,r.currentComponent=e.currentMode}else{var i=Q(t,e,"mode");if((n=i.mode).mustBeTyped)throw c("Mode "+a.getAttribute(n._expr,"name")+" only handles typed nodes","XTTE3100",t);r.currentComponent=i}return A(t,e,r),r.focus=m.Tracker(U(t,e)),r.focus.regexGroups=e.focus?e.focus.regexGroups:null,n.applyTemplates(r)},arith:function(t,e){var n=v[t.getAttribute("calc")];return n||P("arithmetic ("+t.getAttribute("calc")+")",t),m.Singleton(F(t,e,n))},arith10:function(t,e){function r(t){var e=t.next();return null===e?n.double.fromNumber(NaN):n.double.cast(e)}var o=v[t.getAttribute("calc")];return m.Singleton(o(r(U(t,e)),r(R(t,e))))},array:function(e,n){var r=t.getChildElements(e).map(function(t){return K(t,n).expand()});return m.Singleton(new nt(r))},arrayBlock:function(e,n){var r=t.getChildElements(e).map(function(t){return K(t,n).expand()});return m.Singleton(new nt(r))},atomic:function(t){var e=t.getAttribute("val"),r=t.getAttribute("type").substring(3);return n[r]||G("Unknown type: "+r),m.Singleton(n[r].fromString(e))},atomSing:function(t,e){var n=U(t,e).mapOneToMany(w);if(!t.hasAttribute("card")&&null===(n=m.LookAhead(n)).peek()){var r=x(t.getAttribute("diag"));throw c("The "+r.required+" is empty",r.code,t)}return n},att:function(e,n){var r=Z(U(e,n)),o=t.getAttributeAsQName(e,"name");if(null===o)throw c("Invalid attribute name "+e.getAttribute("name"),"XTDE0850",e);var i=n.createAttributeFromQName(o);i.value=r;var a=e.hasAttribute("flags")?e.getAttribute("flags"):"";return m.Singleton(D(i,a))},attVal:function(e,r){var o=t.getAttributeAsQName(e,"name");if(r.noCurrentFocus())throw c("attVal: no context item","XPDY0002",e);var i,a=r.getCurrentFocus();if(!t.isNode(a))throw c("Context item for 'attVal' must be a node","XPTY0020",e);return a.nodeType!=t.ELEMENT_NODE?m.Empty:null===(i=""===o.uri?a.hasAttribute(o.local)?a.getAttribute(o.local):null:o.uri===J.xml?a.hasAttribute("xml:"+o.local)?a.getAttribute("xml:"+o.local):null:a.hasAttributeNS(o.uri,o.local)?a.getAttributeNS(o.uri,o.local):null)?m.Empty:m.Singleton(n.untypedAtomic.fromString(i))},axis:function(e,n){var r=new Function("item",e.getAttribute("jsTest")),o=e.getAttribute("name");if(n.noCurrentFocus())throw c("Context item is absent for "+o+" axis","XPDY0002",e);var i=n.getCurrentFocus();if(!t.isNode(i))throw c("Context item for "+o+" axis is not a node","XPTY0020",e);return s[o](i).filter(r)},break:function(t,e){var n=new f;return null!==t.firstChild&&(n.content=U(t,e).expand()),m.Join([m.Empty,m.Singleton(n)])},callT:function(t,e){var n=Q(t,e,"template"),r=e.newContext(!0);return r.currentMergeGroup=null,r.currentComponent=n,et(n.actor,r),A(t,e,r),U(n.actor,r)},cast:function(t,e){var n=U(t,e),r=n.next(),o=t.getAttribute("as");if(null===r){if("?"==o.slice(-1)||"1"==t.getAttribute("emptiable"))return m.Empty;throw c("Empty sequence casting to "+o,"XPTY0004",t)}if(null!==n.next())throw c("Multiple sequence casting to "+o,"XPTY0004",t);try{var i=M(o=o.replace(/(\?|\*)$/,"")),a="QName"==i.name?z(t,!0):null;return m.Singleton(i.cast(r,a))}catch(e){if(null!==e.code)throw e;throw c("Failed to cast to type "+o,"XPTY0004",t)}},castable:function(t,e){var n,r=U(t,e).mapOneToMany(w).expand();if(0===r.length)n="1"==t.getAttribute("emptiable");else if(r.length>1)n=!1;else try{var o=M(t.getAttribute("as")),i="QName"==o.name?z(t,!0):null;o.cast(r[0],i),n=!0}catch(t){n=!1}return m.oneBoolean(n)},cfn:function(t,e){var n,r=t.getAttribute("name");return"_format-number_1"==r?(n=[U(t,e),m.oneString(t.getAttribute("pic"))],t.hasAttribute("format")&&n.push(m.oneString(t.getAttribute("format"))),g["format-number"](n,e,t)):"_translate_1"==r?(n=[U(t,e),m.oneString(t.getAttribute("a1")),m.oneString(t.getAttribute("a2"))],g.translate(n,e)):void G("Unimplemented: cfn "+r)},check:function(t,n){var r=t.getAttribute("card"),o={"*":"zero or more","+":"one or more","?":"zero or one","°":"zero",1:"exactly one"};function i(e){var n=x(t.getAttribute("diag"));throw c("Required cardinality of "+n.required+" is "+o[r]+"; supplied value "+e,n.code,t)}var a=U(t,n);if("*"==r)return a;var u=m.LookAhead(a),s=u.peek();if(null===s){if("?"==r||"°"==r)return m.Empty;i("is empty")}else"°"==r&&i("is not empty (first item "+e(s)+")");if("+"==r)return u;u.next();var l=u.next();if(null!==l){var f=u.count()+2;i("contains "+f+" items ("+e(s)+", "+e(l)+(f>2?",... )":")"))}return m.Singleton(s)},choose:function(e,n){var r,o=t.getChildElements(e);for(r=0;r<o.length;r+=2)if(E(K(o[r],n)))return K(o[r+1],n);return m.Empty},comment:function(t,e){var n=U(t,e),r=e.resultDocument.createComment(Z(n).replace(/--/g,"- -").replace(/-$/,"- ")),o=t.hasAttribute("flags")?t.getAttribute("flags"):"";return m.Singleton(D(r,o))},compareToInt:function(t,e){var o=t.getAttribute("op"),i=U(t,e).next();if(null===i)return m.Empty;if(r.itemIsNaN(i))return m.oneBoolean("ne"==o);var a=n.integer.fromString(t.getAttribute("val"));return m.oneBoolean(r.testComparison(o,i.compareTo(a)))},compAtt:function(t,e){var n=t.hasAttribute("flags")?t.getAttribute("flags"):"";return _(t,e,function(r){var o=e.createAttributeFromQName(r);return(o=D(o,n)).value=Z(K(X(t,"select"),e)),o})},compElem:function(e,n){var r=e.hasAttribute("flags")?e.getAttribute("flags"):"";return _(e,n,function(o,i){var a=i.split(":");""===o&&2==a.length&&(i=a[1]);var u=n.createElement(o,i);return""!==o&&t.declareNS(u,1==a.length?"":a[0],o),tt(u,K(X(e,"content"),n),n),D(u,r)})},condCont:function(e,r){return U(e,r).filter(function(e){if(!t.isNode(e))return ot(e)?e.keys().length>0:""!==n.string.cast(e).value;switch(e.nodeType){case t.DOCUMENT_NODE:case t.DOCUMENT_FRAGMENT_NODE:case t.ELEMENT_NODE:return e.hasChildNodes();default:return""!==T(e).value}})},condSeq:function(e,r){var o=[],i=[],a=!0;t.getChildElements(e).map(function(e){if("onEmpty"==e.tagName)a&&(o=K(e,r).expand());else if("onNonEmpty"==e.tagName){var u=o.length;i.unshift(function(){o.splice.apply(o,[u,0].concat(K(e,r).expand()))})}else K(e,r).forEachItem(function(e){(function e(r){if(r instanceof Node){if(r.nodeType==t.DOCUMENT_NODE||r.nodeType==t.DOCUMENT_FRAGMENT_NODE)return!r.hasChildNodes();if(r.nodeType==t.TEXT_NODE)return""===r.nodeValue}else{if(r.isAtomic)return""===n.string.cast(r).value;if(rt(r))return!ct(m.Singleton(r)).some(function(t){e(t)})}return!1})(e)||(a=!1),o.push(e)})});return a||i.forEach(function(t){t()}),m.ForArray(o)},conditionalSort:function(e,n){return E(U(e,n))?R(e,n):U(t.getChildElements(e)[1],n)},convert:function(t,e){var n=M(t.getAttribute("to"));return U(t,e).mapOneToOne(B(t,"p")?function(t){return W(t,n.name)}:n.cast)},copy:function(e,n){if(n.noCurrentFocus())throw c("copy: no context item","XTTE0945",e);var r=n.getCurrentFocus(),o=e.getAttribute("flags");return t.shallowCopy(r,n,o,function(t){return U(e,t)})},copyOf:function(e,n){var r=e.getAttribute("flags");return U(e,n).mapOneToOne(function(e){return t.copyItem(e,n,r)})},currentGroup:function(t,e){if(e&&e.currentGroup)return m.ForArray(e.currentGroup);throw c("There is no current group","XTDE1061",t)},currentGroupingKey:function(t,e){if(e&&e.currentGroupingKey)return m.ForArray(e.currentGroupingKey);throw c("There is no current grouping key","XTDE1071",t)},cvUntyped:function(t,e){var r=U(t,e),o=t.getAttribute("to"),i=M(o).cast,a="xs:string"==o;return r.mapOneToOne(function(t){return n.untypedAtomic.matches(t)||a&&n.anyURI.matches(t)?i(t):t})},data:function(t,e){return U(t,e).mapOneToMany(w)},dbl:function(t){var e=t.getAttribute("val");return m.Singleton(n.double.fromString(e))},dec:function(t){var e=t.getAttribute("val");return m.oneDecimal(Big(e))},doc:function(e,n){var r=k(t.getChildElements(e)[0],n),o=e.hasAttribute("flags")?e.getAttribute("flags"):"";return m.Singleton(D(r,o))},docOrder:function(e,n){return t.inDocumentOrder(U(e,n))},dot:function(t,e){if(e.noCurrentFocus())throw c("dot: no context item","XPDY0002",t);return m.Singleton(e.getCurrentFocus())},elem:function(e,n){var r,o=!1,i=e.getAttribute("name"),a=i.split(":"),u=null;if(e.hasAttribute("nsuri")&&(u=e.getAttribute("nsuri"),o=!0),2==a.length&&null===u&&(null===(u=e.lookupNamespaceURI(a[0]))&&(u=z(e,!0)(a[0])),o=!0),null===u&&(u=""),"http://www.w3.org/2000/xmlns/"==u)throw c("Disallowed namespace "+u,"XTDE0835",e);try{r=n.createElement(u,i)}catch(t){throw c("Element name '"+i+"' is not a lexical QName","XTDE0820",e)}if(e.hasAttribute("namespaces")){var s,l=e.getAttribute("namespaces").toString().split(" ");for(s=0;s<l.length;s++){var f=l[s].split("="),p=f[0];"#"==p&&(p="");var h=2==f.length?f[1]:z(e,!0)(p);t.declareNS(r,p,h)}}o&&t.declareNS(r,2==a.length?a[0]:"",u),tt(r,U(e,n),n);var g=e.hasAttribute("flags")?e.getAttribute("flags"):"";return m.Singleton(D(r,g))},empty:function(){return m.Empty},emptyTextNodeRemover:function(e,n){return U(e,n).filter(function(e){return!(e instanceof Node&&e.nodeType==t.TEXT_NODE&&""===e.textContent)})},error:function(t){throw c(t.getAttribute("message"),t.getAttribute("code"),t)},evaluate:function(e,r){var o={language:"XSLT",contextType:"item()"},i=K(X(e,"xpath"),r).next().toString(),a=K(X(e,"cxt"),r),s=new u;t.getChildElements(e,"withParam").forEach(function(t){s.inSituPut(n.string.fromString(t.getAttribute("name")),U(t,r).expand())});var l=K(X(e,"wp"),r);l&&l.next().forAllPairs(function(t){if(!n.QName.matches(t.k))throw c("Parameter names in xsl:evaluate/@with-params map must be QNames:"+t.k.toString(),"XTTE3165",e);s.inSituPut(t.k,t.v)});s=m.Singleton(s);var f={},p=X(e,"sa");if(p){var h=K(p,r).next().toString();if("true"==h||"yes"==h||"1"==h)throw c("Saxon-JS does not support schema-aware evaluation","XTDE1665",e)}var g=e.getAttribute("as");g&&(o.requiredType=g.toString());var d=e.getAttribute("dxns");null!==d&&(o.xpathDefaultNamespace=d.toString());var v,y=X(e,"nsCxt");if(y){var S=K(y,r).next().attributes;for(v=0;v<S.length;++v){var x=S[v];"xmlns"==x.prefix?f[x.localName]=x.value:"xmlns"==x.name&&(f[""]=x.value,o.xpathDefaultNamespace=x.value)}}else f=L(e);o.params=s,o.namespaces=f,o.staticTyping=!0;var N=X(e,"baseUri");return N&&(o.staticBaseURI=K(N,r).next().toString()),SaxonJS.XPath.evaluateXDM(i,a,s,r,f,o)},every:function(t,e){var n=parseInt(t.getAttribute("slot"),10),r=U(t,e),o=H(t);return m.oneBoolean(!r.some(function(t){return e.localVars[n]=[t],!E(o(e))}))},except:function(e,n){var r=U(e,n),o=R(e,n);return m.Difference(r,o,t.compareDocumentOrder)},false:function(){return m.oneBoolean(!1)},filter:function(t,e){var r=U(t,e),o=H(t);if(B(t,"i")){var i=o(e).expand();if(1==i.length&&n.numeric.matches(i[0])){var a=i[0].toNumber();if(r instanceof m.ForArray)return m.Singleton(r.expand()[a-1]);var u=m.Tracker(r);return u.filter(function(){return u.position==a})}return E(m.ForArray(i))?r:m.Empty}var s,c=e.newContext(!1);return c.focus=m.Tracker(r),s=B(t,"p")?function(){var t=o(c).expand();return 1==t.length&&n.numeric.matches(t[0])?c.focus.position==t[0].toNumber():E(m.ForArray(t))}:function(){return E(o(c))},c.focus.filter(s)},first:function(t,e){return m.Singleton(U(t,e).next())},fnRef:function(t){throw c("Saxon-JS does not support higher-order functions","XTSE3540",t)},follows:function(e,r){return m.Singleton(F(e,r,function(e,r){return n.boolean.fromBoolean(t.compareDocumentOrder(e,r)>0)}))},for:function(t,e){var n=parseInt(t.getAttribute("slot"),10),r=H(t);return U(t,e).mapOneToMany(function(t){return e.localVars[n]=[t],r(e)})},forEach:function(t,e){var n=e.newContext(!1);n.focus=m.Tracker(U(t,e)),n.currentTemplate=null;var r=H(t);return n.focus.mapOneToMany(function(){return r(n)})},forEachGroup:function(t,e){return r.grouping(t,e)},fork:S,fn:function(e,n){var r=g[e.getAttribute("name")];return r||P(e.getAttribute("name")+"()",e),r(t.getChildElements(e).map(function(t){return K(t,n)}),n,e)},functionCall:function(t){P(t.getAttribute("name")+"()",t)},gc:r.generalComparison,gc10:function(t,e){function o(t){return 1==t.length&&n.boolean.matches(t[0])}function i(t){return[n.boolean.fromBoolean(E(m.ForArray(t)))]}function a(t){return m.ForArray(t).mapOneToMany(w).expand()}function u(t){return m.ForArray(t).mapOneToOne(n.numeric.numberFn).expand()}var s=U(t,e).expand(),c=R(t,e).expand();o(s)?c=i(c):o(c)?s=i(s):(s=a(s),c=a(c));var l=r.allocateCodedComparer(t.getAttribute("comp"),e),f=t.getAttribute("op");return"="!==f&&"!="!==f?(s=u(s),c=u(c)):l=r.gc10comparer(l),r.gc(m.ForArray(s),c,f,l)},gcEE:r.generalComparison,gVarRef:function(e,r){var o=Q(e,r),a=o.actor,u=a.getAttribute("name");if(o.value===i){var s=c("Circularity in global variable "+u,"XTDE0640");throw s.isGlobal=!0,s}if(null===o.value||void 0===o.value){if("globalParam"==a.tagName){var l=r.fixed.options.stylesheetParams[u];if(void 0===l&&/^Q\{\}/.test(u)&&(l=r.fixed.options.stylesheetParams[n.QName.fromEQName(u).local]),void 0!==l){null===l&&(l=[]);var f=new Function("val",a.getAttribute("jsAcceptor")),p=new Function("n",a.getAttribute("jsCardCheck")+" return c(n);"),h="item()"!==a.getAttribute("type").substr(0,6),g=function(e,r,o,i,a){function u(e,r){return null===e||(o=e,t.isNode(o)||n.untypedAtomic.matches(o)||n.string.matches(o)||n.boolean.matches(o)||n.double.matches(o))?e:ut(e,r,a);var o}if(void 0===o)return e;if(Array.isArray(e)){if(!r(e.length))throw c("Supplied value for parameter "+i+" has wrong cardinality","XTTE0590");return e.map(function(t){return u(o(t),!0)})}return u(o(e))}(l,p,f,u,h);o.value=Array.isArray(g)?g:[g]}else{if(B(a,"r"))throw c("Parameter "+u+" is required","XTDE0050",a);if(B(a,"i"))throw c("Parameter "+u+" cannot be empty","XTDE0700",a);0===t.getChildElements(a).length&&(o.value=[])}}if(null===o.value||void 0===o.value){var d=r.newContext(!0);d.tempOutputState="variable",d.currentMode={},d.currentTemplate=null,d.currentComponent=o,d.focus=m.Solo(r.fixed.globalContextItem);try{o.value=i,o.value=U(a,d).expand()}catch(t){throw t instanceof c&&n.QName.fromEQName(u).uri!=J.saxon+"generated-variable"&&(t.isGlobal=!0),t}}}return m.ForArray(o.value)},homCheck:function(e,n){var r=new m.LookAhead(U(e,n)),o=r.peek();if(null===o)return m.Empty;var i=t.isNode(o),a=r.filter(function(n){if(t.isNode(n)!=i)throw c("Cannot mix nodes and atomic values in the result of a path expression","XPTY0018",e);return!0});return i?t.inDocumentOrder(a):a},ifCall:function(e,n){var r,o,i,a,u,s=t.getAttributeAsQName(e,"name",!1);if("schedule-action"==s.local){var f=2==t.getChildElements(e).length,p=4==t.getChildElements(e).length;if(t.getChildElements(e).length>4)throw c("Only attributes @wait, @document and @http-request are available on ixsl:schedule-action in this version of Saxon-JS","SXJS0002",e);r=U(e,n).next().toNumber(),a=f?null:R(e,n).next(),u=p?K(t.getChildElements(e)[3],n).next():null;var h=null;(o=n.newContext(!0)).clearGrouping();var g=t.getChildElements(e)[f?1:2],v=Q(g,n,"template"),y=v.actor;if(null===u&&(n.noCurrentFocus()||(o.focus=new m.Tracker(new m.Singleton(n.getCurrentFocus())),o.focus.next()),o.currentMergeGroup=null,o.currentComponent=v,o.tempOutputState=!1,et(v.actor,o),A(g,n,o)),i=function(){U(y,o).expand()},null!==u){h=SaxonJS.getPlatform().makeHttpRequest(u,function(t){o.focus=new m.Tracker(new m.Singleton(t)),o.focus.next(),o.currentMergeGroup=null,o.currentComponent=v,o.tempOutputState=!1,et(v.actor,o),A(g,n,o),i()},r)}else if(null!==a){var S=a.toString().split(" "),x=S.map(function(t){return SaxonJS.getPlatform().resolveUri(t,l.staticBaseUri(e,n))}),N=SaxonJS.getPlatform().addMultipleXml(x,n.fixed.documentPool,i,r);h=1===S.length?N[x[0]]:N}else 0!==r&&setTimeout(i,r);return h?m.Singleton(h):m.Empty}var b=t.getChildElements(e).map(function(t,e){return K(t,n)});return d(s.uri,s.local,b,n,e)},indexedFilter:function(t,e){var n=e.newContext(!1);n.focus=m.Tracker(U(t,e));var r=H(t);return n.focus.filter(function(){return E(r(n))})},indexedFilter2:function(t,e){var n=X(t,"base"),o=X(t,"use"),i=X(t,"search"),a=r.allocateCodedComparer(t.comp,e),u=e.newContext(!1);u.focus=m.Tracker(K(n,e));var s=K(i,e).expand();return u.focus.filter(function(){var t=K(o,u);return r.gc(t,s,"=",a).next().toBoolean()})},indexedLookup:function(t,e){return r.generalComparison(t,e,"=")},inlineFn:function(t){P("inline function",t)},instance:function(t,e){var n={"*":{min:0,max:1/0},"+":{min:1,max:1/0},"?":{min:0,max:1},"°":{min:0,max:0},1:{min:1,max:1}},r=U(t,e),o=t.getAttribute("of");if("empty-sequence()"==o)return m.oneBoolean(null===r.next());var i=o.charAt(o.length-1),a="*+?°".indexOf(i)>=0,u=n[a?i:"1"];a&&(o=o.substring(0,o.length-1));for(var s,c=new Function("item",t.getAttribute("jsTest")),l=0;null!==(s=r.next());)if(++l>u.max||!c(s))return m.oneBoolean(!1);return m.oneBoolean(l>=u.min)},int:function(t){var e=t.getAttribute("val");return m.Singleton(n.integer.fromString(e))},intersect:function(e,n){var r=U(e,n),o=R(e,n);return m.Intersect(r,o,t.compareDocumentOrder)},intRangeTest:function(e,n){var r=U(e,n),o=t.getChildElements(e),i=K(o[1],n).next(),a=K(o[2],n).next();if(!i||!a)return m.oneBoolean(!1);var u=i.toNumber(),s=a.toNumber(),c=r.some(function(t){var e=t.value;return e>=u&&e<=s});return m.oneBoolean(c)},is:function(e,r){return m.Singleton(F(e,r,function(e,r){return n.boolean.fromBoolean(t.isSameNode(e,r))}))},isLast:function(t,e){return m.oneBoolean(e.focus.position==e.focus.last()==("1"==t.getAttribute("test")))},iterate:function(e,n){t.getChildElements(t.getChildElements(e)[1]).forEach(function(t){K(t,n)});var r=n.newContext(!1);r.focus=m.Tracker(U(e,n)),r.currentTemplate=null;for(var o,i=X(e,"action"),a=X(e,"on-completion"),u=[],s=!1;null!==(o=r.focus.next());){var c=r.newContext(!1);c.focus.current=o;var p=l.evaluate(i,c);if(Array.prototype.push.apply(u,p.expand()),u[u.length-1]instanceof f){var h=u.pop();Array.prototype.push.apply(u,h.content),s=!0;break}r.localVars=c.localVars}return s||null===a||Array.prototype.push.apply(u,l.evaluate(a,r).expand()),m.ForArray(u)},javaCall:function(e,n){var r=t.getAttributeAsQName(e,"name",!1),o=t.getChildElements(e).map(function(t,e){return K(t,n)});return d(r.uri,r.local,o,n,e)},lastOf:function(t,e){var n=m.LookAhead(U(t,e));return n.filter(function(){return null===n.peek()})},let:function(t,e){var n=e.tempOutputState;e.tempOutputState="variable";var r=U(t,e).expand();e.tempOutputState=n;var o=parseInt(t.getAttribute("slot"),10);return e.localVars[o]=r,R(t,e)},literal:S,lookup:function(t,r){for(var o,i=U(t,r),a=[],u=R(t,r).expand(),s=function(r){return function(o){if(!n.integer.matches(o))throw new c("Array lookup key must be of type xs:integer; supplied value is "+e(o),"XPTY0004",t);var i=o.toNumber();if(i<1||i>r.length)throw new c("Array index ("+i+") out of bounds (1 to "+r.length+")","FOAY0001",t);a=a.concat(r[i-1])}},f=function(t){a=a.concat(o.get(t))};null!==(o=i.next());)if(l.isArray(o)){var p=s(o.value);u.forEach(p)}else{if(!l.isMap(o))throw new c("The source for a lookup operator (?) must be of type array() or map(); supplied value is "+e(o),"XPTY0004",t);u.forEach(f)}return m.ForArray(a)},lookupAll:function(t,n){for(var r,o=U(t,n),i=[],a=function(t){i=i.concat(r.get(t))};null!==(r=o.next());)if(l.isArray(r))i=i.concat(r.value);else{if(!l.isMap(r))throw new c("The source for a lookup operator ('?') must be of type array() or map(); supplied value is "+e(r),"XPTY0004",t);r.keys().forEach(a)}return m.ForArray(i)},map:function(e,n){var r=new u,o=null;return t.getChildElements(e).forEach(function(t){null===o?o=K(t,n).next():(r.inSituPut(o,K(t,n).expand()),o=null)}),m.Singleton(r)},merge:function(t,e){return N.merge(t,e)},mergeAdj:function(e,n){for(var r,o,i=[],a=U(e,n),u=!1;null!==(r=a.next());){var s=(o=r)instanceof Node&&o.nodeType==t.TEXT_NODE;s&&""===r.nodeValue||(u&&s?i.push(n.resultDocument.createTextNode(i.pop().nodeValue+r.nodeValue)):(u=s,i.push(r)))}return m.ForArray(i)},message:function(t,e){var n="",r=e.tempOutputState;e.tempOutputState="variable",U(t,e).mapOneToMany(w).forEachItem(function(t){n+=" "+t.toString()});var o=K(X(t,"terminate"),e).next(),i=K(X(t,"error"),e).next();if("yes"==o||"true"==o||"1"==o)throw c("Terminated with "+n,i.toString(),t);if("no"!=o&&"false"!=o&&"0"!=o)throw c("The terminate attribute of xsl:message must be yes|no|true|false|1|0","XTDE0030",t);return e.fixed.options.deliverMessage&&e.fixed.options.deliverMessage(n),e.tempOutputState=r,m.Empty},minus:function(t,e){return U(t,e).mapOneToOne(function(t){return t.negate()})},namespace:function(t,e){var n=U(t,e).next().toString(),r=R(t,e).next().toString();if(""!==n&&!h.isNCName(n))throw c("Prefix "+n+" is not an NCName","XTDE0920",t);if(""===r)throw c("Namespace is zero-length","XTDE0930",t);if("xmlns"==n||"http://www.w3.org/2000/xmlns/"==r)throw c("Disallowed prefix/namespace "+r,"XTDE0835",t);return m.Singleton(new o(n,r))},nextIteration:function(e,n){var r,o=[];t.getChildElements(e,"withParam").forEach(function(t){r=parseInt(t.getAttribute("slot"),10),o[r]=U(t,n).expand()});for(r in o)n.localVars[r]=o[r];return m.Empty},nextMatch:function(t,e){var n=e.currentMode.mode;if(!n)throw c("next-match: no current mode","XTDE0560",t);if(!e.currentTemplate)throw c("next-match: no current template","XTDE0560",t);if(e.noCurrentFocus())throw c("next-match: no context item","XTDE0560",t);var r=e.newContext(!0);return r.currentComponent=e.currentMode,A(t,e,r),n.nextMatch(r)},nodeNum:function(t,e){return y.nodeNum(t,e)},numSeqFmt:function(t,e){return y.numSeqFmt(t,e)},onEmpty:S,onNonEmpty:S,or:function(t,e){return m.oneBoolean(E(U(t,e))||E(R(t,e)))},param:function(e,n){var r=t.getAttributeAsEQName(e,"name"),o=parseInt(e.getAttribute("slot"),10),i=(B(e,"t")?n.tunnelParams:n.localParams)[r];if(!i){var a=X(e,"select");if(!a||B(e,"r"))throw c("Required parameter $"+r+" not supplied","XTDE0700",e);var u=n.tempOutputState;n.tempOutputState="xsl:param",i=K(a,n).expand(),n.tempOutputState=u}if(!Array.isArray(i))throw c("Param value of $"+r+" is not an array","SXJS0004",e);n.localVars[o]=i;var s=X(e,"conversion");if(null!==s)try{n.localVars[o]=K(s,n).expand()}catch(t){throw c("Supplied value for parameter $"+r+" could not be converted to required type","XTTE0590",e)}return m.Empty},precedes:function(e,r){return m.Singleton(F(e,r,function(e,r){return n.boolean.fromBoolean(t.compareDocumentOrder(e,r)<0)}))},procInst:function(t,e){var n=U(t,e).next().value,r=R(t,e),o=e.resultDocument.createProcessingInstruction(n,Z(r).replace(/\?>/g,"? >").replace(/^\s+/,""));return m.Singleton(o)},qName:function(t){var e=t.getAttribute("pre"),r=t.getAttribute("uri"),o=t.getAttribute("loc");return m.Singleton(n.QName.fromParts(e,r,o))},range:function(t){return C(n.integer.fromString(t.getAttribute("from")),n.integer.fromString(t.getAttribute("to")))},resultDoc:function(t,e){if(e.tempOutputState)throw c("Cannot call xsl:result-document while evaluating "+e.tempOutputState,"XTDE1480",t);var n=X(t,"href"),r=null===n?"":K(n,e).next().toString(),o=!1,i=!1;t.getAttribute("local").split(/\r?\n/).forEach(function(t){/^method=/.test(t)&&/interactiveXSLT\}/.test(t)&&((o=/interactiveXSLT\}replace-content$/.test(t))||/interactiveXSLT\}append-content$/.test(t)||(i=t))});var a,u=X(t,"Q{}method");if(u){var l=K(u,e).next().toString(),f=$(u,l,!1);f.uri===J.ixsl&&"replace-content"===f.local?o=!0:f.uri===J.ixsl&&"append-content"===f.local||(i=l)}var p,h,g="#"==r.charAt(0)||"?."==r,d=k(X(t,"content"),e,g);if(""===r)return m.Singleton(d);if(g)return(a="?."===r?e.getCurrentFocus():window.document.getElementById(r.substring(1)))?"?."===r&&a.ownerDocument!==window.document?(O("Result document href="+r+": current node is not in HTML page",1),m.Empty):(i&&O("Result document method not recognized (defaulting to append-content): "+i,1),o&&(a.innerHTML=""),p=d,h=a,s.child(p).forEachItem(function(t){h.appendChild(t)}),window.document._saxonIndexes={},m.Empty):(O("Result document href="+r+": no such node",1),m.Empty);if(e.fixed.resultDocUris[r])throw c("A result document with URI "+r+" has already been created","XTDE1490",t);return e.fixed.resultDocUris[r]=!0,e.fixed.options.deliverResultDocument(r,d),m.Empty},root:function(e,n){if(n.noCurrentFocus())throw c("Focus is absent","XPDY0002",e);var r=n.getCurrentFocus();if(!t.isNode(r))throw c("Context item for '/' must be a node","XPTY0020",e);var o=t.ownerDocument(r);if(o.nodeType!=t.DOCUMENT_NODE&&o.nodeType!=t.DOCUMENT_FRAGMENT_NODE)throw c("Root node for '/' must be a document node","XPDY0050",e);return m.Singleton(t.ownerDocument(r))},sequence:S,slash:function(t,e){var n=e.newContext(!1);n.focus=m.Tracker(U(t,e));var r=H(t);return n.focus.mapOneToMany(function(){return r(n)})},some:function(t,e){var n=parseInt(t.getAttribute("slot"),10),r=U(t,e),o=H(t);return m.oneBoolean(r.some(function(t){return e.localVars[n]=[t],E(o(e))}))},sort:r.sortSequence,str:function(t){var e=t.getAttribute("val");return m.oneString(e)},subscript:function(t,e){var n=U(t,e),r=R(t,e).next().value;if(n instanceof m.ForArray){var o=n.expand()[r-1];return void 0===o&&(o=null),m.Singleton(o)}var i=n.mapOneToOne(function(t,e){return e+1==r?t:null}).next();return m.Singleton(i)},supplied:function(t,e){var n=parseInt(t.getAttribute("slot"),10),r=e.localVars[n];return m.ForArray(r)},switch:function(e,r){var o=r.fixed.options.saxonVersion;o&&"9.7.0"==o.substring(0,5)&&parseInt(o.split(".")[3],10)<15&&function(t,e){throw c("The SEF is out of date, regenerate using Saxon-EE "+t+" or later","SXJS0002",e)}("9.7.0.15",e);var i=U(e,r).next();if(null===i)return m.oneBoolean(!1);i=n.base64Binary.cast(i);for(var a=t.getChildElements(e,"case"),u=0;u<a.length;u++){if(U(a[u],r).next().equals(i))return R(a[u],r)}return K(X(e,"default"),r)},tail:function(t,e){var n=parseInt(t.getAttribute("start"),10)-1;return U(t,e).filter(function(t){return n--<=0})},tailCallLoop:function(t,e){return U(t,e)},to:function(t,e){var n=U(t,e).next(),r=R(t,e).next();return null===n||null===r||n.compareTo(r)>0?m.Empty:C(n,r)},treat:function(t,n){var r=new Function("item",t.getAttribute("jsTest"));return U(t,n).mapOneToOne(function(n){if(r(n))return n;var o=x(t.getAttribute("diag"));throw c("Required item type of "+o.required+" is "+t.getAttribute("as")+"; supplied value is "+e(n),o.code,t)})},true:function(){return m.oneBoolean(!0)},try:function(e,r){try{return m.ForArray(U(e,r).expand())}catch(u){if(u instanceof c&&!u.isGlobal){r.currentError=u,null===u.compiledLineNr&&u.setExpr(e);for(var o,i=n.QName.fromParts("","http://www.w3.org/2005/xqt-errors",u.code),a=m.ForArray(t.getChildElements(e,"catch"));null!==(o=a.next());){if(new Function("q","return "+o.getAttribute("test")+";")(i))return U(o,r)}throw u}throw u instanceof c?u:(Error.dumpStack&&Error.dumpStack(),u)}},ufCall:function(e,n){var r=Q(e,n,"function"),o=r.actor,i=t.getChildElements(e),a=n.newContext(!0);return a.currentComponent=r,a.clearGrouping(),a.tempOutputState="function",a.currentMode={},a.currentTemplate=null,a.focus=null,a.localVars=i.map(function(t){return K(t,n).expand()}),a.localParams={},K(X(o,"body"),a)},union:function(e,n){var r=U(e,n),o=R(e,n);return m.Union(r,o,t.compareDocumentOrder)},useAS:function(t,e){var n=Q(t,e,"attributeSet"),r=n.actor,o=e.newContext(!0);return o.tempOutputState="attribute set",o.currentComponent=n,U(r,o)},valueOf:function(t,e){var n=U(t,e),r=e.resultDocument.createTextNode(Z(n)),o=t.hasAttribute("flags")?t.getAttribute("flags"):"";return m.Singleton(D(r,o))},varRef:function(t,e){var n=parseInt(t.getAttribute("slot"),10),r=e.localVars[n];return m.ForArray(r)},vc:function(t,e){function o(t){return null===t?null:n.untypedAtomic.matches(t)?n.string.cast(t):t}var i=t.getAttribute("op"),a=t.getAttribute("onEmpty"),u=U(t,e),s=R(t,e),l=o(u.next()),f=o(s.next());if(null===l||null===f)return a?m.oneBoolean("1"==a):m.Empty;if(null!==u.next()||null!==s.next())throw c("Value comparison only applicable to single values","XPTY0004",t);if(n.isSubtype(l.type,"numeric")&&isNaN(l.value)||n.isSubtype(f.type,"numeric")&&isNaN(f.value))return m.oneBoolean("ne"==i);var p=r.allocateCodedComparer(t.getAttribute("comp"),e);return"="==i||"eq"==i||"!="==i||"ne"==i?m.oneBoolean(r.testEquality(i,p.equals(l,f))):m.oneBoolean(r.testComparison(i,p.compare(l,f)))},xslNumber:function(t,e){return y.xslNumber(t,e)}};function S(e,n){var r=t.getChildElements(e);return m.Block(r,n)}function x(t){var e=t.split("|"),n=e[0],r=e[1],o=""===e[2]?"XPTY0004":e[2],i=e[3],a=["ancestor","ancestor-or-self","attribute","child","descendant","descendant-or-self","following","following-sibling","namespace","parent","preceding","preceding-sibling","self","preceding-or-ancestor"],u=function(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}};return{required:function(){switch(parseInt(n,10)){case 0:return u(+r+1)+" argument of "+(""===i?"anonymous function":i+"()");case 1:return u(+r+1)+" operand of '"+i+"'";case 9:return"operand of '-'";case 2:return"value in '"+i+"' expression";case 3:return"saxon:context-item"==i?"context item":"value of variable $"+i;case 4:var t=i.split("/");return"@"+t[1]+" attribute of "+("LRE"==t[0]?"a literal result element":t[0]);case 5:return"result of call to "+(""===i?"anonymous function":"function "+i);case 7:return"result of template "+i;case 6:return u(+r+1)+" sort key";case 8:return"value of parameter $"+i;case 11:return"value of the grouping key";case 12:return"result of evaluate()";case 13:return"the context item";case 14:return"the context item for the "+a[r]+" axis";case 15:return"the value of the "+i+" option";case 17:return"document-order sorter";default:return""}}(),code:o}}function b(t,e,r,o,i){if(!r.match(/^[smijxq]*$/))throw c("Illegal flags for regular expression: "+r,"FORX0001");var a=h.prepareRegex(e,r+"g",t);if(!o&&a.test(""))throw c("Regular expression matches zero-length string","FORX0003");for(var u,s=[],l=0,f=0;null!==(u=a.exec(t));)if((u.index>l||u.index==l&&i)&&s.push({matching:!1,string:n.string.fromString(t.substring(l,u.index))}),s.push({matching:!0,groups:u,string:n.string.fromString(u[0])}),l=a.lastIndex,0===u[0].length&&a.lastIndex++,f++>1e3)throw c("looping???","SXJS0004");return t.length>l&&s.push({matching:!1,string:n.string.fromString(t.substring(l,t.length))}),s}function w(e){if(t.isNode(e))return m.Singleton(T(e));if(rt(e))return m.Join(e.value.map(function(t){return m.ForArray(t)})).mapOneToMany(w);if(ot(e))throw c("Cannot atomize a map","FOTY0013");return m.Singleton(e)}function T(e){var r=n.string.fromString,o=n.untypedAtomic.fromString;switch(e.nodeType){case t.DOCUMENT_NODE:return o(e.documentElement.textContent);case t.DOCUMENT_FRAGMENT_NODE:case t.ELEMENT_NODE:case t.TEXT_NODE:return o(e.textContent||"");case t.ATTRIBUTE_NODE:return o(e.value);case t.COMMENT_NODE:return r(e.textContent);case t.PROCESSING_INSTRUCTION_NODE:return r(e.data);case t.NAMESPACE_NODE:return r(e.uri);default:throw c("Unknown node type "+e.nodeType,"SXJS0003")}}function E(e){var r=e.next();function o(t){throw c("Effective boolean value is not defined for "+t,"FORG0006")}function i(){if(null===e.next())return!0;o("an atomic sequence of length > 1")}if(null===r)return!1;if(t.isNode(r))return!0;if(n.boolean.matches(r))return i()&&r.toBoolean();if(n.numeric.matches(r)){var a=r.toNumber();return i()&&!isNaN(a)&&0!==a}if(n.string.matches(r)||n.untypedAtomic.matches(r)||n.anyURI.matches(r))return i()&&0!==r.toString().length;o("type "+r.type)}function C(t,e){var r=v["i+i"],o=n.integer.fromNumber(1);return m.Stepping(t,function(t){var n=r(t,o);return n.compareTo(e)>0?null:n})}function A(e,n,r){var o=t.getChildElements(e,"withParam"),i=[{},{}];for(var a in n.tunnelParams)n.tunnelParams.hasOwnProperty(a)&&(i[1][a]=n.tunnelParams[a]);var u=n.tempOutputState;n.tempOutputState="template parameter",o.forEach(function(e){var r=t.getAttributeAsEQName(e,"name"),o=B(e,"t")?1:0;i[o][r]=U(e,n).expand()}),n.tempOutputState=u,r.localParams=i[0],r.tunnelParams=i[1]}function D(t,e){return e&&e.indexOf("l")>=0&&(t._saxonIsLocal=!0),t}function _(t,e,r){var o,i,a="compAtt"==t.tagName,u=h.trim(K(X(t,"name"),e).next().toString()),s=X(t,"namespace");if(null===s){if(a&&"xmlns"==u)throw c("Attribute must not be named xmlns","XTDE0855",t);try{i=$(t,u,!a)}catch(e){if(e instanceof c){if("XTDE0290"===e.code)throw new c((a?"Attribute":"Element")+" name '"+u+"' has an unbound prefix",a?"XTDE0860":"XTDE0830",t);"FORG0001"===e.code&&function(){throw new c((a?"Attribute":"Element")+" name '"+u+"' is not a lexical QName",a?"XTDE0850":"XTDE0820",t)}()}throw e}o=i.uri}else if(o=K(s,e).next().value,a)if(""===o&&u.includes(":"))u=u.replace(/^.*:/,""),i=n.QName.fromParts("",o,u);else if(u.includes(":")){var l=u.split(":");if(""===l[0]||""===l[1])throw c((a?"Attribute":"Element")+" name '"+u+"' is not a lexical QName",a?"XTDE0850":"XTDE0820",t);i=n.QName.fromParts(l[0],o,l[1])}else i=n.QName.fromParts("",o,u);if("http://www.w3.org/2000/xmlns/"===o)throw new c("Disallowed namespace "+o,a?"XTDE0865":"XTDE0835",t);return a?m.Singleton(r(i)):m.Singleton(r(o,u))}function F(t,e,n){var r=U(t,e).next(),o=R(t,e).next();return null===r||null===o?null:n(r,o)}function M(t){if("xs:"==t.substring(0,3)){var e=n[t.substring(3)];if(!e)throw c("Unimplemented type "+t,"SXJS0002");return e}throw c("Unknown type "+t,"SXJS0003")}function I(e,n){if(null!==n.fixed.staticBaseURI)return n.fixed.staticBaseURI;for(var r=e;;){if(r.hasAttribute("baseUri"))return r.getAttribute("baseUri");if(null===(r=t.xdmParentNode(r))||r.nodeType!=t.ELEMENT_NODE)return null}}function k(e,n,r){var o=n.resultDocument.createDocumentFragment(),i=t.obtainDocumentNumber(o);i._saxonBaseUri=I(e,n);var a=n.newContext(!1);return r&&(a.resultDocument=window.document),tt(i,K(e,a),a),i}function P(t,e){throw c("The "+t+" construct is not implemented in Saxon-JS","SXJS0002",e)}function U(e,n){var r=t.getChildElements(e)[0];if(!r)throw c("Expr has no children","SXJS0004",e);return K(r,n)}function R(e,n){return K(t.getChildElements(e)[1],n)}function X(e,n){var r,o=e.childNodes;for(r=0;r<o.length;r++){var i=o[r];if(i.nodeType==t.ELEMENT_NODE&&i.getAttribute("role")==n)return i}return null}function B(t,e){return t.hasAttribute("flags")&&t.getAttribute("flags").indexOf(e)>=0}var J={xsl:"http://www.w3.org/1999/XSL/Transform",fn:"http://www.w3.org/2005/xpath-functions",math:"http://www.w3.org/2005/xpath-functions/math",map:"http://www.w3.org/2005/xpath-functions/map",array:"http://www.w3.org/2005/xpath-functions/array",xml:"http://www.w3.org/XML/1998/namespace",xs:"http://www.w3.org/2001/XMLSchema",xsi:"http://www.w3.org/2001/XMLSchema-instance",ixsl:"http://saxonica.com/ns/interactiveXSLT",js:"http://saxonica.com/ns/globalJS",saxon:"http://saxon.sf.net/"};function L(e){var n={},r=t.getInheritedAttribute(e,"ns");if(null!==r)for(var o=r.split(" "),i=0;i<o.length;i++){var a=o[i].split("=");"~"==a[1]?n[a[0]]=J[a[0]]:n[a[0]]=a[1]}return n}function z(t,e){var n=L(t);return function(t){if(""===t&&!e)return"";var r=n[t];if(r)return r;if(""===t)return"";throw c("Undeclared prefix: "+t,"XTDE0290")}}function $(t,e,r){return n.QName.fromString(e,z(t,r))}function q(e,n,r){if(null!==e&&r>0){var o=t.getAttribute(e,n);return null!==o&&""!==o?o:q(e.parentNode,n,r-1)}}function G(t){throw Error.dumpStack&&Error.dumpStack(),c("Internal error: "+t,"SXJS0004")}function Q(t,e,n){var r,o,i=t.getAttribute("bSlot");if(i?(i=parseInt(i),o=e.currentComponent.bindings[i],r=e.fixed.components[o]):(o=t.getAttribute("coId"))?r=e.fixed.components[parseInt(o)]:G("No binding slot or component Id for component"),r||G("Target component not found"),"ABSENT"===r.visibility)throw c("Cannot invoke absent component "+r.actor.tagName+" "+r.actor.getAttribute("name"),"XTDE3052");return n&&r.actor.tagName!=n&&G("Expected "+n+", found "+r.actor.tagName),r}var K=function(n,r){return 10==SaxonJS.getLogLevel()?function(n,r){r||G("No context supplied!");V++,j.length<V&&(j+=j);var o=n.hasAttribute("name")?" name='"+n.getAttribute("name")+"'":"";O(j.substring(0,V)+"<"+n.tagName+" line='"+t.getInheritedAttribute(n,"line")+"'"+o+" focus='"+(r.noCurrentFocus()?"absent":e(r.getCurrentFocus()))+"'>");var i=Y(n,r);"object"==typeof i&&"next"in i||G("Result of "+n.tagName+" is not an iterator");return O(j.substring(0,V)+"</"+n.tagName+">"),V--,i}(n,r):Y(n,r)},V=0,j="                       ";function Y(t,e){var n=p[t.tagName];n||G("Unknown expr: "+t.tagName);try{return n(t,e)}catch(n){throw n instanceof c?(e.currentError=n,null===n.compiledLineNr&&null===n.xsltLineNr&&(n.setExpr(t),n.xsltLineNr),n):n}}function H(e){return n=t.getChildElements(e)[1],(r=p[n.tagName])||G("Unknown expr: "+n.tagName),function(t){try{return r(n,t)}catch(e){throw e instanceof c&&(t.currentError=e,null===e.compiledLineNr&&e.setExpr(n)),e}};var n,r}function W(t,e){if(n[e].matches(t))return t;if(r=t,o=e,n.decimal.matches(r)?"decimal"!=o&&"float"!=o&&"double"!=o:!n.float.matches(r)||"float"!=o&&"double"!=o)throw c("Incompatible operands: "+t.type+" and "+e,"XPTY0004");return n[e].cast(t);var r,o}function Z(t){var e="";return t.forEachItem(function(t){""!==e&&(e+=" "),e+=t.toString()}),e}function tt(n,r,i){i||G("No context in makeComplexContent for "+e(n));var a=!1,u=!1;function l(e,r){function i(t){return t instanceof o?"a namespace":"an attribute"}if(r)throw c("Cannot create "+i(e)+" node after creating children","XTDE0410");if(n.nodeType==t.DOCUMENT_FRAGMENT_NODE||n.nodeType==t.DOCUMENT_NODE)throw c("Cannot add "+i(e)+" to a document node","XTDE0410")}r.forEachItem(function(e){!function e(n,r){var o=!!r._saxonIsLocal&&r._saxonIsLocal,f=!1;if(rt(r))r.value.forEach(function(t){t.forEach(function(t){e(n,t)})});else{if(ot(r))throw c("A map can't be a child of an XML node","XPTY0004");if(t.isNode(r)?(u=!1,f=r.nodeType==t.TEXT_NODE):(r=i.resultDocument.createTextNode((u?" ":"")+r.toString()),u=!0),n.nodeType==t.ELEMENT_NODE||n.nodeType==t.DOCUMENT_FRAGMENT_NODE)if(t.isNSNode(r))if(SaxonJS.getPlatform().inBrowser&&n instanceof HTMLElement)n.appendChild(n.ownerDocument.importNode(r,!0));else{if(l(r,a),r.prefix==n.prefix&&r.uri!=n.namespaceURI)throw c("Saxon-JS restriction: namespace nodes in content clash with the element prefix","SXJS0002");if(""===r.prefix){if(""===n.namespaceURI)throw c("Cannot add a default namespace to a no-namespace element","XTDE0440");if(n.hasAttributeNS("","xmlns")){if(n.getAttributeNS("","xmlns")!=r.uri)throw c("Cannot have two different default namespaces","XTDE0430")}else SaxonJS.getPlatform().inBrowser&&n instanceof HTMLElement||n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",r.uri)}else{var m="http://www.w3.org/2000/xmlns/",p="xmlns:"+r.prefix,h=r.uri;if("~"==r.uri&&void 0!==J[r.prefix]&&(h=J[r.prefix]),n.hasAttributeNS(m,r.prefix)&&n.getAttributeNS(m,r.prefix)!=h)throw c("Cannot have two namespaces with the same prefix '"+r.prefix+"'","XTDE0430");n.setAttributeNS(m,p,h)}}else if(r.nodeType==t.ATTRIBUTE_NODE){if(l(r,a),""!==r.namespaceURI){var g=r.name.split(":");if(2!=g.length||n.lookupNamespaceURI(g[0])!=r.namespaceURI)if(2==g.length&&null===n.lookupNamespaceURI(g[0]))n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+g[0],r.namespaceURI);else for(var d=2==g.length?g[0]:"ns";;){if(null===n.lookupNamespaceURI(d)){n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+d,r.namespaceURI),r.name=d+":"+g[g.length-1];break}d+="_1"}}var v=""===r.namespaceURI?null:r.namespaceURI;n.setAttributeNS(v,r.name,r.value)}else if(r.nodeType==t.TEXT_NODE){if(r.nodeValue&&""!==r.nodeValue){var y=n.lastChild;y&&y.nodeType==t.TEXT_NODE?y.nodeValue=y.nodeValue+r.nodeValue:n.appendChild(t.copyItem(r,i,""))}f}else if(r.nodeType==t.DOCUMENT_NODE||r.nodeType==t.DOCUMENT_FRAGMENT_NODE)s.child(r).forEachItem(function(t){e(n,t)});else{if(a=!0,!(SaxonJS.getPlatform().inBrowser&&i.resultDocument==window.document||r.nodeType!=t.ELEMENT_NODE||SaxonJS.getPlatform().inBrowser&&r instanceof HTMLElement)){var S=r.prefix||"",x=r.lookupNamespaceURI(S)||"",N=r.namespaceURI||"";x!==N&&t.declareNS(r,S,N),!r.lookupNamespaceURI(null)&&n.lookupNamespaceURI(null)&&t.declareNS(r,"","")}(!o||SaxonJS.getPlatform().inBrowser&&n instanceof HTMLElement!=r instanceof HTMLElement)&&(r=t.copyItem(r,i,"c")),n.appendChild(r),r._saxonIsLocal=!1}else{if(n.nodeType!=t.DOCUMENT_NODE)throw c("Unknown parent node type "+n.nodeType,"SXJS0003");null!==r&&(n.documentElement=r)}}}(n,e)})}function et(t,e){function n(e){return"Context item for template "+t.getAttribute("name")+" must be "+e}if(e.noCurrentFocus()&&-1==t.getAttribute("flags").indexOf("o"))throw c(n("supplied"),"XTTE3090",t);e.noCurrentFocus()||-1!=t.getAttribute("flags").indexOf("s")||(e.focus={});var r=t.getAttribute("jsTest");if(r&&!e.noCurrentFocus()&&!new Function("item",r)(e.getCurrentFocus()))throw c(n("instance of "+t.getAttribute("cxt")),"XTTE0590",t)}function nt(t){this.value=t}function rt(t){return t instanceof nt}function ot(t){return t instanceof u||t instanceof it}function it(t){this.value=t}function at(t){this.value=t}function ut(t,e,r){if(n.anyAtomicType.matches(t))return t;switch(typeof t){case"undefined":return[];case"string":return n.string.fromString(t);case"number":return n.double.fromNumber(t);case"boolean":return n.boolean.fromBoolean(t);case"function":return new it(t);case"object":if(a.isNode(t))return t;if(t instanceof Date)return n.dateTime.fromString(t.toISOString());if(Array.isArray(t)){var o=[];return e?(t.forEach(function(t){var e=ut(t,!0,r),n=Array.isArray(e)?e:[e];o.push(n)}),new l.XdmArray(o)):(t.forEach(function(t){o.push(ut(t,!0,r))}),o)}return null===t?[]:t instanceof at?t.value:r?function(t,e){var n=new u;for(var r in t)if(t.hasOwnProperty(r)){var o=ut(t[r],e,!0);n.inSituPut(ut(r,e,!0),Array.isArray(o)?o:[o])}return n}(t,e):new it(t);default:return t}}function st(e,r,o){if(null===e)return null;if(r&&n.anyAtomicType.matches(e))return e;if(n.string.matches(e)||n.anyURI.matches(e)||n.duration.matches(e)||n.hexBinary.matches(e)||n.base64Binary.matches(e)||n.untypedAtomic.matches(e))return e.toString();if(n.numeric.matches(e))return e.toNumber();if(n.boolean.matches(e))return e.toBoolean();if(n.dateTime.matches(e)||n.date.matches(e)||n.dateTimeStamp.matches(e))return e.toString();if(n.time.matches(e)||n.gYearMonth.matches(e)||n.gYear.matches(e)||n.gMonthDay.matches(e)||n.gMonth.matches(e)||n.gDay.matches(e))return e.toString();if(n.QName.matches(e))return e.toEQName();var i;if(t.isNode(e))return e;if(e instanceof l.XdmArray)return i=[],0===e.value.length||e.value.forEach(function(t){i.push(st(t,r,o))}),i;if(Array.isArray(e))return i=[],0===e.length?null:1==e.length?st(e[0],r,o):(e.forEach(function(t){i.push(st(t,r,o))}),i);if(e instanceof u){if(o){var a={};return e.forAllPairs(function(t){a[t.k.toString()]=st(t.v,r,o)}),a}return new at(e)}return e instanceof it?e.value:new at(e)}function ct(t){return t.mapOneToMany(function(t){return rt(t)?m.Join(t.value.map(function(t){return ct(m.ForArray(t))})):m.Singleton(t)})}return nt.prototype={value:[],get:function(t){if("number"!=typeof t)throw c("Array subscript is not numeric","XPTY0004");if(t<1||t>=this.value.length)throw c("Array index ("+t+") out of bounds (1 to "+this.value.length+")","FOAY0001");return this.value[t-1]}},it.prototype={value:null,containsKey:function(t){return void 0!==this.value[t]},get:function(t){var e=ut(this.value[t]);return Array.isArray(e)?e:[e]},inSituPut:function(t,e){throw c("inSituPut() not allowed for JSValue","SXJS0005")},put:function(t,e){throw c("put() not allowed for JSValue","SXJS0005")},remove:function(t){throw c("remove() not allowed for JSValue","SXJS0005")},keys:function(){throw c("keys() not allowed for JSValue","SXJS0005")},forAllPairs:function(t){throw c("forEach() not allowed for JSValue","SXJS0005")},conforms:function(t,e,n){throw c("conforms() not allowed for JSValue","SXJS0005")}},at.prototype={value:null},{analyze:b,argRole:X,atomize:w,checkTemplateFocus:et,codepointsToString:function(t){var e="";return t.forEach(function(t){return function(t){if(t<1||t>55295&&t<57344||t>65533&&t<65536||t>1114111)throw c("Invalid XML character 0x"+t.toString(16),"FOCH0001")}(t),e+=t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10))+String.fromCharCode(56320+(t-65536&1023))}),e},convertFromJS:ut,convertToJS:st,declaringPackage:function(t,e){for(var n=t.parentNode;"package"!=n.tagName;)n=n.parentNode;return e.fixed.packages[n.getAttribute("name")]},ebv:E,evalChild1:U,evalChild2:R,evaluate:K,evaluateIfPresent:function(t,e){return null===t?m.Empty:K(t,e)},flatten:ct,getSourceLoc:function(t){if(void 0!==t)return q(t,"module",20)+"#"+q(t,"line",10)},hasFlag:B,internalError:G,isArray:rt,isAstral:function(t){for(var e=0;e<t.length;e++){var n=t.charCodeAt(e);if(n>=55296&&n<=56319)return!0}return!1},isMap:ot,JSValue:it,makeComplexContent:tt,markLocal:D,notImplemented:P,promote:W,roleDiagnostic:x,serialize:function(r,o){var i=o?o instanceof m.AnyIterator?o.next():o:{},a={};i instanceof u?i.forAllPairs(function(t){a[t.k.toString()]=st(t.v)}):a=i;var s="json"==a.method,l=s?a:{"saxon:line-length":80,"saxon:indent-spaces":3,indent:"  "};if(!s)for(var f in a)l[f]=a[f];function p(r){if(void 0===r)return"undefined";if(rt(r)){var o="[";return r.value.forEach(function(t){"["!=o&&(o+=","),o+=h(t)}),o+"]"}if(r instanceof u){var i="map{";return r.forAllPairs(function(t){"map{"!=i&&(i+=",\n"),i+=p(t.k)+":",i+=h(t.v)}),i+"}"}return t.isNode(r)?t.xmlToString(r,l):n.string.matches(r)||n.untypedAtomic.matches(r)?'"'+r.toString().replace(/""/g,'"').replace(/''/g,"'")+'"':n.integer.matches(r)||n.numeric.matches(r)||n.boolean.matches(r)?r.toString():r instanceof m.Singleton?p(r.next()):e(r)}function h(t){if(void 0===t)return"(undefined)";if(1==t.length)return p(t[0]);var e="(";return t.forEach(function(t){"("!=e&&(e+=","),e+=p(t)}),e+")"}return"json"==l.method?function(r,o){var i={"allow-duplicate-names":"no","byte-order-mark":"no",encoding:"utf-8",indent:"no","normalization-form":"none","json-node-output-method":"xml"};for(var a in o)i[a]=o[a];if(!0!==i.indent&&!1!==i.indent&&"yes"!=i.indent&&"no"!=i.indent)throw c("Serialize indent option wrong type","XPTY0004");function s(r,o){if(0===r.length)return"null";if(1===r.length)return function r(o,i){if(rt(o)){var a="[";return o.value.forEach(function(t){"["!=a&&(a+=","),a+=s(t,i)}),a+"]"}if(o instanceof u){var f="{",p={};return o.forAllPairs(function(t){"{"!=f&&(f+=",\n");var e=r(n.string.cast(t.k),i);if("no"==i["allow-duplicate-names"]){if(1==p[e])throw c("Duplicate keys in serialized JSON map","SERE0022");p[e]=1}f+=e+":",f+=s(t.v,i)}),f+"}"}if(t.isNode(o))return l(t.xmlToString(o,{method:"xml","omit-xml-declaration":"yes"}));if(n.integer.matches(o)||n.numeric.matches(o)){if(isNaN(o.value)||!isFinite(o.value))throw c("Cannot serialize numeric (to JSON): "+e(o),"SERE0020");return o.toString()}if(n.boolean.matches(o))return o.toString();if(n.anyAtomicType.matches(o))return l(o);if(o instanceof m.Singleton)return r(o.next(),i);throw c("Cannot serialize item (to JSON): "+e(o),"SERE0021")}(r[0],o);throw c("Cannot serialize (to JSON) a sequence of length greater than one","SERE0023")}function l(t){return JSON.stringify(t.toString()).replace(/\//g,"\\/")}return s(r.expand(),i)}(r,l):h(r.expand())},staticBaseUri:I,stringToCodepoints:function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);e.push(r>=55296&&r<=56319?1024*(r-55296)+(t.charCodeAt(++n)-56320)+65536:r)}return e},stylesheetResolver:z,untypedToDouble:function(t){return"untypedAtomic"===t.type?n.double.cast(t):t},wsCollapse:function(t){return t.replace(/[ \n\r\t]+/g," ").replace(/^[ ]|[ ]$/g,"")},XdmArray:nt,XDMValue:at,KNOWN_URI:J}}(),f=function(){"use strict";function t(t,e){return t.prec==e.prec?t.prio==e.prio?t.seq-e.seq:t.prio-e.prio:t.prec-e.prec}function r(t,e){return t.prec==e.prec?t.prio==e.prio?0:t.prio-e.prio:t.prec-e.prec}var o={TC:function(t,e,r){if(!a.isNode(t))return n.anyAtomicType.matches(t)?m.Singleton(r.resultDocument.createTextNode(t.toString())):m.Singleton(t);switch(t.nodeType){case a.DOCUMENT_NODE:case a.DOCUMENT_FRAGMENT_NODE:case a.ELEMENT_NODE:var o=r.newContext(!1);return o.focus=m.Tracker(s.child(t)),e.applyTemplates(o);case a.TEXT_NODE:case a.CDATA_SECTION:return m.Singleton(a.copyItem(t,r));case a.ATTRIBUTE_NODE:return m.Singleton(r.resultDocument.createTextNode(t.value));default:return m.Empty}},SC:function(t,e,n){return a.shallowCopy(t,n,"c",function(n){var r=n.newContext(!1),o=[];return o[0]=m.Tracker(s.attribute(t)),o[1]=m.Tracker(s.child(t)),r.focus=m.Join(o),e.applyTemplates(r)})},DC:function(t,e,n){return m.Singleton(a.copyItem(t,n,"c"))},DS:function(t,e,n){return m.Empty},SS:function(t,e,n){if(!a.isNode(t))return m.Singleton(t);switch(t.nodeType){case a.DOCUMENT_NODE:case a.DOCUMENT_FRAGMENT_NODE:case a.ELEMENT_NODE:var r=n.newContext(!1),o=[];return o[0]=m.Tracker(s.attribute(t)),o[1]=m.Tracker(s.child(t)),r.focus=m.Join(o),e.applyTemplates(r);default:return m.Empty}},bubble:function(t,e,n){if(!a.isNode(t))return m.Singleton(t);switch(t.nodeType){case a.ELEMENT_NODE:var r=n.newContext(!1);return r.focus=m.Tracker(s.parent(t)),e.applyTemplates(r);default:return m.Empty}}};function i(t){return p(l.argRole(t,"match"))}function u(e){this._expr=e,this.onNoMatch=e.getAttribute("onNo"),this.mustBeTyped=l.hasFlag(e,"t"),l.hasFlag(e,"F")&&(this.failOnMultipleMatch=!0),this._rules=a.getChildElements(e).map(function(t){return{rule:t,prec:parseInt(t.getAttribute("prec"),10),prio:parseFloat(t.getAttribute("prio")),seq:parseInt(t.getAttribute("seq"),10),minImp:parseInt(t.getAttribute("minImp"),10),pattern:i(t),action:l.argRole(t,"action")}}).sort(t).reverse()}return o.TO=o.TC,u.prototype={_expr:null,_rules:null,onNoMatch:"TC",mustBeTyped:!1,failOnMultipleMatch:!1,applyTemplates:function(t){var e=this;return t.focus.mapOneToMany(function(n){return e._processItem(n,t)})},applyImports:function(t){var e=t.currentTemplate;if(!e)throw c("No current template rule","XTDE0560");return this._processItem(t.getCurrentFocus(),t,function(t){return t.prec>=e.minImp&&t.prec<e.prec})},nextMatch:function(e){var n=e.currentTemplate;if(!n)throw c("No current template rule","XTDE0560");return this._processItem(e.getCurrentFocus(),e,function(e){return t(e,n)<0})},findBestRule:function(e,n,o){var i=this._rules,a=null;return this.failOnMultipleMatch?i.forEach(function(t){if((!o||o(t))&&(!a||r(t,a)>=0)){var i=!1;try{i=t.pattern(e,n)}catch(t){}if(i){if(null!==a&&0===r(t,a)){var u="Multiple templates matched item:";throw u+=l.serialize(m.Singleton(e)),u+="\n    "+a.rule.getAttribute("module"),c(u+="\nand "+t.rule.getAttribute("module"),"XTDE0540")}a=t}}}):i.forEach(function(r){if((!o||o(r))&&(!a||t(r,a)>0)){var i=!1;try{i=r.pattern(e,n)}catch(t){}i&&(a=r)}}),a},isNonDOMmode:function(t){return null!==this.findBestRule(l.JSValue(window),t)},_processItem:function(t,n,r){var i,u=this.findBestRule(t,n,r);if(null!==u)return l.checkTemplateFocus(u.rule,n),n.currentTemplate=u,n.currentMode=n.currentComponent,l.evaluate(u.action,n);var s=a.getAttribute(this._expr,"name");i=null!==s&&s.split("}")[0]=="Q{"+l.KNOWN_URI.ixsl?"bubble":this.onNoMatch.split("+")[0];var f=o[i];if(f)return f(t,this,n);throw c("No matching template rule for "+e(t)+" onNoMatch = "+this.onNoMatch,"XTDE0555")},printRules:function(){var t="";return this._rules.forEach(function(e){var n;t+=(n=e,JSON.stringify({prec:n.prec,prio:n.prio,seq:n.seq,line:n.line,match:n.pattern}))}),t}},u}(),m=function(){"use strict";function t(){}function e(n){if(!(this instanceof e))return new e(n);t.call(this),this._item=n}t.prototype={filter:function(t){return a(this,t)},mapOneToOne:function(t){return s(this,t)},mapOneToMany:function(t){return new u(this,t)},forEachItem:function(t){for(var e;null!==(e=this.next());)t(e)},some:function(t){for(var e;null!==(e=this.next());)if(t(e))return!0;return!1},every:function(t){for(var e;null!==(e=this.next());)if(!t(e))return!1;return!0},count:function(){var t=0;return this.forEachItem(function(){t++}),t},expand:function(){var t=[];return this.forEachItem(function(e){t.push(e)}),t}},e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._item=null,e.prototype.next=function(){var t=this._item;return this._item=null,t},e.prototype.peek=function(){return this._item},e.prototype.expand=function(){return null===this._item?[]:[this._item]};var r={next:function(){return null},peek:function(){return null},expand:function(){return[]},count:function(){return 0},filter:function(){return r},mapOneToOne:function(){return r},mapOneToMany:function(){return r},forEachItem:function(){},some:function(){return!1}};function i(e){if(!(this instanceof i))return new i(e);t.call(this),Array.isArray(e)||l.internalError("ForArray expects array"),this._array=e}function a(e,n){if(!(this instanceof a))return new a(e,n);t.call(this),this._base=e,this._predicate=n,n||l.internalError("Filter iterator undefined predicate")}function u(e,n){if(!(this instanceof u))return new u(e,n);t.call(this),this._base=e,this._mapper=n}function s(e,n){if(!(this instanceof s))return new s(e,n);t.call(this),this._base=e,"object"==typeof e&&"next"in e||l.internalError("Base not an iterator"),this._mapper=n}function c(e,n){if(!(this instanceof c))return new c(e,n);t.call(this),this._next=e,this._step=n}function f(e){if(!(this instanceof f))return new f(e);t.call(this),Array.isArray(e)||l.internalError("Join iterator expects array"),this._iterators=e}function p(e,n,r){if(!(this instanceof p))return new p(e,n,r);t.call(this),this._iter1=m.LookAhead(e),this._iter2=m.LookAhead(n),this._compare=r}function h(e,n,r){if(!(this instanceof h))return new h(e,n,r);t.call(this),this._iter1=m.LookAhead(e),this._iter2=m.LookAhead(n),this._compare=r}function g(e,n,r){if(!(this instanceof g))return new g(e,n,r);t.call(this),this._iter1=m.LookAhead(e),this._iter2=m.LookAhead(n),this._compare=r}function d(e){return"peek"in e?e:this instanceof d?(t.call(this),this._base=e,void(this._nextButOne=e.next())):new d(e)}function v(e){if(!(this instanceof v))return new v(e);t.call(this),this._base=e}function y(e){if(!(this instanceof y))return new y(e);t.call(this),this.current=e}function S(e,n){if(!(this instanceof S))return new S(e,n);t.call(this),Array.isArray(e)||l.internalError("Block iterator expects array"),this._instructions=e,this._currentIterator=null,this._context=n}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype._array=null,i.prototype._index=0,i.prototype.next=function(){return this._index<this._array.length?this._array[this._index++]:null},i.prototype.peek=function(){return this._index<this._array.length?this._array[this._index]:null},i.prototype.expand=function(){return this._array},i.prototype.count=function(){return this._array.length},a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.prototype._base=null,a.prototype._predicate=null,a.prototype.next=function(){for(;;){var t=this._base.next();if(!t)return null;if(this._predicate(t))return t}},u.prototype=Object.create(t.prototype),u.prototype.constructor=u,u.prototype._base=null,u.prototype._mapper=null,u.prototype._currentIter=null,u.prototype.next=function(){for(;;){if(null!==this._currentIter){var t=this._currentIter.next();if(t)return t}var e=this._base.next();if(null===e)return null;this._currentIter=this._mapper(e),this._currentIter&&!this._currentIter.next&&l.internalError("Result of mapper is not an iterator, mapper = "+this._mapper)}},s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype._base=null,s.prototype._mapper=null,s.prototype._position=0,s.prototype.next=function(){for(;;){var t=this._base.next();if(null===t)return null;var e=this._mapper(t,this._position++);if(e)return e}},c.prototype=Object.create(t.prototype),c.prototype.constructor=c,c.prototype._step=null,c.prototype._next=null,c.prototype.next=function(){var t=this._next;return t?(this._next=this._step(t),t):null},c.prototype.peek=function(){return this._next},f.prototype=Object.create(t.prototype),f.prototype.constructor=f,f.prototype._iterators=[],f.prototype.current=null,f.prototype.next=function(){for(;;){if(0===this._iterators.length)return this.current=null,null;var t=this._iterators[0].next();if(null!==t)return this.current=t,t;this._iterators.shift()}},p.prototype=Object.create(t.prototype),p.prototype.constructor=p,p.prototype._iter1=null,p.prototype._iter2=null,p.prototype._compare=null,p.prototype.current=null,p.prototype.next=function(){var t=this._iter1.peek(),e=this._iter2.peek();if(t&&e){var n=this._compare(t,e);return n<0?(this.current=this._iter1.next(),this.current):n>0?(this.current=this._iter2.next(),this.current):(this.current=this._iter1.next(),this._iter2.next(),this.current)}return t?(this.current=this._iter1.next(),this.current):e?(this.current=this._iter2.next(),this.current):(this.current=null,null)},h.prototype=Object.create(t.prototype),h.prototype.constructor=h,h.prototype._iter1=null,h.prototype._iter2=null,h.prototype._compare=null,h.prototype.current=null,h.prototype.next=function(){for(var t=this._iter1.peek(),e=this._iter2.peek();t&&e;){var n=this._compare(t,e);if(n<0)this._iter1.next(),t=this._iter1.peek();else{if(!(n>0))return this.current=this._iter1.next(),this._iter2.next(),this.current;this._iter2.next(),e=this._iter2.peek()}}return this.current=null,null},g.prototype=Object.create(t.prototype),g.prototype.constructor=g,g.prototype._iter1=null,g.prototype._iter2=null,g.prototype._compare=null,g.prototype.current=null,g.prototype.next=function(){for(var t=this._iter1.peek(),e=this._iter2.peek();t&&e;){var n=this._compare(t,e);if(n<0)return this.current=this._iter1.next(),this.current;n>0?(this._iter2.next(),e=this._iter2.peek()):(this._iter1.next(),this._iter2.next(),t=this._iter1.peek(),e=this._iter2.peek())}return t&&!e?(this.current=this._iter1.next(),this.current):(this.current=null,null)},d.prototype=Object.create(t.prototype),d.prototype.constructor=d,d.prototype._base=null,d.prototype.next=function(){var t=this._nextButOne;return t&&(this._nextButOne=this._base.next()),t},d.prototype.peek=function(){return this._nextButOne},v.prototype=Object.create(t.prototype),v.prototype.constructor=v,v.prototype._base=null,v.prototype._last=-1,v.prototype.position=0,v.prototype.current=null,v.prototype.regexGroups=[],v.prototype.next=function(){return this.position++,this.current=this._base.next(),null===this.current&&(this.position=-1),this.current},v.prototype.last=function(){if(this._last<0)if(this._base instanceof i)this._last=this._base.expand().length;else{for(var t,e=[];null!==(t=this._base.next());)e.push(t);this._last=this.position+e.length,this._base=m.ForArray(e)}return this._last},y.prototype=Object.create(t.prototype),y.prototype.constructor=y,y.prototype.position=1,y.prototype.current=null,y.prototype.next=function(){return null},y.prototype.last=function(){return 1},S.prototype=Object.create(t.prototype),S.prototype.constructor=S,S.prototype._instructions=[],S.prototype._currentIterator=null,S.prototype._context=null,S.prototype.current=null,S.prototype.next=function(){for(;;){if(null===this._currentIterator){if(0===this._instructions.length)return this.current=null,null;this._currentIterator=l.evaluate(this._instructions[0],this._context)}var t=this._currentIterator.next();if(null!==t)return this.current=t,t;this._instructions.shift(),this._currentIterator=null}},{Empty:r,Singleton:e,Join:f,Stepping:c,LookAhead:d,Tracker:v,Solo:y,ForArray:i,Union:p,Intersect:h,Difference:g,AnyIterator:t,Block:S,trace:function(t,e,n){for(var r,i=[];null!==(r=e.next());){O(t+": "+("object"==typeof r?r instanceof Node?n?r.toString():r.nodeType+":"+(r.tagName||r.textContent):r instanceof o?"xmlns:"+r.prefix+"="+r.uri:r.toString():typeof r)),i.push(r)}return 0===i.length&&O(t+": <empty>"),m.ForArray(i)},oneString:function(t){return m.Singleton(n.string.fromString(t))},oneInteger:function(t){return m.Singleton(n.integer.fromNumber(t))},oneDouble:function(t){return m.Singleton(n.double.fromNumber(t))},oneFloat:function(t){return m.Singleton(n.float.fromNumber(t))},oneDecimal:function(t){return m.Singleton(n.decimal.fromBig(t))},oneBoolean:function(t){return m.Singleton(n.boolean.fromBoolean(t))}}}(),p=function(t){"use strict";var e={"p.any":function(t){return function(){return!0}},"p.booleanExp":function(t){return function(e,n){var r=n.newContext();return r.focus=m.Solo(e),l.ebv(l.evalChild1(t,r))}},"p.genNode":function(t){var e=a.getChildElements(t)[0];return function(t,n){if(!a.isNode(t))return!1;for(var r,o=s.ancestorOrSelf(t);null!==(r=o.next());){var i=n.newContext(!1);i.focus=m.Solo(r);for(var u,c=l.evaluate(e,i);null!==(u=c.next());)if(a.isSameNode(u,t))return!0}return!1}},"p.genPos":function(t){var e=new Function("item",t.getAttribute("jsTest"));return function(n,r){if(!e(n))return!1;var o=s["preceding-sibling"](r.getCurrentFocus()).filter(e).expand(),i=r.newContext(!1);return i.focus=m.Solo(n),i.focus.position=o.length+1,l.ebv(l.evalChild1(t,i))}},"p.nodeSet":function(t){return function(e,n){for(var r,o=l.evalChild1(t,n);null!==(r=o.next());)if(r==e)return!0;return!1}},"p.nodeTest":function(t){return new Function("item",t.getAttribute("jsTest"))},"p.simPos":function(t){var e=new Function("item",t.getAttribute("jsTest")),n=parseInt(t.getAttribute("pos"),10);return function(t,r){return e(t)&&s.precedingSibling(t).filter(e).count()==n-1}},"p.venn":function(t){var e=a.getChildElements(t),n=p(e[0]),r=p(e[1]),o=t.getAttribute("op");switch(o){case"union":return function(t,e){return n(t,e)||r(t,e)};case"intersect":return function(t,e){return n(t,e)&&r(t,e)};case"except":return function(t,e){return n(t,e)&&!r(t,e)};default:throw c("unknown op "+o,"SXJS0003")}},"p.withCurrent":function(t){var e=p(a.getChildElements(t)[0]);return function(t,n){var r=n.newContext(!0);return r.localVars[0]=[t],e(t,r)}},"p.withPredicate":function(t){var e=a.getChildElements(t),n=p(e[0]),r=e[1];return function(t,e){if(!n(t,e))return!1;var o=e.newContext(!1);return o.focus=m.Solo(t),l.ebv(l.evaluate(r,o))}},"p.withUpper":function(t){var e=a.getChildElements(t),n=p(e[0]),r=p(e[1]),o=t.getAttribute("axis");return"parent"==o?"true"==t.getAttribute("upFirst")?function(t,e){var o=a.xdmParentNode(t);return o&&r(o,e)&&n(t,e)}:function(t,e){var o=a.xdmParentNode(t);return o&&n(t,e)&&r(o,e)}:function(t,e){if(!n(t,e))return!1;for(var i,a=s[o](t);null!==(i=a.next());)if(r(i,e))return!0;return!1}}}[t.tagName];if(e)return e(t);throw c("Unimplemented pattern "+t.tagName,"SXJS0002")},h=function(){"use strict";var t=null,e=!1;try{e=1=="🚀".match(new RegExp(".","gu")).length}catch(t){e=!1}function n(){if(null===t){O("Loading categories.json",2);var e=SaxonJS.getPlatform().readResource("opt/categories.json");t=JSON.parse(e),O("Finished loading categories.json",2)}return t}function r(t,r,o){function i(t,r){function o(t){for(var n=t.toString(16);n.length<4;)n="0"+n;return"\\u"+(e&&n.length>4?"{"+n+"}":n)}function i(t,n,r){r&&(t=function(t){var n=[];0!==t[0]&&(n.push(0),n.push(t[0]-1));for(var r=2;r<t.length;r+=2)n.push(t[r-1]+1),n.push(t[r]-1);var o=t[t.length-1];return(e||o<65535)&&(n.push(o+1),n.push(e?1114111:65535)),n}(t));var i=function(t){for(var n="",r=0;r<t.length;r+=2)(e||t[r+1]<65536)&&(n+=o(t[r]),t[r+1]>t[r]&&(n+="-"+o(t[r+1])));return n}(t);return n||(i="["+i+"]"),i}function c(t,e,n){var r=[];return Array.isArray(t)||s("Ranges must be array"),t.forEach(function(t){r.push(parseInt(t[0],16)),r.push(parseInt(t[1],16))}),i(r,e,n)}var l=t.charAt(r+1);if(a&&"nrt\\|.-^?*+{}()[]pPsSiIcCdDwW$".indexOf(l)<0&&(0!==S||!/[0-9]/.test(l))&&s("\\"+l+" is not allowed in XPath regular expressions"),"p"==l||"P"==l){var f=t.indexOf("}",r),m=t.substring(r+3,f);u("x")&&(m=m.replace(/[ \n\r\t]+/g,""));var d,x=n(),N=x[m];N||s("Unknown category "+m),1==m.length?(d=[],N.split("|").forEach(function(t){d=d.concat(x[t])})):d=N,p+=c(d,S>0,"P"==l),r=f}else"d"==l?(p+=c(n().Nd,S>0,!1),r++):"i"==l?(p+=i(h,S>0,!1),r++):"c"==l?(p+=i(g,S>0,!1),r++):"I"==l?(p+=i(h,S>0,!0),r++):"C"==l?(p+=i(g,S>0,!0),r++):/[0-9]/.test(l)?S>0?s("Numeric escape within charclass"):(v[parseInt(l,10)]||s("No capturing expression #"+l),p+="\\"+l,y<=9&&/[0-9]/.test(t.charAt(r+2))&&(p+="(?:)"),r++):"-"==l?(S>0&&(p+="\\"),p+=l,r++):(p+="\\"+l,r++);return{output:p,i:r}}var a=!0;if(r=r?r.toString():"",!e&&o&&l.isAstral(o))throw new c("Cannot handle non-BMP characters with regular expressions in this browser","SXJS0002");function u(t){return r.indexOf(t)>=0}function s(t){throw new c("Invalid XPath regular expression: "+t,"FORX0002")}var f=(u("i")?"i":"")+(u("m")?"m":"")+(u("g")?"g":"")+(e?"u":"");if(u("j"))return new RegExp(t,r.replace("j",""));if(u("q"))return new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),f);var m,p="",h=[58,58,65,90,95,95,97,122,192,214,216,246,248,767,880,893,895,8191,8204,8205,8304,8591,11264,12271,12289,55295,63744,64975,65008,65533,65536,983039],g=[45,46,48,58,65,90,95,95,97,122,183,183,192,214,216,246,248,893,895,8191,8204,8205,8255,8256,8304,8591,11264,12271,12289,55295,63744,64975,65008,65533,65536,983039],d=[],v=[],y=1,S=0,x=[];for(m=0;m<t.length;m++){var N=t.charAt(m);switch(N){case"[":var b;a&&S>0&&s("Nested square brackets");var w=!1,T=!1;for(b=m+2;b<t.length-3;b++){if(!T&&"-["==t.substring(b,b+2)){var E,C,O=t.substring(m+1,b);for(C=b+2;C<t.length;C++)if("]"==t.charAt(C)&&"\\"!=t.charAt(C-1)){E=t.substring(b+2,C+1);break}"^"==O&&s("Invalid subtraction");var A=t.substring(0,m)+"(?!["+E+")["+O+"]"+t.substring(C+2);t=A,m--,w=!0;break}if(!T&&"]"==t.charAt(b))break;T="\\"==t.charAt(b)&&!T}if(w)break;"]"==t.charAt(m+1)&&s("Character group is empty"),S++,x.push(p.length),p+=N;break;case"]":0===S&&s("Unmatched ']'"),S--,x.pop(),p+=N;break;case"(":if(0===S){var D=!0;m+2<t.length&&"?"===t.charAt(m+1)&&(":"===t.charAt(m+2)||w&&"!"===t.charAt(m+2)?D=!1:s("'(?' must be followed by ':'")),d.push(D?y++:-1)}p+=N;break;case")":if(0===S){0===d.length&&s("Unmatched ')'");var _=d.pop();_>0&&(v[_]=!0)}p+=N;break;case".":0===S&&u("s")?p+="[^]":p+=N;break;case"{":if(a&&","==t.charAt(m+1))throw c("{,x} not allowed in XPath regex dialect","FORX0002");p+=N;break;case" ":case"\n":case"\r":case"\t":(!u("x")||S>0)&&(p+=N);break;case"\\":if(u("q"))p+="\\\\";else{if(!(m+1<t.length))throw c("No character for escape code in XPath regex","FORX0002");u("x")&&/\s/.test(t.charAt(m+1))&&m++;var F=i(t,m);p=F.output,m=F.i}break;default:p+=N}}S>0&&s("Unmatched '['"),0!==d.length&&s("Unmatched '(");try{return new RegExp(p,f)}catch(e){throw/^[imsxjqg]*$/.test(r)?new c("Invalid regular expression /"+t+"/: "+e.message,"FORX0002"):new c("Invalid regex flags: "+r,"FORX0001")}}var o=r("^\\i\\c*$",""),i=r("^\\c+$","");return{obtainCategoryEscapes:n,prepareRegex:r,convertReplacement:function(t,e){if(e=e.toString(),/j/.test(e))return t;if(/q/.test(e))return/\$['`]/.test(t)&&(t=t.replace(/\$'/g,"$$$$'").replace(/\$`/g,"$$$$`")),t.replace(/\$/g,"$$");if(/(^|[^\\])\$([^0-9]|$)/.test(t)||/(^|[^\\])\\([^\\\$]|$)/.test(t))throw new c("Invalid replacement string: "+t,"FORX0004");return t.replace(/\\\\/g,"\\").replace(/\\\$/g,"$$$$").replace(/\$0/g,"$$&")},isNCName:function(t){return o.test(t)&&!/:/.test(t)},isName:function(t){return o.test(t)},isNMTOKEN:function(t){return i.test(t)},isQName:function(t){return o.test(t)&&/^[^:]+(:[^:]+)?$/.test(t)},trim:function(t){return t.replace(/^[ \t\r\n]+|[ \t\r\n]+$/g,"")}}}(),g=function(){"use strict";var t=l,i=a;function f(t,e,n){var r=e.fixed.documentPool[t];if(!r){try{r=n()}catch(t){r=t}e.fixed.documentPool[t]=r}if(r instanceof c)throw r;return r}function g(t,e){if(t.indexOf("#")>=0)throw c("Fragments not supported in external document URIs","FODC0002");return f(t,e,function(){var e=SaxonJS.getPlatform().readFile(t),n=i.obtainDocumentNumber(SaxonJS.getPlatform().parseXmlFromString(e));return n._saxonBaseUri=t,n})}function d(e,n,r){var o=t.staticBaseUri(r,n),i=e[0].next();return null===i?null:SaxonJS.getPlatform().resolveUri(i.toString(),o)}function N(t,e,n){var r;try{r=d(t,e,n)}catch(t){throw c(t.message,"FOUT1170",n)}if(r.match(/#/))throw c("Fragment identifier for unparsed-text"+r.toString(),"FOUT1170",n);var o="";if(t[1]&&"utf-8"!=(o=D(t[1]).toLowerCase())&&"utf-16"!=o)throw c("Unrecognized encoding "+o,"FOUT1190");return null===r?null:f(r,e,function(){try{return SaxonJS.getPlatform().readFile(r,o)}catch(t){throw c("Cannot retrieve unparsed-text "+r.toString(),"FOUT1170",n)}})}function b(t){try{return t(),m.oneBoolean(!0)}catch(t){return m.oneBoolean(!1)}}function w(e,r,o,i){var a=e.next();if(a){var u=h.trim(a.toString());if(i&&h.isNCName(u))return"Q{"+i+"}"+u;var s=n.QName.fromString(u,t.stylesheetResolver(r,!1));if(null===s)throw new c("Invalid QName "+u,o,r);return"Q{"+s.uri+"}"+s.local}return null}function T(t,e){var n=D(t[0]),r="";return l.stringToCodepoints(n).forEach(function(t){var n=l.codepointsToString([t]);r+=e(t,n)?encodeURIComponent(n):n}),m.oneString(r)}function E(t,e){if(2!=e.length&&5!=e.length)throw new c("Wrong number of arguments ("+e.length+") for  "+t,"XPST0017")}function C(t){var e=t[0].next(),r=t[1].next(),o=l.atomize(r.value[0][0]).next();return e instanceof l.XdmArray&&(o=n.numeric.matches(o)?o.toNumber():n.double.cast(o).toNumber()),m.ForArray(e.get(o))}var A={version:"3.0",vendor:"Saxonica","vendor-url":"http://www.saxonica.com/","product-name":"Saxon-JS","product-version":"1.1.0","is-schema-aware":"no","supports-serialization":"no","supports-backwards-compatibility":"yes","supports-namespace-axis":"yes","supports-streaming":"no","supports-dynamic-evaluation":"yes","supports-higher-order-functions":"no","xpath-version":"3.1","xsd-version":"1.1"};function D(t){var e=t.next();return e?e.value:""}function _(e){return t.stringToCodepoints(D(e))}function F(t,e,n){var r=Math.round(e.next().toNumber()),o=n?r+Math.round(n.next().toNumber()):t.length+1;return t.filter(function(t,e){return e+1>=r&&e+1<o})}function M(t,e,n){var r=e;return t.forEachItem(function(t){r=n(t,r)}),r}function I(e){var o="max"==e?function(t){return t>0}:function(t){return t<0};function i(t){throw new c(t,"FORG0006")}return function(a,u,s){var c=a[0];t.hasFlag(s,"i")&&(c=c.filter(function(t){return!r.itemIsNaN(t)}));var l=r.getCollatingFn(s,a[1],"compare",u),f=r.cmpFn(l),p=n.untypedAtomic.matches,h=n.numeric.matches,g=n.double.matches,d=n.float.matches,v=n.anyURI.matches,y=n.string.matches,S=n.duration.matches,x=n.yearMonthDuration.matches,N=n.dayTimeDuration.matches,b=n.QName.matches,w=n.double.cast,T=n.float.cast,E=n.string.cast,C=(c=c.mapOneToOne(function(t){return p(t)?w(t):t})).next();return null===C?m.Empty:(b(C)&&i(e+"() not defined over QName"),!S(C)||x(C)||N(C)||i(e+"() not defined over mixed duations"),m.Singleton(M(c,C,function(t,e){return(y(t)&&h(e)||y(e)&&h(t))&&i("Cannot compare string with numeric"),(x(t)&&!x(e)||N(t)&&!N(e))&&i("Cannot compare mixed duations"),r.itemIsNaN(e)?g(t)?w(e):e:r.itemIsNaN(t)?g(e)?w(t):t:(g(e)&&!y(t)?t=w(t):g(t)&&!y(e)?e=w(e):d(e)&&!y(t)?t=T(t):d(t)&&!y(e)&&(e=T(e)),v(e)&&y(t)?e=E(e):v(t)&&y(e)&&(t=E(t)),o(f(t,e))?t:e)})))}}function k(t,e){var r=t[0].next();if(null===r)return m.Empty;if("timezone"==e)return null===r.timezoneOffset?m.Empty:m.Singleton(n.dayTimeDuration.fromNumberOfMinutes(r.timezoneOffset));if("seconds"==e){var o=r.proxy();return m.oneDecimal(o.getUTCSeconds()+o.getUTCMilliseconds()/1e3)}var i=r.proxy()[e]();return"getUTCMonth"==e&&i++,m.oneInteger(i)}function P(t,e){var n=t[0].next();return null===n?m.Empty:5!=e?m.oneInteger(n.parts()[e]*n.signum()):m.oneDecimal(n.parts()[e]*n.signum())}function U(t,e,r){var o=t[0].next();if(!o)return m.Empty;var i,a=r.fixed.currentDate.getTimezoneOffset();if(t[1]){var u=t[1].next();if(null!==(i=null!==u?u.milliseconds/6e4:null)&&(i<-840||i>840))throw new c("timezone out of bounds "+u,"FODT0003")}else i=-a;var s=o.timezoneOffset;if(null===s&&null===i)return m.Singleton(o);function l(t,r){return m.Singleton(n[e].fromDate(t,r))}return null===s&&null!==i?l(o.adjustByMinutes(-a-i).UTCdate,i):null!==s&&null===i?l(o.adjustByMinutes(a+s).UTCdate,null):null!==s&&null!==i?l(o.UTCdate,i):void 0}return{abs:function(t){var e=t[0].next();return null===e?m.Empty:m.Singleton(e.abs())},"accumulator-after":function(t,e,n){var r=w(t[0],n,"XTDE3340");return m.ForArray(x.accumAfter(r,e.getCurrentFocus(),e))},"accumulator-before":function(t,e,n){var r=w(t[0],n,"XTDE3340");return m.ForArray(x.accumBefore(r,e.getCurrentFocus(),e))},"adjust-date-to-timezone":function(t,e){return U(t,"date",e)},"adjust-dateTime-to-timezone":function(t,e){return U(t,"dateTime",e)},"adjust-time-to-timezone":function(t,e){return U(t,"time",e)},"analyze-string":function(t,e){var n=D(t[0]),r=e.resultDocument.createDocumentFragment(),o=l.KNOWN_URI.fn,i=e.resultDocument.createElementNS(o,"analyze-string-result");if(r.appendChild(i),""===n)return m.Singleton(i);var a=t[1].next().toString(),u=t[2]?t[2].next().toString():"";return l.analyze(n,a,u,!1,!1).forEach(function(t){var n,r;if(t.matching){var a,u=t.groups;n=e.resultDocument.createElementNS(o,"match");var s,c=0;for(s=1;s<u.length;s++)if(u[s]){(a=u[0].indexOf(u[s],c))>c&&(r=e.resultDocument.createTextNode(u[0].substring(c,a)),n.appendChild(r));var l=e.resultDocument.createElementNS(o,"group");l.setAttribute("nr",s);var f=e.resultDocument.createTextNode(u[s]);l.appendChild(f),n.appendChild(l),c=a+u[s].length}c<u[0].length&&(r=e.resultDocument.createTextNode(u[0].substring(c,a)),n.appendChild(r)),i.appendChild(n)}else n=e.resultDocument.createElementNS(o,"non-match"),r=e.resultDocument.createTextNode(t.string),n.appendChild(r),i.appendChild(n)}),m.Singleton(i)},apply:C,_APPLY:C,"available-environment-variables":function(){return m.Empty},"available-system-properties":function(){var t=[];for(var e in A)A.hasOwnProperty(e)&&t.push(n.QName.fromParts("xsl",l.KNOWN_URI.xsl,e));return m.ForArray(t)},avg:function(e){var r=e[0].mapOneToOne(t.untypedToDouble),o=r.next();if(null===o)return m.Empty;var i={sum:o,count:1},a=v["a+a"];try{var u=M(r,i,function(t,e){return{sum:a(e.sum,t),count:e.count+1}});return m.Singleton(v["a/a"](u.sum,n.integer.fromNumber(u.count)))}catch(t){throw new c("Input to avg() contains a mix of numeric and non-numeric values ","FORG0006")}},"base-uri":function(t){return t[0].mapOneToOne(function(t){var e=i.baseURI(t);return null===e?null:n.anyURI.fromString(e)})},boolean:function(e){return m.oneBoolean(t.ebv(e[0]))},ceiling:function(t){var e=t[0].next();return m.Singleton(null===e?null:e.ceiling())},"codepoint-equal":function(t){var e=t[0].next(),n=t[1].next();return null===e||null===n?m.Empty:m.oneBoolean(e.toString()===n.toString())},"codepoints-to-string":function(e){return m.oneString(t.codepointsToString(e[0].expand().map(function(t){return t.toNumber()})))},"collation-key":function(t,e,o){var i=t[0].next(),a=r.getCollatingFn(o,t[1],"collationKey",e);return m.Singleton(n.base64Binary.encodeFromString(a(i.value)))},collection:function(e,n,r){var o=n.fixed.options.collectionFinder;if(o&&"function"==typeof o){var i=null;if(e[0]){var a=e[0].next();null!==a&&(i=SaxonJS.getPlatform().resolveUri(a.toString(),t.staticBaseUri(r,n)))}var u=i?o(i):o();if(void 0===u)throw new c("No available collection for supplied URI: "+i,"FODC0002",r);u=t.convertFromJS(u);var s=n.fixed.spaceStripper;if(null!==s)for(var l=0;l<u.length;l++)u[l]=s(u[l]);return Array.isArray(u)?m.ForArray(u):m.Singleton(u)}if(e[0])throw new c("Unknown collection (no collectionFinder supplied)","FODC0002",r);return m.Empty},compare:function(t,e,n){var o=t[0].next(),i=t[1].next();if(null===o||null===i)return m.Empty;var a=r.getCollatingFn(n,t[2],"compare",e);return m.oneInteger(a(o.value,i.value))},concat:function(t){return m.oneString(t.map(function(t){var e=t.next();return null===e?"":n.string.cast(e)}).join(""))},contains:function(t,e,n){var o=D(t[0]),i=D(t[1]),a=r.getCollatingFn(n,t[2],"contains",e);return m.oneBoolean(a(o,i))},"contains-token":function(t,e,n){var o=D(t[1]);if(""===(o=h.trim(o)))return m.oneBoolean(!1);for(var i,a=r.getCollatingFn(n,t[2],"equals",e),u=function(t){return a(t,o)};null!==(i=t[0].next());)if(i.toString().split(/[ \n\r\t]+/).findIndex(u)>=0)return m.oneBoolean(!0);return m.oneBoolean(!1)},count:function(t){return m.oneInteger(t[0].count())},"current-date":function(t,e){return m.Singleton(n.date.fromDate(e.fixed.currentDate,-e.fixed.currentDate.getTimezoneOffset()))},"current-dateTime":function(t,e){return m.Singleton(n.dateTimeStamp.fromDate(e.fixed.currentDate,-e.fixed.currentDate.getTimezoneOffset()))},"current-merge-group":function(t,e){if(null===e.currentMergeGroup)throw c("There is no current merge group","XTDE3480");if(t[0]){var n=t[0].next().value,r=e.currentMergeGroup.groups[n];if(r)return m.ForArray(r);throw c("Unknown merge source "+n,"XTDE3490")}return m.ForArray(e.currentMergeGroup.items)},"current-merge-key":function(t,e){if(null===e.currentMergeGroup)throw c("There is no current merge group","XTDE3510");return m.ForArray(e.currentMergeGroup.keys)},"current-time":function(t,e){return m.Singleton(n.time.fromDate(e.fixed.currentDate,-e.fixed.currentDate.getTimezoneOffset()))},data:function(e){return e[0].mapOneToOne(t.atomize)},dateTime:function(t){var e=t[0].next(),r=t[1].next();if(null===e||null===r)return m.Empty;var o="";if(null!==e.timezoneOffset)if(null===r.timezoneOffset)o=e.tzOffsetToString();else if(null!==r.timezoneOffset&&e.timezoneOffset!=r.timezoneOffset)throw new c("timezones are incompatible ","FORG0005");return m.Singleton(n.dateTime.fromString(e.toString().substring(0,10)+"T"+r.toString()+o))},"day-from-date":function(t){return k(t,"getUTCDate")},"day-from-dateTime":function(t){return k(t,"getUTCDate")},"days-from-duration":function(t){return P(t,2)},"deep-equal":function(t,e,n){var o=r.getCollatingFn(n,t[2],"equals",e);return m.oneBoolean(r.deepEqualSequences(t[0],t[1],o))},"default-collation":function(){return m.oneString(r.codepointCollationUri)},"default-language":function(){return m.Singleton(n.language.fromString("en"))},"distinct-values":function(t,e,n){var o=r.getCollation(n,t[1],e),i=r.trieWithCollation(o);return t[0].filter(function(t){return!i.containsKey(t)&&(i.inSituPut(t,!0),!0)})},doc:function(t,e,n){var r=d(t,e,n);if(null===r)return m.Singleton(null);var o=g(r,e),i=e.fixed.spaceStripper;return null!==i&&(o=i(o)),m.Singleton(o)},"doc-available":function(t,e,n){var r=d(t,e,n);return null===r?m.oneBoolean(!1):b(function(){g(r,e)})},document:function(e,n,r){var o;if(e[1]){var a=i.baseURI(e[1].next());a&&(o=a)}return o||(o=t.staticBaseUri(r,n)),e[0].mapOneToMany(function(e){var r=i.isNode(e)?i.baseURI(e):o;return t.atomize(e).mapOneToOne(function(t){if(null===r)throw new c("No base URI for document('"+t+"')","XTDE1162");return g(SaxonJS.getPlatform().resolveUri(t.toString(),r),n)})})},"document-uri":function(t){var e=t[0].next();return null!==e&&e.nodeType==i.DOCUMENT_NODE&&e._saxonBaseUri?m.Singleton(n.anyURI.fromString(e._saxonBaseUri)):m.Empty},"element-available":function(t,e,n){var r="http://www.w3.org/1999/XSL/Transform"==w(t[0],n,"XTDE1440").split("}")[0].substring(2);return m.oneBoolean(r)},"element-with-id":function(t,e){var n=D(t[0]);if(e.noCurrentFocus())throw new c("No context item for element-with-id()","XPDY0002");return m.Singleton(i.ownerDocument(e.getCurrentFocus()).getElementById(n))},empty:function(t){return m.oneBoolean(null===t[0].next())},"encode-for-uri":function(t){var e=encodeURIComponent(D(t[0])).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()});return m.oneString(e)},"ends-with":function(t,e,n){var o=D(t[0]),i=D(t[1]),a=r.getCollatingFn(n,t[2],"endsWith",e);return m.oneBoolean(a(o,i))},"environment-variable":function(){return m.Empty},error:function(t){if(void 0===t[0])throw new c("fn:error() invoked","FOER0000");var e=t[0].next();throw e=e?e.local:"FOER0000",new c(t[1]?D(t[1]):"",e)},"escape-html-uri":function(t){return T(t,function(t){return t<32||t>126})},"exactly-one":function(t){var e=t[0].expand();if(1!=e.length)throw new c("Required length 1, actual length "+e.length,"FORG0005");return m.Singleton(e[0])},exists:function(t){return m.oneBoolean(null!==t[0].next())},false:function(){return m.oneBoolean(!1)},floor:function(t){return t[0].mapOneToOne(function(t){return t.floor()})},"format-date":function(t){return E("format-date",t),t[2]?m.oneString(y.formatDateTime("date",t[0].next(),t[1].next().toString(),t[2].next(),t[3].next(),t[4].next())):m.oneString(y.formatDateTime("date",t[0].next(),t[1].next().toString()))},"format-dateTime":function(t){return E("format-dateTime",t),t[2]?m.oneString(y.formatDateTime("dateTime",t[0].next(),t[1].next().toString(),t[2].next(),t[3].next(),t[4].next())):m.oneString(y.formatDateTime("dateTime",t[0].next(),t[1].next().toString()))},"format-integer":function(t){var e=t[0].next();return null===e?m.oneString(""):m.oneString(y.formatInteger(e,t[1].next().toString()))},"format-number":function(t,e,n){var r=t[2]?w(t[2],n,"XTDE1260"):"Q{}",o=l.declaringPackage(n,e).decimalFormats[null!==r?r:"Q{}"];if(!o)throw c("Unknown decimal format "+r,"FODF1280");var i=t[0].next();return i=null===i?Number.NaN:i.toDouble().value,m.oneString(y.formatNumber(i,t[1].next().toString(),o,e))},"format-time":function(t){return E("format-time",t),t[2]?m.oneString(y.formatDateTime("time",t[0].next(),t[1].next().toString(),t[2].next(),t[3].next(),t[4].next())):m.oneString(y.formatDateTime("time",t[0].next(),t[1].next().toString()))},"function-available":function(t,e,r){var o=!1,i=w(t[0],r,"XTDE1400",l.KNOWN_URI.fn),a=t[1]?t[1].next().toNumber():-1;if(e.fixed.userFunctions[i+"#"+a])o=!0;else{var u=n.QName.fromEQName(i),s=SaxonJS.getPlatform().readResource("opt/functions.json"),c=JSON.parse(s)[u.uri];o=!(!c||!c[u.local])&&(!(a>=0)||c[u.local].indexOf(a)>=0)}return m.oneBoolean(o)},"generate-id":function(t,e){var n=t[0].next();if(null===n)return m.oneString("");var r,a=s.ancestorOrSelf(n).expand().reverse(),u="";for(r=0;r<a.length;r++){var c;a[r]instanceof o?u+="N"+a[r].prefix:a[r].nodeType==i.ATTRIBUTE_NODE?u+="A"+i.nameOfNode(a[r]).local:(c=s.precedingSibling(a[r]).count()+1,u+=y.formatInteger(c,r%2==0?"a":"A"))}return u="d"+i.documentNumber(a[0],e)+u,m.oneString(u)},"has-children":function(t){return m.oneBoolean(null!==s.child(t[0].next()).next())},head:function(t){return m.Singleton(t[0].next())},"hours-from-dateTime":function(t){return k(t,"getUTCHours")},"hours-from-duration":function(t){return P(t,3)},"hours-from-time":function(t){return k(t,"getUTCHours")},id:function(t,e){var n=D(t[0]).trim(),r=t[1]?t[1].next():i.ownerDocument(e.getCurrentFocus());if(!i.isNode(r))throw new c("Context item is not a node for fn:id()","XPTY0004");if(r.nodeType!=a.DOCUMENT_NODE&&(r=i.ownerDocument(r)),r.nodeType==a.DOCUMENT_NODE)return m.Singleton(r.getElementById(n));if(r.nodeType==a.DOCUMENT_FRAGMENT_NODE)for(var o,u=s.descendant(r);null!==(o=u.next());)if(o.nodeType==a.ELEMENT_NODE&&o.getAttributeNS(l.KNOWN_URI.xml,"id")===n)return m.Singleton(o);return m.Empty},idref:function(){return m.Empty},"implicit-timezone":function(t,e){return m.Singleton(n.dayTimeDuration.fromNumberOfMinutes(-e.fixed.currentDate.getTimezoneOffset()))},"index-of":function(t,e,o){var i=m.Tracker(t[0]),a=t[1].next(),u=r.getCollatingFn(o,t[2],"equals",e),s=r.eqFn(u);return i.mapOneToOne(function(t){try{return s(t,a)?n.integer.fromNumber(i.position):null}catch(t){return null}})},innermost:function(t){var e=[];return t[0].forEachItem(function(t){e.length>0&&s.ancestor(t).some(function(t){return t==e[e.length-1]})&&e.pop(),e.push(t)}),m.ForArray(e)},"in-scope-prefixes":function(t){var e=t[0].next();return m.ForArray(i.inScopeNamespaces(e).map(function(t){return n.string.fromString(t.prefix)}))},"insert-before":function(t){var e=t[1].next().value,n=t[2],r=m.Tracker(t[0]);return e<1?m.Join([n,r]):e>r.last()?m.Join([r,n]):r.mapOneToMany(function(n){return r.position==e?m.Join([t[2],m.Singleton(n)]):m.Singleton(n)})},"iri-to-uri":function(t){return T(t,function(t,e){return t<=32||t>126||/[<>"{}|\\\^`]/.test(e)})},"json-doc":function(t,e,n){var r,o=d(t,e,n);if(!o)return m.Empty;try{r=function(t,e){if(t.indexOf("#")>=0)throw c("Fragments not supported in external document URIs","FODC0002");return f(t,e,function(){return SaxonJS.getPlatform().readFile(t,"utf-8")})}(o,e)}catch(t){throw c(t.message,"FOUT1170",n)}var i=t[1]?t[1].next():null;return m.Singleton(S.parseToMap(r,i))},"json-to-xml":function(e,n,r){var o=e[0].next();if(!o)return m.Empty;var i=e[1]?e[1].next():null,a=S.parseToXml(o.toString(),i,n),u=n.resultDocument.createDocumentFragment();return u.appendChild(a),u._saxonBaseUri=t.staticBaseUri(r,n),m.Singleton(u)},key:function(e,n,o){var u,f,h=w(e[0],o,"XTDE1260"),g=l.declaringPackage(o,n),d=g.keys[h];if(!d)throw c("Unknown key "+h,"XTDE1280");function v(t){return{visibility:"PRIVATE",decl:t,pack:g,actor:t,bindings:t.getAttribute("binds").split(" ").map(function(t){return parseInt(t)})}}if(e[2])u=e[2].next(),i.isNode(u)&&(f=i.ownerDocument(u));else{var y=n.getCurrentFocus();i.isNode(y)&&(u=i.ownerDocument(y),f=u)}if(!f||f.nodeType!==i.DOCUMENT_NODE&&f.nodeType!==i.DOCUMENT_FRAGMENT_NODE)throw new c("No containing document for key()","XTDE1270",o);"_saxonIndexes"in f||(f._saxonIndexes={});var S=f._saxonIndexes,x=S[h];if(!x){var N=r.getCollation(d[0],null,n);x=r.trieWithCollation(N),S[h]=x;for(var b=function(t){return m.Join([s.namespace(t),s.attribute(t)])},T=function(t){return s.attribute(t)},E=function(t){return s.namespace(t)},C=function(t){return F.focus=m.Solo(f),M(t,F)},O=0;O<d.length;O++){var A,D=d[O],_=i.getChildElements(D)[0],F=n.newContext(!0);if(F.currentComponent=v(D),F.focus=m.Solo(f),"p.nodeSet"==_.tagName)A=t.evaluate(i.getChildElements(_)[0],F);else{var M=p(_),I=D.hasAttribute("flags")?D.getAttribute("flags"):"";A=s.descendantOrSelf(f);var k=-1!=I.indexOf("a"),P=-1!=I.indexOf("n");if(k||P){var U=k&&P?b:k?T:E;A=A.mapOneToMany(U)}A=A.filter(C)}var R,X=i.getChildElements(D)[1],B=n.newContext(!0);for(B.currentComponent=v(D);null!==(R=A.next());){B.focus=m.Solo(R);for(var J,L=t.evaluate(X,B);null!==(J=L.next());){if(!r.itemIsNaN(J))if(x.containsKey(J))-1==x.get(J).indexOf(R)&&(x.get(J).push(R),d.length>1&&x.get(J).sort(a.compareDocumentOrder));else x.inSituPut(J,[R])}}}}return e[1].mapOneToMany(function(t){if(x.containsKey(t)){var e=m.ForArray(x.get(t));return f==u?e:e.filter(function(t){return null!==s.ancestorOrSelf(t).filter(function(t){return t==u}).next()})}return m.Empty})},lang:function(t,e){var n=t[1]?t[1].next():e.getCurrentFocus();if(!n)throw new c("No context item for lang()","XPDY0002");if(!i.isNode(n))throw new c("Context item is not a node in lang()","XPTY0004");var r=D(t[0]).toLowerCase(),o=s.ancestorOrSelf(n).filter(function(t){return t.nodeType==i.ELEMENT_NODE&&t.hasAttribute("xml:lang")}).next();if(!o)return m.oneBoolean(!1);var a=o.getAttribute("xml:lang").toLowerCase(),u=r==a||a.length>r.length+1&&a.substring(0,r.length)==r&&"-"==a.charAt(r.length);return m.oneBoolean(u)},last:function(t,e){if(e.noCurrentFocus())throw new c("No context item for last()","XPDY0002");return m.oneInteger(e.focus.last())},"load-xquery-module":function(){throw new c("No XQuery processor available","FOQM0006")},"local-name":function(t){var e=i.nameOfNode(t[0].next());return m.oneString(e?e.local:"")},"local-name-from-QName":function(t){var e=t[0].next();return null===e?m.Empty:m.Singleton(n.NCName.fromString(e.local))},"lower-case":function(t){return m.oneString(D(t[0]).toLowerCase())},matches:function(t){var e=D(t[0]),n=t[1].next().toString(),r=t[2]?t[2].next().toString():"";if(!r.match(/^[smijxq]*$/))throw new c("Illegal flags for regular expression: "+r,"FORX0001");var o=h.prepareRegex(n,r,e);return m.oneBoolean(e.search(o)>=0)},max:I("max"),min:I("min"),"minutes-from-dateTime":function(t){return k(t,"getUTCMinutes")},"minutes-from-duration":function(t){return P(t,4)},"minutes-from-time":function(t){return k(t,"getUTCMinutes")},"month-from-date":function(t){return k(t,"getUTCMonth")},"month-from-dateTime":function(t){return k(t,"getUTCMonth")},"months-from-duration":function(t){return P(t,1)},name:function(t){var e=i.nameOfNode(t[0].next());return m.oneString(e?e.toString():"")},"namespace-uri":function(t){var e=i.nameOfNode(t[0].next());return m.Singleton(n.anyURI.fromString(e?e.uri:""))},"namespace-uri-for-prefix":function(t){var e=D(t[0]),r=t[1].next(),o="xml"==e?l.KNOWN_URI.xml:r.lookupNamespaceURI(""===e?null:e);return o?m.Singleton(n.anyURI.fromString(o)):m.Empty},"namespace-uri-from-QName":function(t){var e=t[0].next();return null===e?m.Empty:m.Singleton(n.anyURI.fromString(e.uri))},nilled:function(t){var e=t[0].next();return e&&e.nodeType==i.ELEMENT_NODE?m.oneBoolean(!1):m.Empty},"node-name":function(t){return m.Singleton(i.nameOfNode(t[0].next()))},"normalize-space":function(t){var e=D(t[0]);return m.oneString(l.wsCollapse(e))},"normalize-unicode":function(t){if(String.prototype.normalize){var e=D(t[0]),n=t[1].next().toString().toUpperCase().trim();if("NFC"==n||"NFD"==n||"NFKC"==n||"NFKD"==n)return m.oneString(e.normalize(n));if(""===n)return m.oneString(e)}throw new c("normalize-unicode(): not supported on this Javascript platform","FOCH0003")},not:function(e){return m.oneBoolean(!t.ebv(e[0]))},number:function(t){return m.Singleton(n.numeric.numberFn(t[0].next()))},"one-or-more":function(t){var e=m.LookAhead(t[0]);if(null===e.peek())throw new c("Required length >= 1, actual length zero","FORG0004");return e},outermost:function(e,n,r){var o=t.hasFlag(r,"p"),a=e[0];o||(a=i.inDocumentOrder(a));var u=null;return a.filter(function(t){return null===u?(u=t,!0):null===s.ancestor(t).filter(function(t){return t===u}).next()&&(u=t,!0)})},"parse-ietf-date":function(t){return t[0].mapOneToOne(function(t){var e,r,o,i,a,u,s=function(){throw new c("Invalid IETF date/time "+t.toString(),"FORG0010")},l=function(t){return 1==t.length?"0"+t:t},f=t.toString().trim().toLowerCase();f=f.replace(/^(monday|tuesday|wednesday|thursday|friday|saturday|sunday|mon|tue|wed|thu|fri|sat|sun),?\s+/,""),/^[a-z]/.test(f)?null!==(e=/^([a-z]{3})(?:\s*\-\s*|\s+)(\d\d\d?\d?)\s+([\d:\.]+)\s*([a-z]+|[+\-]\d\d?:?(?:\d\d)?(?:\s*\(\s*[a-z]+\s*\))?)?\s+(\d+)$/.exec(f))?(r=e[1],o=e[2],a=e[3],u=e[4],i=e[5]):s():null!==(e=/^(\d+)(?:\s*\-\s*|\s+)([a-z]{3})(?:\s*\-\s*|\s+)(\d\d\d?\d?)\s+([\d:\.]+)\s*([a-z]+|[+\-]\d\d?:?(?:\d\d)?(?:\s*\(\s*[a-z]+\s*\))?)?$/.exec(f))?(o=e[1],r=e[2],i=e[3],a=e[4],u=e[5]):s(),2==i.length&&(i="19"+i);var m="jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec".indexOf(r);m<0&&s();var p={ut:"Z",utc:"Z",gmt:"Z",est:"-05:00",edt:"-04:00",cst:"-06:00",cdt:"-05:00",mst:"-07:00",mdt:"-06:00",pst:"-08:00",pdt:"-07:00"};if(/^[0-9]:/.test(a)&&(a="0"+a),5==a.length&&(a+=":00"),u){var h=/([a-z]+)|([+\-]\d\d?:?(?:\d\d)?)(?:\s*\(\s*([a-z]+)\s*\))?$/.exec(u);(!h[3]||h[3]in p)&&(!h[1]||h[1]in p)||s(),u=h[1]?h[1]:h[2],/^[+\-][0-9]((:|$)|[0-9]{2}$)/.test(u)&&(u=u.substring(0,1)+"0"+u.substring(1)),u in p?u=p[u]:3==u.length?u+=":00":4==u.length?u+="00":5==u.length&&(u=u.substring(0,3)+":"+u.substring(3))}var g=i+"-"+l((m/4+1).toString())+"-"+l(o)+"T"+a+(u||"Z");return n.dateTime.fromString(g)})},"parse-json":function(t){var e=t[0].next().toString(),n=t[1]?t[1].next():null;return m.Singleton(S.parseToMap(e,n))},"parse-xml":function(e,n,r){var o=e[0].next().toString();try{var i=SaxonJS.getPlatform().parseXmlFromString(o);return i._saxonBaseUri=t.staticBaseUri(r,n),m.Singleton(i)}catch(t){throw new c("Misplaced or malformed XML:","FODC0006")}},"parse-xml-fragment":function(e,n,r){return e[0].mapOneToOne(function(e){var o,i=e.toString().replace(/^<\?xml(?:\s+version\s*=\s*(['"])1.[0-9]+['"])?\s+encoding\s*=\s*(['"][A-Za-z](?:[A-Za-z0-9._\-])*)['"]\s*\?>/,"");try{o=SaxonJS.getPlatform().parseXmlFromString("<z>"+i+"</z>")}catch(t){throw new c("Misplaced or malformed XML:","FODC0006")}var a=n.resultDocument.createDocumentFragment();return s.child(o.documentElement).forEachItem(function(t){a.appendChild(t)}),a._saxonBaseUri=t.staticBaseUri(r,n),a})},path:function(t){return t[0].mapOneToOne(function(t){var e="";return s.ancestorOrSelf(t).forEachItem(function(t){var n,r=function(t){return s.precedingSibling(t).filter(function(e){return t.nodeType==e.nodeType})},o=function(t){return 1+r(t).count()};switch(t.nodeType){case i.DOCUMENT_NODE:case i.DOCUMENT_FRAGMENT_NODE:default:break;case i.ELEMENT_NODE:n=i.nameOfNode(t),e="/"+n.toEQName()+"["+(1+r(t).filter(function(t){return i.nameOfNode(t).equals(n)}).count())+"]"+e;break;case i.TEXT_NODE:e="/text()["+o(t)+"]";break;case i.COMMENT_NODE:e="/comment()["+o(t)+"]";break;case i.PROCESSING_INSTRUCTION_NODE:e="/processing-instruction("+t.target+")["+(1+r(t).filter(function(e){return t.target==e.target}).count())+"]";break;case i.ATTRIBUTE_NODE:e="/@"+(t.name.indexOf(":")<0?t.name:i.nameOfNode(t).toEQName());break;case i.NAMESPACE_NODE:e="/namespace::"+(""!==t.prefix?t.prefix:"*[Q{"+l.KNOWN_URI.fn+'}local-name()=""]')}}),""===e&&(e="/"),n.string.fromString(e)})},"prefix-from-QName":function(t){return t[0].mapOneToOne(function(t){return""===t.prefix?null:n.NCName.fromString(t.prefix)})},position:function(t,e){if(e.noCurrentFocus())throw new c("No context item for position()","XPDY0002");return m.oneInteger(e.focus.position)},QName:function(t){var e=t[1].next().value.split(":"),r=2==e.length?e[0]:"",o=D(t[0]);if(""!==r&&""===o)throw new c("Prefix but no URI for QName()","FOCA0002");if(2==e.length&&""===r||""!==r&&!h.isNCName(r))throw new c("$paramQName not valid for QName()","FOCA0002");var i=2==e.length?e[1]:e[0];if(!h.isNCName(i))throw new c("$paramQName not valid for QName()","FOCA0002");return m.Singleton(n.QName.fromParts(r,o,i))},"regex-group":function(t,e){var n=t[0].next().toNumber();try{return m.oneString(e.focus.regexGroups[n]||"")}catch(t){return m.oneString("")}},remove:function(t){var e=t[1].next().toNumber(),n=m.Tracker(t[0]);return n.filter(function(t){return n.position!=e})},replace:function(t){var e=D(t[0]),n=t[3]?t[3].next().toString():"";if(!n.match(/^[smijxq]*$/))throw new c("Illegal flags for regular expression: "+n,"FORX0001");var r=h.prepareRegex(t[1].next().toString(),n+"g");if(r.test(""))throw new c("Regular expression matches zero-length string","FORX0003");var o=h.convertReplacement(t[2].next().toString(),n);return m.oneString(e.replace(r,o))},"resolve-QName":function(t){var e=t[1].next();return t[0].mapOneToOne(function(t){try{return i.resolveLexicalQName(e,t.toString(),!0)}catch(e){throw e instanceof c&&"FORG0001"==e.code&&(e.code=h.isQName(t)?"FONS0004":"FOCA0002"),e}})},"resolve-uri":function(e,r,o){var i=e[1]?e[1].next().toString():t.staticBaseUri(o,r),u=e[0].next();if(null===u)return m.Empty;i=i.replace(/^file:\/(?!\/)/,"file:///"),u=u.toString();var s,l=a.isAbsoluteURI(u);if(!l&&!a.isAbsoluteURI(i))throw new c("resolve-uri: invalid URI (base="+i+", relative="+u+")","FORG0002");if(!SaxonJS.getPlatform().inBrowser&&/#/.test(i))throw new c("Base URI "+i+" contains a fragment identifier","FORG0002");try{s=l?u:SaxonJS.getPlatform().resolveUri(u,i).toString()}catch(t){throw t}return m.Singleton(n.anyURI.fromString(s))},reverse:function(t){return m.ForArray(t[0].expand().slice().reverse())},root:function(t){return t[0].mapOneToMany(function(t){return s.ancestorOrSelf(t)}).filter(function(t){return null===i.xdmParentNode(t)})},round:function(t){return t[0].mapOneToOne(function(e){return e.round(t[1]?t[1].next().value:0)})},"round-half-to-even":function(t){return t[0].mapOneToOne(function(e){return e.roundHalfToEven(t[1]?t[1].next().value:0)})},"seconds-from-dateTime":function(t){return k(t,"seconds")},"seconds-from-duration":function(t){return P(t,5)},"seconds-from-time":function(t){return k(t,"seconds")},serialize:function(e){return m.oneString(t.serialize(e[0],e[1]?e[1]:void 0))},snapshot:function(t,e,n){return t[0].mapOneToOne(function(t){var n=i.copyItem(t,e,"cm"),r=n;return s.ancestor(t).forEachItem(function(t){var n=i.shallowCopy(t,e,"c",function(){return m.Empty}).next();s.attribute(t).forEachItem(function(t){var e=""===t.namespaceURI?null:t.namespaceURI;n.setAttributeNS(e,t.name,t.value)}),n._saxonOriginal=t,n.appendChild(r),r=n}),n})},"starts-with":function(t,e,n){var o=D(t[0]),i=D(t[1]),a=r.getCollatingFn(n,t[2],"startsWith",e);return m.oneBoolean(a(o,i))},"static-base-uri":function(e,n,r){return m.oneString(t.staticBaseUri(r,n))},"stream-available":function(){return m.oneBoolean(!1)},string:function(e){var r=e[0].next();if(!r)return m.oneString("");if(t.isArray(r)||t.isMap(r))throw new c("Input to string() is a function item ","FOTY0014");return t.atomize(r).mapOneToOne(function(t){return n.string.cast(t)})},"string-join":function(t){for(var e,n="",r=t[1]?t[1].next().value:"",o=!0;null!==(e=t[0].next());)o||(n+=r),n+=e.toString(),o=!1;return m.oneString(n)},"string-length":function(t){return m.oneInteger(_(t[0]).length)},"string-to-codepoints":function(t){return m.ForArray(_(t[0]).map(n.integer.fromNumber))},subsequence:function(t){return m.ForArray(F(t[0].expand(),t[1],t[2]))},substring:function(e){var n=_(e[0]);return m.oneString(t.codepointsToString(F(n,e[1],e[2])))},"substring-after":function(t,e,n){var o,i="",a=D(t[0]),u=D(t[1]);return-1!=(o=r.getCollatingFn(n,t[2],"indexOf",e)(a,u))&&(i=a.substring(o+u.length)),m.oneString(i)},"substring-before":function(t,e,n){var o,i="",a=D(t[0]),u=D(t[1]);return-1!=(o=r.getCollatingFn(n,t[2],"indexOf",e)(a,u))&&(i=a.substring(0,o)),m.oneString(i)},sum:function(e){var n=e[0].mapOneToOne(t.untypedToDouble),r=n.next();return null===r?1==e.length?m.oneInteger(0):e[1]:(v["a+a"](r,r),m.Singleton(M(n,r,v["a+a"])))},"system-property":function(t,e,r){var o,i=n.QName.fromEQName(w(t[0],r,"XTDE1390"));return i.uri==l.KNOWN_URI.xsl&&(o=A[i.local]),m.oneString(o||"")},tail:function(t){var e=m.Tracker(t[0]);return e.filter(function(){return 1!=e.position})},"timezone-from-date":function(t){return k(t,"timezone")},"timezone-from-dateTime":function(t){return k(t,"timezone")},"timezone-from-time":function(t){return k(t,"timezone")},tokenize:function(t){var e=D(t[0]);if(t[1]||(e=l.wsCollapse(e)),""===e)return m.Empty;var r=t[1]?t[1].next().toString():"[ \\n\\r\\t]+",o=l.analyze(e,r,t[2]?t[2].next().toString():"",!1,!0),i=t[1]&&o[0].matching,a=o[o.length-1],u=t[1]&&a.matching,s=o.filter(function(t){return!t.matching}).map(function(t){return t.string});return i&&s.unshift(n.string.fromString("")),u&&s.push(n.string.fromString("")),m.ForArray(s)},trace:function(t){var n=t[0].expand();return O((t[1]?t[1].next().toString()+": ":"")+e(n),1),m.ForArray(n)},transform:function(t,e,n){var r,o=t[0].next(),i=m.oneString("stylesheet-node"),a=m.oneString("source-node"),u=m.oneString("initial-template"),s=m.oneString("initial-mode"),f=m.oneString("stylesheet-parameters"),p=document.implementation.createDocument(null,null,null);(r=m.ForArray(o.get(i.next())).peek().cloneNode(!0))instanceof XMLDocument&&(r=r.documentElement),p.appendChild(r);var h=null,g=m.ForArray(o.get(a.next())).peek();if(null!==g)if((h=document.implementation.createDocument(null,null,null))._saxonBaseUri=g._saxonBaseUri,g instanceof XMLDocument)for(var d=g.childNodes,v=0;v<d.length;v++)h.appendChild(d[v].cloneNode(!0));else r=g.cloneNode(!0),h.appendChild(r);var y=m.ForArray(o.get(u.next())).peek();null!==y&&(o.initialTemplate=y.toString());var S=m.ForArray(o.get(s.next())).peek();null!==S&&(o.initialMode=S.toString()),o.stylesheetParams={};var x=m.ForArray(o.get(f.next())).peek();null!==x&&(o.stylesheetParams=l.convertToJS(x,!1,!0)),o.isDynamicStylesheet=!0;try{SaxonJS.internalTransform(p,h,o)}catch(t){if(t instanceof c&&t.isGlobal)throw new c(t.message,t.code);throw t}return SaxonJS.U.Iter.Singleton(o.principalResult)},translate:function(e){var n=_(e[0]),r=_(e[1]),o=_(e[2]),i=[];return n.forEach(function(t){var e;-1!=(e=r.indexOf(t))?e<o.length&&i.push(o[e]):i.push(t)}),m.oneString(t.codepointsToString(i))},true:function(){return m.oneBoolean(!0)},"type-available":function(t,e,r){var o=w(t[0],r,"XTDE1428").split("}");return m.oneBoolean("Q{http://www.w3.org/2001/XMLSchema"==o[0]&&(o[1]in n||"untyped"===o[1]))},unordered:function(t){return t[0]},"unparsed-entity-public-id":function(){return m.Empty},"unparsed-entity-uri":function(){return m.Empty},"unparsed-text":function(t,e,n){return m.oneString(N(t,e,n))},"unparsed-text-available":function(t,e,n){return b(function(){N(t,e,n)})},"unparsed-text-lines":function(t,e,r){var o=N(t,e,r).split(/\r?\n|\r/);return o.length>0&&""===o[o.length-1]&&(o.length-=1),m.ForArray(o).mapOneToOne(function(t){return n.string.fromString(t)})},"upper-case":function(t){return m.oneString(D(t[0]).toUpperCase())},"uri-collection":function(){return m.Empty},"xml-to-json":function(t){var e=t[1]?t[1].next():new u;return t[0].mapOneToOne(function(t){return n.string.fromString(S.xmlToJson(t,e))})},"year-from-date":function(t){return k(t,"getUTCFullYear")},"year-from-dateTime":function(t){return k(t,"getUTCFullYear")},"years-from-duration":function(t){return P(t,0)},"zero-or-one":function(t){var e=t[0].expand();if(e.length>1)throw new c("Required length 0-1, actual length "+e.length,"FORG0003");return m.Singleton(e[0]?e[0]:null)}}}(),d=function(){"use strict";return function(t,e,o,i,s){switch(t){case l.KNOWN_URI.fn+"/math":return function(t,e,n,r){var o=!1;function i(t){return null===t?(o=!0,Number.NaN):t.toNumber()}function a(){return i(l.evalChild1(r,n).next())}function u(){return i(l.evalChild2(r,n).next())}var s=function(){switch(t){case"pi":return Math.PI;case"exp":return Math.exp(a());case"exp10":return Math.pow(10,a());case"log":return Math.log(a());case"log10":return Math.log(a())/Math.LN10;case"pow":var e=a(),n=u();return-1==e&&(n==1/0||n==-1/0)||1==e?1:Math.pow(e,n);case"sqrt":return Math.sqrt(a());case"sin":return Math.sin(a());case"cos":return Math.cos(a());case"tan":return Math.tan(a());case"asin":return Math.asin(a());case"acos":return Math.acos(a());case"atan":return Math.atan(a());case"atan2":return Math.atan2(a(),u());default:throw c("Unknown math function "+r.getAttribute("name"),"XPST0017",r)}}();return o?m.Empty:m.oneDouble(s)}(e,0,i,s);case l.KNOWN_URI.fn+"/map":return function(t,e,r,o){var i={contains:function(t){var e=t[0].next(),n=t[1].next();return m.oneBoolean(e.containsKey(n))},create:function(t){var e=new u;return t[0].forEachItem(function(t){t.forAllPairs(function(t){e.inSituPut(t.k,t.v)})}),m.Singleton(e)},entry:function(t){var e=new u;return e.inSituPut(t[0].next(),t[1].expand()),m.Singleton(e)},find:function(t){var e=[],n=t[1].next();function r(t){l.isArray(t)?t.value.forEach(o):l.isMap(t)&&(t.containsKey(n)&&e.push(t.get(n)),t.keys().forEach(function(e){o(t.get(e))}))}function o(t){t.forEach(r)}return o(t[0].expand()),m.Singleton(new l.XdmArray(e))},get:function(t){var e=t[0].next(),n=t[1].next();return m.ForArray(e.get(n))},keys:function(t){var e=t[0].next();return m.ForArray(e.keys())},merge:function(t){var e=new u,r=t[1]?t[1].next():null;return t[0].forEachItem(function(t){t.forAllPairs(function(t){var i=n.string.fromString("duplicates"),a=r&&r.containsKey(i)?r.get(i).toString():"use-first";if(e.containsKey(t.k)&&"use-last"!=a&&"unspecified"!=a&&"use-any"!=a){if("reject"==a){var u=n.string.fromString("duplicates-error-code"),s=r.containsKey(u)?r.get(u).toString():"FOJS0003";throw c("Duplicate key value '"+t.k.toString()+"'",s,o)}if("combine"==a){var l=e.get(t.k);t.v.forEach(function(t){l.push(t)}),e.inSituPut(t.k,l)}}else e.inSituPut(t.k,t.v)})}),m.Singleton(e)},_new:function(t){var e=new u;return t[0]&&t[0].forEachItem(function(t){t.forAllPairs(function(t){if(e.containsKey(t.k))throw c("Duplicate key value '"+t.k.toString()+"'","XQDY0137",o);e.inSituPut(t.k,t.v)})}),m.Singleton(e)},put:function(t){var e=t[0].next(),n=t[1].next(),r=t[2].expand();return m.Singleton(e.put(n,r))},remove:function(t){var e=t[0].next();return t[1].forEachItem(function(t){e=e.remove(t)}),m.Singleton(e)},size:function(t){var e=0;return t[0].next().forAllPairs(function(){e++}),m.oneInteger(e)},"untyped-contains":function(t){var e=t[0].next(),n=t[1].next();return m.oneBoolean(e.containsKey(n))}};if(!i[t])throw c("Unknown map function: "+t,"SXJS0003",o);return i[t](e,r,o)}(e,o,i,s);case l.KNOWN_URI.fn+"/array":return function(t,e,n,o){function i(t,e){if(t<1||t>e)throw c("Array index ("+t+") out of bounds (1 to "+e+")","FOAY0001",o)}function a(t){return t[0].next().value}function u(t){return t[1].next().toNumber()}function s(t){return m.Singleton(new l.XdmArray(t))}var f={append:function(t){return s(a(t).concat([t[1].expand()]))},flatten:function(t){return l.flatten(t[0])},"_from-sequence":function(t){var e=[];return t[0].forEachItem(function(t){e.push([t])}),s(e)},get:function(t){var e=a(t),n=u(t);return i(n,e.length),m.ForArray(e[n-1])},head:function(t){var e=a(t);return i(1,e.length),m.ForArray(e[0])},"insert-before":function(t){var e=a(t),n=u(t);i(n,e.length+1);var r=t[2].expand();return s(e.slice(0,n-1).concat([r]).concat(e.slice(n-1)))},join:function(t){var e=[];return t[0].forEachItem(function(t){t.value.forEach(function(t){e.push(t)})}),s(e)},put:function(t){var e=a(t),n=u(t);i(n,e.length);var r=t[2].expand();return s(e.slice(0,n-1).concat([r]).concat(e.slice(n)))},remove:function(t){var e=a(t),n=[];return t[1].forEachItem(function(t){var r=t.toNumber();i(r,e.length),n.push(r-1)}),s(e.filter(function(t,e){return n.indexOf(e)<0}))},reverse:function(t){return s(a(t).slice().reverse())},size:function(t){return m.oneInteger(a(t).length)},sort:function(t){var e=r.getCollation(o,t[1],n);return s(a(t).slice().sort(function(n,o){var i=function(t){return m.ForArray(t).mapOneToMany(l.atomize)};return t[1]?r.lexicographicCompare(i(n),i(o),e):r.lexicographicCompare(i(n),i(o))}))},subarray:function(t){var e=a(t),n=u(t);i(n,e.length+1);var r=t[2]?t[2].next().toNumber():e.length-n+1;return c.test(r<0,"Length is negative","FOAY0002"),i(n+r,e.length+1),s(e.slice(n-1,n+r-1))},tail:function(t){var e=a(t);return i(1,e.length),s(e.slice(1))},"_to-sequence":function(t){var e=[];return a(t).forEach(function(t){t.forEach(function(t){e.push(t)})}),m.ForArray(e)}};if(!f[t])throw c("Unknown array function: "+t,"SXJS0003",o);return f[t](e,n,o)}(e,o,i,s);case l.KNOWN_URI.ixsl:return function(t,e,r,o){function i(t,e){for(var n=t,r=0;r<e.length;r++){try{n=n[e[r]]}catch(t){if(null!==t.code)throw t;throw c("Failed to get property "+e[r],"SXJS0007",o)}if(void 0===n)return}return n}function a(t,e,n){var r;try{r=t.apply(n,e)}catch(e){if(null!==e.code)throw e;throw c("Failed to call method "+t,"SXJS0007",o)}if(null===r||void 0===r)return m.Empty;var i=l.convertFromJS(r);return Array.isArray(i)?m.ForArray(i):m.Singleton(i)}function s(t){return t instanceof l.JSValue?t.value:t}var f={apply:function(t){var e=s(t[0].next());if("function"!=typeof e)throw c("ixsl:apply: first argument is not a function","SXJS0007",o);return a(e,l.convertToJS(t[1].next()),null)},call:function(t){var e=s(t[0].next()),n=t[1].next().toString(),r=i(e,n.split("."));if(void 0===r)throw c("ixsl:call: object method '"+n+"' not found","SXJS0007",o);if("function"!=typeof r)throw c("ixsl:call: property '"+n+"' is not a function","SXJS0007",o);return a(r,l.convertToJS(t[2].next()),e)},eval:function(t){var e=t[0].next().toString(),n=new Function("return "+e),r=l.convertFromJS(n());return Array.isArray(r)?m.ForArray(r):m.Singleton(r)},event:function(t,e){return null===e.currentEvent?m.Empty:m.Singleton(l.convertFromJS(e.currentEvent))},get:function(t){var e=s(t[0].next());if(null===e)return m.Empty;var n=t[1].next().toString(),r=i(e,n.split("."));if(void 0===r)return O("Warning ixsl:get: object property '"+n+"' not found",1),m.Empty;var o=l.convertFromJS(r);return Array.isArray(o)?m.ForArray(o):m.Singleton(o)},location:function(){return m.Singleton(l.convertFromJS(window.location.toString()))},page:function(){return m.Singleton(l.convertFromJS(window.document))},"query-params":function(){for(var t,e=/\+/g,r=/([^&=]+)=?([^&]*)/g,o=function(t){return n.string.fromString(decodeURIComponent(t.replace(e," ")))},i=window.location.search.substring(1),a=new u;null!==(t=r.exec(i));){var s=a.get(o(t[1]));s.push(o(t[2])),a.inSituPut(o(t[1]),s)}return m.Singleton(a)},source:function(t,e){return null===e.fixed.globalContextItem?m.Empty:m.Singleton(l.convertFromJS(e.fixed.globalContextItem))},style:function(t){for(var e=t[0].next(),r=e instanceof Element?window.getComputedStyle(e):{},o=new u,i=0;i<r.length;i++){var a=r.item(i),s=r.getPropertyValue(a);void 0===s||null===s?o.inSituPut(n.string.fromString(a),[]):o.inSituPut(n.string.fromString(a),[n.string.fromString(s.toString())])}return m.Singleton(o)},window:function(){return m.Singleton(l.convertFromJS(window))},"remove-attribute":function(t,e,r){var o=t[0].next().toString(),i=n.QName.fromString(o,l.stylesheetResolver(r,!1));if(e.noCurrentFocus())throw c("No context item for ixsl:remove-attribute","SXJS0007",r);var a=e.getCurrentFocus();if(!(a instanceof Element)||a.ownerDocument!=window.document)throw c("Context item for ixsl:remove-attribute must be an element in the HTML page","SXJS0007",r);return a.removeAttribute(i.local),m.Empty},"schedule-action":function(){throw c("ixsl:schedule-action - shouldn't be here","SXJS0007",o)},"set-attribute":function(t,e,r){var o=t[0].next().toString(),i=t[1].next().toString(),a=n.QName.fromString(o,l.stylesheetResolver(r,!1));if(null===a)throw c("Invalid attribute name "+o,"XTDE1260");if(e.noCurrentFocus())throw c("No context item for ixsl:set-attribute","SXJS0007",r);var u=e.getCurrentFocus();if(!(u instanceof Element)||u.ownerDocument!=window.document)throw c("Context item for ixsl:set-attribute must be an element in the HTML page","SXJS0007",r);return u.setAttribute(a.local,i),m.Empty},"set-property":function(t,e,n){var r=t[0].next().toString(),o=l.convertToJS(t[1].next()),a=s(t[2].next()),u=r.split("."),c=u.pop(),f=i(a,u);return void 0===f||""===f?(O("Warning ixsl:set-property: '"+r+"' not found for supplied object",1),m.Empty):(f[c]=o,m.Empty)},"set-style":function(t,e,n){var r=t[0].next().toString(),o=l.convertToJS(t[1].next()),i=t[2]?t[2].next():e.getCurrentFocus();if(!i)throw c("No context item for ixsl:set-style","SXJS0007",n);return i instanceof Element&&"style"in i?(i.style[r]=o,m.Empty):(O("Warning ixsl:set-style: style '"+r+"' cannot be set for supplied object",1),m.Empty)}};if(!f[t])throw c("Unknown ixsl function: "+t,"SXJS0003",o);return f[t](e,r,o)}(e,o,i,s);case l.KNOWN_URI.saxon:return function(t,e,r,o){var i={apply:g.apply,"compile-XPath":function(t){var e,n,i=t[0].next().toString();return t.length>1&&(e=null!==(e=t[1].next())?l.convertToJS(e):{}),t.length>2&&(n=t[2]),SaxonJS.XPath.compile(i,e,n,o,r)},"discard-document":function(t,e,n){var r=t[0].next();if(null===r||r.nodeType!=a.DOCUMENT_NODE||!r._saxonBaseUri)throw new c("Node supplied to saxon:discard-document() is not a document node","XPTY0004",n);var o=r._saxonBaseUri,i=e.fixed.documentPool[o];return delete e.fixed.documentPool[o],m.Singleton(i)},doc:g.doc,"dynamic-error-info":function(t){var e=r.currentError;if(null===e)return m.Empty;var o=t[0].next().toString();switch(o){case"description":return m.oneString(e.message);case"code":return m.Singleton(n.QName.fromParts("err","http://www.w3.org/2005/xqt-errors",e.code));case"value":return m.Empty;case"module":return m.oneString(e.xsltModule);case"line-number":return m.oneInteger(e.xsltLineNr);case"column-number":return m.oneInteger(-1);default:throw c("unknown error info field "+o,"SXJS0003")}},"parse-XPath":function(t){var e,n=t[0].next().toString(),r="parse";return t.length>1&&(r=t[1].next().toString()),t.length>2&&(e=t[2]),SaxonJS.XPath.parse(n,r,e)},timestamp:function(t){return m.Singleton(n.dateTimeStamp.fromDate(new Date,-r.fixed.currentDate.getTimezoneOffset()))}};if(!i[t])throw c("Unknown saxon function: "+t,"SXJS0003",o);return i[t](e,r,o)}(e,o,i,s);default:throw c("Unknown namespace "+t,"SXJS0003",s)}}}(),v=function(){"use strict";function t(t){return Math.abs(t)<Math.pow(2,52)}var e=n.double,r=n.decimal,o=n.integer,i=n.float;function a(t,e){return o.matches(t)&&o.matches(e)?o:r}function u(t){throw new c("Division by zero",t||"FOAR0001")}function s(t,e,n){throw new c("Arithmetic operation '"+n+"' not available for operands "+t.type+" and "+e.type,"XPTY0004")}var f={"d+d":function(t,n){var r=t.toNumber(),o=n.toNumber();return e.fromNumber(r+o)},"d-d":function(t,n){var r=t.toNumber(),o=n.toNumber();return e.fromNumber(r-o)},"d*d":function(t,n){var r=t.toNumber(),o=n.toNumber();return e.fromNumber(r*o)},"d/d":function(t,n){var r=t.toNumber(),o=n.toNumber();return e.fromNumber(r/o)},"d%d":function(t,n){var r=t.toNumber(),o=n.toNumber();return isNaN(r)||isNaN(o)||r==1/0||r==-1/0||0===o?e.fromNumber(NaN):o==1/0||o==-1/0||0===r?t:e.fromNumber(r%o)},"d~d":function(n,r){try{var i=n.toNumber(),a=r.toNumber(),s=e.fromNumber(Math.trunc(i/a));return(s==1/0||s==-1/0||isNaN(s))&&u(),t(s)?o.fromNumber(s):s}catch(t){u()}},"f+f":function(t,e){var n=t.toNumber(),r=e.toNumber();return i.fromNumber(n+r)},"f-f":function(t,e){var n=t.toNumber(),r=e.toNumber();return i.fromNumber(n-r)},"f*f":function(t,e){var n=t.toNumber(),r=e.toNumber();return i.fromNumber(n*r)},"f/f":function(t,e){var n=t.toNumber(),r=e.toNumber();return i.fromNumber(n/r)},"f%f":function(t,e){var n=t.toNumber(),r=e.toNumber();if(isNaN(n)||isNaN(r)||n==1/0||n==-1/0||0===r)return i.fromNumber(NaN);if(r==1/0||r==-1/0||0===n)return t;var o=i.fromNumber(n%r);return(o==1/0||o==-1/0||isNaN(o))&&u(),o},"f~f":function(e,n){try{var r=e.toNumber(),a=n.toNumber(),s=i.fromNumber(Math.trunc(r/a));return(s==1/0||s==-1/0||isNaN(s))&&u(),t(s)?o.fromNumber(s):s}catch(t){u()}},"i+i":function(e,n){var r=e.toNumber()+n.toNumber();return t(r)?o.fromNumber(r):o.fromBig(Big(e.toBig().plus(n.toBig())))},"i-i":function(e,n){var r=e.toNumber()-n.toNumber();return t(r)?o.fromNumber(r):o.fromBig(Big(e.toBig().minus(n.toBig())))},"i*i":function(e,n){var r=e.toNumber()*n.toNumber();return t(r)?o.fromNumber(r):o.fromBig(Big(e.toBig().times(n.toBig())))},"i/i":function(t,e){try{var n=t.toBig(),o=e.toBig();return r.fromBig(n.div(o))}catch(t){u()}},"i%i":function(e,n){var r=e.toNumber(),i=n.toNumber();if(isNaN(r)||isNaN(i)||r==1/0||r==-1/0||0===i)return o.fromNumber(NaN);if(i==1/0||i==-1/0||0===r)return e;var a=e.toNumber()%n.toNumber();return(a==1/0||a==-1/0||isNaN(a))&&u(),t(a)?o.fromNumber(a):o.fromBig(Big(e.toBig().mod(n.toBig())))},"i~i":function(e,n){var r=e.toNumber()/n.toNumber();return(r==1/0||r==-1/0||isNaN(r))&&u(),t(r)?o.fromNumber(Math.trunc(r)):o.fromBig(Big(e.toBig().div(n.toBig())).round(0,0))},"c+c":function(t,e){var n=t.toBig(),r=e.toBig();return a(t,e).fromBig(n.plus(r))},"c-c":function(t,e){var n=t.toBig(),r=e.toBig();return a(t,e).fromBig(n.minus(r))},"c*c":function(t,e){var n=t.toBig(),r=e.toBig();return a(t,e).fromBig(n.times(r))},"c/c":function(t,e){try{var n=t.toBig(),o=e.toBig();return r.fromBig(n.div(o))}catch(t){u()}},"c%c":function(t,e){try{var n=t.toBig(),o=e.toBig();return r.fromBig(n.mod(o))}catch(t){u()}},"c~c":function(e,n){try{var i=e.toBig(),a=n.toBig(),s=i.div(a).round(0,0);return t(s)?o.fromNumber(s):r.fromBig(s)}catch(t){u()}},"a+a":function(t,e){return m(t,e,"+")},"a-a":function(t,e){return m(t,e,"-")},"a*a":function(t,e){return m(t,e,"*")},"a/a":function(t,e){return m(t,e,"/")},"a%a":function(t,e){return m(t,e,"%")},"a~a":function(t,e){return m(t,e,"~")},"u+u":function(t,e){var r=n.dayTimeDuration,o=n.yearMonthDuration;return r.matches(t)&&r.matches(e)||o.matches(t)&&o.matches(e)||s(t,e,"+"),o.matches(t)?o.fromMonthsMilliseconds(t.months+e.months,0):r.fromMonthsMilliseconds(0,t.milliseconds+e.milliseconds)},"u-u":function(t,e){var r=n.dayTimeDuration,o=n.yearMonthDuration;return r.matches(t)&&r.matches(e)||o.matches(t)&&o.matches(e)||s(t,e,"-"),o.matches(t)?o.fromMonthsMilliseconds(t.months-e.months,0):r.fromMonthsMilliseconds(0,t.milliseconds-e.milliseconds)},"u*n":function(t,e){var r=n.dayTimeDuration,o=n.yearMonthDuration;r.matches(t)||o.matches(t)||s(t,e,"*");var i=e.toNumber();if(i==1/0||i==-1/0)throw new c("Cannot multiply duration by +/-INF","FODT0002");if(isNaN(i))throw new c("Cannot multiply duration by NaN","FOCA0005");return o.matches(t)?o.fromMonthsMilliseconds(Math.round(t.months*i),0):r.fromMonthsMilliseconds(0,Math.round(t.milliseconds*i))},"n*u":function(t,e){return v["u*n"](e,t)},"u/n":function(t,e){var r=n.dayTimeDuration,o=n.yearMonthDuration;r.matches(t)||o.matches(t)||s(t,e,"/");var i=o.matches(t)?t.months/e.toNumber():t.milliseconds/e.toNumber();return(i==1/0||i==-1/0||isNaN(i))&&u("FODT0002"),o.matches(t)?o.fromMonthsMilliseconds(Math.round(i),0):r.fromMonthsMilliseconds(0,Math.round(i))},"u/u":function(t,e){var o=n.dayTimeDuration,i=n.yearMonthDuration;o.matches(t)&&o.matches(e)||i.matches(t)&&i.matches(e)||s(t,e,"/");var a=new Big(i.matches(t)?t.months:t.milliseconds),c=new Big(i.matches(e)?e.months:e.milliseconds);try{return r.fromBig(a.div(c))}catch(t){u()}},"t+u":function(t,e){var r=n.dayTimeDuration,o=n.yearMonthDuration;return r.matches(e)||o.matches(e)||s(t,e,"+"),r.matches(e)?n[t.type].fromDate(new Date(t.UTCdate.getTime()+e.milliseconds),t.timezoneOffset):t.addMonths(e.months)},"u+t":function(t,e){return v["t+u"](e,t)},"t-u":function(t,e){var r=n.dayTimeDuration,o=n.yearMonthDuration;return r.matches(e)||o.matches(e)||s(t,e,"-"),r.matches(e)?n[t.type].fromDate(new Date(t.UTCdate.getTime()-e.milliseconds),t.timezoneOffset):t.addMonths(-e.months)},"t-t":function(t,e){return n.dayTimeDuration.fromMonthsMilliseconds(0,t.UTCdate.getTime()-e.UTCdate.getTime())}};function m(t,a,u){function c(t){return n.dateTime.matches(t)||n.date.matches(t)||n.time.matches(t)}var m,p,h,g=n.dayTimeDuration,d=n.yearMonthDuration;return(g.matches(t)||d.matches(t))&&n.numeric.matches(a)?(h="u"+u+"n",m=t.type,p=a.type):(g.matches(a)||d.matches(a))&&n.numeric.matches(t)?(h="n"+u+"u",m=t.type,p=a.type):o.matches(t)&&o.matches(a)?(h="i"+u+"i",m=p="integer"):e.matches(t)||e.matches(a)?(h="d"+u+"d",m=p="double"):i.matches(t)||i.matches(a)?(h="f"+u+"f",m=p="float"):r.matches(t)||r.matches(a)?(h="c"+u+"c",m=p="decimal"):c(t)&&c(a)?(h="t"+u+"t",m=t.type,p=a.type):c(t)&&(g.matches(a)||d.matches(a))?(h="t"+u+"u",m=t.type,p=a.type):(g.matches(t)||d.matches(t))&&c(a)?(h="u"+u+"t",m=t.type,p=a.type):g.matches(t)&&g.matches(a)||d.matches(t)&&d.matches(a)?(h="u"+u+"u",m=p=t.type):s(u,t,a),f[h]||s(u,t,a),f[h](l.promote(t,m),l.promote(a,p))}return f}(),y=function(){"use strict";var t=l,e=a;function r(r,o,i,a,u){var f;if(o)f=t.evaluate(o,u).next();else{if(u.noCurrentFocus())throw c("No context item in Numberer","SXJS0004",o);f=u.getCurrentFocus()}var h,g,d,v,y,S=e.nameOfNode(f),x=function(t){return null===e.xdmParentNode(t)},N=function(t){return t.nodeType==f.nodeType&&(null===S||e.nameOfNode(t).equals(S))},b=N;if(null!==i){var w=p(i);b=function(t){return w(t,u)}}if(null===a)h=x;else{var T=p(a);h=function(t){return x(t)||T(t,u)}}switch(r){case"simple":return g=s.precedingSibling(f).filter(N),m.oneInteger(g.count()+1);case"single":return d=s.ancestorOrSelf(f).filter(b).next(),y=s.ancestorOrSelf(f).filter(h).next(),null===(v=null===d?null:null!==s.ancestorOrSelf(d).filter(function(t){return e.isSameNode(t,y)}).next()?d:null)?m.Empty:(g=s.precedingSibling(v).filter(b),m.oneInteger(g.count()+1));case"multi":d=m.ForArray(s.ancestorOrSelf(f).filter(b).expand().reverse()),y=s.ancestorOrSelf(f).filter(h).next(),v=d.filter(function(t){return null!==s.ancestorOrSelf(t).filter(function(t){return e.isSameNode(t,y)}).next()});var E=n.integer.fromNumber;return v.mapOneToOne(function(t,e){return E(s.precedingSibling(t).filter(b).count()+1)});case"any":var C=function(t,n){return e.compareDocumentOrder(n,t)};d=m.Union(s.preceding(f).filter(b),s.ancestorOrSelf(f).filter(b),C),null===(y=m.Union(s.preceding(f).filter(h),s.ancestorOrSelf(f).filter(h),C).next())&&l.internalError("from pattern selected empty");var O=(v=d.filter(function(t){return e.compareDocumentOrder(t,y)>=0})).count();return 0===O?m.Empty:m.oneInteger(O);default:l.internalError("unknown xsl:number/@level "+r)}}function o(e,r,o,i,a,u,s){if(null!==u)try{n.language.cast(u)}catch(t){throw c("@lang="+u+": invalid language code","XTDE0030")}return l=e.expand(),f=function(e){var n,r;if(""===e&&(e="1"),/^[\x01-\x7f]*$/.test(e))n=e.split(/\b/),r=function(t,e){return/\w+/.test(t)};else{if(e.length!=t.stringToCodepoints(e).length)throw c("Cannot handle non-BMP characters in format-number picture","SXJS0002");var o=t.analyze(e,"[\\p{Nd}\\p{Nl}\\p{No}\\p{Lu}\\p{Ll}\\p{Lt}\\p{Lm}\\p{Lo}]+","",!0,!1);r=function(t,e){return o[e].matching},n=o.map(function(t){return t.string.toString()})}var i,a={prefix:"",fTokens:[],suffix:""},u=".";for(i=0;i<n.length;i++){var s=n[i];r(s,i)?(a.fTokens.push({chars:s,sep:u}),u="."):(0===i&&(a.prefix=s),i==n.length-1?a.suffix=s:0!==i&&(u=s))}return 0===a.fTokens.length&&(a.fTokens.push({chars:"1",sep:"."}),a.suffix=a.prefix),a}(null===r?"1":t.evaluate(r,s).next().toString()),p=f.prefix,l.forEach(function(t,e){var n=e>=f.fTokens.length?f.fTokens[f.fTokens.length-1]:f.fTokens[e];0!==e&&(p+=n.sep);var r=n.chars;"yes"==a&&(r+=";o");var u=y.formatInteger(t.toNumber(),r);null!==o&&null!==i&&(u=y.addGroupingSeparators(u,o,i)),p+=u}),p+=f.suffix,m.oneString(p);var l,f,p}function i(e,r,o,i,a){var u=[1];if(null!==o&&(u=t.evaluate(o,a).next().toString().split(/\s+/).map(function(t){if(!/^-?[0-9]+$/.test(t))throw c("xsl:number/@start-at must be a sequence of integers.Offending value: "+t,"XTSE0020");return parseInt(t,10)})),r&&i){var s=e.next();if(null===s)return null;try{s=n.integer.cast(s.round(0))}catch(t){return null}e=m.ForArray([s])}return e.mapOneToOne(function(t,e){if((t=n.numeric.matches(t)?t.toDouble():n.double.fromStringUnfailing(t.toString())).toNumber()<0)throw c("xsl:number/@value is less than zero","XTDE0980");try{t=n.integer.cast(t.round(0))}catch(t){throw t.code="XTDE0980",t}var r=e>=u.length?u[u.length-1]:u[e];return 1!=r&&(t=n.integer.fromNumber(t.toNumber()+(r-1))),t})}function u(t){if(t<1||t>4999)return t.toString();var e,n="",r=["m","cm","d","cd","c","xc","l","xl","x","ix","v","iv","i"],o=[1e3,900,500,400,100,90,50,40,10,9,5,4,1];for(e=0;e<r.length;e++)for(;t>=o[e];)n+=r[e],t-=o[e];return n}function f(t,e){if(t<1)return t.toString();var n=e.length;return function t(r){return(r>n?t(Math.floor((r-1)/n)):"")+e.charAt((r-1)%n)}(t)}function g(t,e){return t<e.length?e[t]:t.toString()}function d(t,e){for(var n=Math.abs(t),r=n<999999?n.toString():Big(n).toFixed();r.length<e;)r="0"+r;return t<0&&(r="-"+r),r}function v(t){var e,n,r=l,o=r.stringToCodepoints(t),i={},a=!0,u=0,s=h.prepareRegex("\\p{Nd}",null),f=t.search(s);if(f<0)a=!1;else{var m=h.obtainCategoryEscapes().Nd;for(n=0;n<m.length;n++){var p=m[n];if((e=parseInt(p[0],16))<=o[f]&&o[f]<=e+10)break}for(n=0;n<o.length;n++)if(o[n]>=128){var g=String.fromCharCode(o[n]);if(s.test(g)){if(e>o[n]||o[n]>e+10)throw c("Picture string mixes digits from different digit families: "+t,"FODF1310")}else if(h.prepareRegex("\\p{N}\\p{L}",null).test(g))throw c("Picture string is invalid: "+t,"FODF1310")}var d=[];u=e-48,o.forEach(function(t){e<=t&&t<=e+10?d.push(48):d.push(t)}),t=r.codepointsToString(d)}return i.isDecimalDigitPattern=a,i.format=t,i.diff=u,i.zeroDigit=e,i}function S(t,e){var n=[];return l.stringToCodepoints(t).forEach(function(t){48<=t&&t<=57?n.push(t+e):n.push(t)}),l.codepointsToString(n)}function x(t,e,n,r,o){var i,a=0,u=t;for(i=0;i<u.length;i++)if(i==e[a]){var s=o?i+1:u.length-i;s>0&&(u=u.substring(0,s)+(n?n[o?a:n.length-a-1]:r)+u.substring(s)),a++}return u}function N(t,e){var n=!0,r=!0,o=0;if(l.stringToCodepoints(e).length!=e.length)throw c("Cannot handle non-BMP characters in format-integer picture","SXJS0002");if(/^[\x01-\x7f]*$/.test(e)||(n=!1),n)r=/[0-9]/.test(e);else{var i=v(e);e=i.format,r=i.isDecimalDigitPattern,o=i.diff}r||(e="1");var a=function(t,e){if(!/^(([0-9]|#|[^A-Za-z0-9])+?)$/.test(e))throw c("The decimal digit pattern in the picture string is invalid: "+e,"FODF1310");var n,r,o=e,i=!0;if(/[^0-9A-Za-z#]/.test(o)){if((n=o.match(/[^0-9A-Za-z#]/g)).length>1)for(r=1;r<n.length;r++)if(n[0]!=n[r]){i=!1;break}o=o.replace(/[^0-9A-Za-z#]/g,",")}if(/^,|,,|,$/.test(o))throw c("Grouping in picture string is invalid: "+e,"FODF1310");if(/[0-9].*#/.test(o))throw c("Picture string is invalid: "+e,"FODF1310");var a=d(t,o.replace(/[#,]/g,"").length);if(n){var u=l.stringToCodepoints(o).reverse(),s=[];for(r=0;r<u.length;r++)44==u[r]&&s.push(r);var f=!0;if(u.length-s[s.length-1]-1>s[0]&&(f=!1),f)for(r=1;r<s.length;r++)if((s[r]+1)%(s[0]+1)!=0){f=!1;break}a=f&&i?y.addGroupingSeparators(a,n[0],s[0]):x(a,s,n)}return a}(t,e);return n||(a=S(a,o)),a}function b(t){var e=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];return t<20?e[t]:t<100?["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"][Math.floor(t/10)]+(t%10==0?"":" "+e[t%10]):t<1e3?b(Math.floor(t/100))+" Hundred"+(t%100==0?"":" and "+b(t%100)):t<1e6?b(Math.floor(t/1e3))+" Thousand"+(t%1e3==0?"":(t%1e3<100?" and ":" ")+b(t%1e3)):t<1e9?b(Math.floor(t/1e6))+" Million"+(t%1e3==0?"":(t%1e3<100?" and ":" ")+b(t%1e6)):t.toString()}function w(t){var e=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"];return t<20?e[t]:t<100?["","","Twent","Thirt","Fort","Fift","Sixt","Sevent","Eight","Ninet"][Math.floor(t/10)]+(t%10==0?"ieth":"y "+e[t%10]):t<1e3?b(Math.floor(t/100))+" Hundred"+(t%100==0?"th":" and "+w(t%100)):t<1e6?b(Math.floor(t/1e3))+" Thousand"+(t%1e3==0?"th":(t%1e3<100?" and ":" ")+w(t%1e3)):t<1e9?b(Math.floor(t/1e6))+" Million"+(t%1e3==0?"th":(t%1e3<100?" and ":" ")+w(t%1e6)):t.toString()}function T(t,e){var n,r=null;if(-1!=(n=e.lastIndexOf(";"))){if(r=e.substring(n+1),!/^([co](\(.+\))?)?[at]?$/.test(r))throw c("Invalid format modifier in picture string: "+r,"FODF1310");r=r.charAt(0),e=e.substring(0,n)}if(""===e)throw c("In the picture string, the picture cannot be empty","FODF1310");var o,i=t<0?"-":"";if("o"==r)switch(e.toString()){case"a":case"A":case"i":case"I":break;case"Ww":return i+w(Math.abs(t));case"W":return i+w(Math.abs(t)).toUpperCase();case"w":return i+w(Math.abs(t)).toLowerCase();default:return N(t,e)+((o=Math.abs(t))%10==1&&o%100!=11?"st":o%10==2&&o%100!=12?"nd":o%10==3&&o%100!=13?"rd":"th")}function a(t,e){for(var n="",r=t.charCodeAt(0),o=0;o<e;r++,o++)n+=String.fromCharCode(r);return n}switch(e.toString()){case"a":return f(t,a("a",26));case"A":return f(t,a("A",26));case"α":return f(t,a("α",25));case"Α":return f(t,a("Α",25));case"i":return u(t);case"I":return u(t).toUpperCase();case"Ww":return i+b(Math.abs(t));case"W":return i+b(Math.abs(t)).toUpperCase();case"w":return i+b(Math.abs(t)).toLowerCase();case"①":return g(t,"⓪"+a("①",20)+a("㉑",15)+a("㊱",15));case"⑴":return g(t,"0"+a("⑴",20));case"⒈":return 0===t?"🄀":g(t,"0"+a("⒈",20));case"❶":return g(t,"⓿"+a("❶",10)+a("⓫",10));case"➀":return 0===t?"🄋":g(t,"0"+a("➀",10));case"➊":return 0===t?"🄌":g(t,"0"+a("➊",10));case"⓵":return g(t,"0"+a("⓵",10));case"㈠":return g(t,"0"+a("㈠",10));case"㊀":return g(t,"0"+a("㊀",10));default:return N(t,e)}}var E={"decimal-separator":"46","grouping-separator":"44",digit:"35","minus-sign":"45",percent:"37","per-mille":"8240","zero-digit":"48","exponent-separator":"101","pattern-separator":"59",infinity:"Infinity",NaN:"NaN"};function C(t,n){var r=e.getAttribute(t,n,E[n]);return String.fromCharCode(parseInt(r,10))}function O(t){var e=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.floor((t.getTime()-e.getTime())/864e5)+1}function A(t,e){var n=e?O(t):t.getUTCDate(),r=new Date(Date.UTC(t.getUTCFullYear(),e?0:t.getUTCMonth(),1)),o=r.getUTCDay();if(0===o&&(o=7),o>4&&o+n<=8)return A(new Date(r.getTime()-864e5),e);var i=o<5?1:0;return Math.floor((n+o-2)/7)+i}var D={Y:"getUTCFullYear",M:"getUTCMonth",D:"getUTCDate",F:"getUTCDay",H:"getUTCHours",m:"getUTCMinutes",s:"getUTCSeconds",f:"getUTCMilliseconds"},_={d:O,W:function(t){return A(t,!0)},w:function(t){return A(t,!1)},h:function(t){return t.getUTCHours()<13?0===t.getUTCHours()?12:t.getUTCHours():t.getUTCHours()-12},P:function(t){return t.getUTCHours()<12?"Am":"Pm"},E:function(){return"AD"}};function F(t,e,n,r,o,i){var a,u=n.match(/^([YMDdWwFHhmsfZzPCE])(.*)$/);if(null===u)throw c("Date/time component ["+n+"] not recognised","FOFD1340");var s,f,m,p=u[1],h=u[2]||"";if("date"==t&&/[HhPmsf]/.test(p)||"time"==t&&/[YMDdFWwCE]/.test(p))throw c("Date/time component ["+n+"] not available in "+t,"FOFD1350");if(-1!=(s=h.lastIndexOf(","))){var g=h.substring(s+1).split("-");if(h=h.substring(0,s),f=g[0],m=g[1]||"*","*"!=f&&f<1||"*"!=m&&m<1||"*"!=f&&"*"!=m&&f>m)throw c("Invalid width modifier in date/time formatting picture","FOFD1340")}var d,y=null;h.length>1&&/[atco]/.test(h.charAt(h.length-1))?(d=h.substring(0,h.length-1),y=h.charAt(h.length-1)):d=h;var x=!0;if(/^[\x01-\x7f]*$/.test(d));else{if(d.length!=l.stringToCodepoints(d).length)throw c("Cannot handle non-BMP characters in date/time formatting picture","SXJS0002");x=!1}if(/[Zz]/.test(p))return function(t,e,n,r,o,i,a){if(""===t)return"Z"==n?"J":"";var u="z"==e?"GMT":"";if("t"==r&&"+00:00"==t&&"Z"!=n&&"N"!=n)return"Z";if(""===n)return u+t;var s,l,f,m,p,h=t.match(/^([+\-])([0-9])([0-9]):([0-9]{2})$/);if("Z"==n||"N"==n){if("Z"==n){var g=parseInt(h[1]+h[2]+h[3],10);s=g<-12||g>12||"00"!=h[4]?t:"YXWVUTSRQPONZABCDEFGHIKLM".charAt(g+12)}else if("N"==n)throw c("Timezone names not implemented","SXJS0002")}else{a&&!/[0-9]+/.test(n)&&(n="00:00");var d,y=0;if(!a){var x=v(n);n=x.format,y=x.diff}/[^0-9A-Za-z]/.test(n)?(d=n.match(/^([0-9]+)([^0-9A-Za-z])([0-9]+)$/),s=h[1]+(m=d[1],"0"==(p=h)[2]&&1==m.length?p[3]:p[2]+p[3])+d[2]+h[4]):(d=n.match(/^[0-9]+$/),s=h[1]+(l=d[0],("0"!=(f=h)[2]||1!=l.length&&3!=l.length?f[2]+f[3]:f[3])+(l.length>2?f[4]:"00"!=f[4]?":"+f[4]:""))),a||(s=S(s,y))}return u+s}("Z"==e.tzOffsetToString()?"+00:00":e.tzOffsetToString(),p,d,y,0,0,x);var N,b,w=e.proxy(),E=D[p]?w[D[p]]():_[p]?_[p](w):null;if(null===E)throw c("Component specifier not implemented: ["+p+"]","SXJS0002");if("M"==p?E++:"F"==p&&0===E&&(E=7),""===d&&(d=/[FPCE]/.test(p)?"n":/[ms]/.test(p)?"01":"1"),"f"==p)return function(t,e,n,r,o){var i,a=0;if(!o){var u=v(e);e=u.format,a=u.diff}for(var s=t.toString();s.length<3;)s="0"+s;var c=l.stringToCodepoints(s),f=parseInt(l.codepointsToString(c.reverse()),10);if(!n&&!r&&/^[0-9]$/.test(e))for(;c.length>e.length;)e+="#";if(n&&"*"!=n){for(var m=/^([0-9]*)(#*)$/.exec(e),p=m[1]?m[1]:"",h=m[2]?m[2]:"";n>p.length;)p+="0",h=h.slice(0,-1);e=p+h}if(r)for("*"==r&&(r=c.length);e.length<r;)e+="#";var g=T(f,l.codepointsToString(l.stringToCodepoints(e).reverse()));for(i=l.codepointsToString(l.stringToCodepoints(g).reverse());i.length>e.length;)i=i.slice(0,-1);return n&&"*"!=n||0!==parseInt(i,10)||(i="0"),o||(i=S(i,a)),i}(E,d,f,m,x);if(/[nN]/.test(d))N=E,a="M"==(b=p)?["January","February","March","April","May","June","July","August","September","October","November","December"][N-1]:"F"==b?["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][N-1]:N,"n"==d?a=a.toLowerCase():"N"==d&&(a=a.toUpperCase()),m&&"*"!=m&&a.length>m&&(a=a.substring(0,m));else{var C=/;/.test(d)?d+";":d;if(y&&(C+=(";"==C.charAt(C.length-1)?"":";")+y),a=T(E,C),"Y"==p&&/[^iIwWnN]/.test(d.charAt(d.length-1))&&(!f&&2==d.length||2==m))for(;a.length>2;)a=a.substring(1);if(f){var O="*"==f?0:parseInt(f,10);if(O>0&&a.length<O)if(/[YMDdWwHhms]/.test(p)&&/[^iIwWnN]/.test(d.charAt(d.length-1))){var A="0";for(x||(A=String.fromCharCode(v(C).zeroDigit));a.length<O;)a=A+a}else{if("Y"!=p||!/[iIwWnN]/.test(d.charAt(d.length-1)))throw c("Not implemented min width modification with specifier "+p+" and format "+d,"SXJS0002");for(;a.length<O;)a+=" "}}}return a}return{xslNumber:function(e,n){var a,u=t.argRole(e,"value"),s=t.argRole(e,"format"),c=t.evaluateIfPresent(t.argRole(e,"gpSep"),n).next(),l=t.evaluateIfPresent(t.argRole(e,"gpSize"),n).next(),f=t.evaluateIfPresent(t.argRole(e,"ordinal"),n).next(),p=t.evaluateIfPresent(t.argRole(e,"lang"),n).next(),h=e.getAttribute("flags")||"",g=/1/.test(h),d=t.argRole(e,"startAt");return null===(a=u?i(t.evaluate(u,n),g,d,!0,n):i(r(e.getAttribute("level"),t.argRole(e,"select"),t.argRole(e,"count"),t.argRole(e,"from"),n),g,d,!1,n))?m.oneString("NaN"):o(a,s,c,l,f,p,n)},nodeNum:function(e,n){return r(e.getAttribute("level"),t.argRole(e,"select"),t.argRole(e,"count"),t.argRole(e,"from"),n)},numSeqFmt:function(e,n){var r=t.argRole(e,"value"),a=t.argRole(e,"format"),u=t.evaluateIfPresent(t.argRole(e,"gpSep"),n).next(),s=t.evaluateIfPresent(t.argRole(e,"gpSize"),n).next(),c=t.evaluateIfPresent(t.argRole(e,"ordinal"),n).next(),l=t.evaluateIfPresent(t.argRole(e,"lang"),n).next(),f=e.getAttribute("flags")||"",p=t.argRole(e,"startAt"),h=/1/.test(f),g=i(t.evaluate(r,n),h,p,!0,n);return null===g?m.oneString("NaN"):o(g,a,u,s,c,l,n)},formatInteger:T,addGroupingSeparators:function(t,e,n){var r,o="";for(r=0;r<t.length;r++)o+=t.charAt(r),(1==n||(t.length-r)%n==1)&&r<t.length-1&&(o+=e);return o},formatNumber:function(t,n,r,o){var i=t<0||0===t&&1/t<0,a={decimalSeparator:C(r,"decimal-separator"),groupingSeparator:C(r,"grouping-separator"),digit:C(r,"digit"),minusSign:C(r,"minus-sign"),percent:C(r,"percent"),permille:C(r,"per-mille"),zeroDigit:C(r,"zero-digit"),exponentSeparator:C(r,"exponent-separator"),patternSeparator:C(r,"pattern-separator"),infinity:e.getAttribute(r,"infinity",E.infinity),nan:e.getAttribute(r,"NaN",E.NaN)};if(isNaN(t))return a.nan;var u=n.includes(a.patternSeparator)?n.split(a.patternSeparator):[n];if(u.length>2)throw c("Invalid picture: multiple pattern separators","FODF1310");var s,f,m=function(t,e){function n(t){throw[["$gs","grouping separator"],["$es","exponent separator"],["$ds","decimal separator"],["$pc","non-prefix passive character"],["$pp","percent|permille"],["$od","optional digit"],["$md","mandatory digit"],["$ip","integer part"],["$fp","fractional part"]].forEach(function(e){t=t.replace(e[0],e[1])}),c("Invalid picture: "+t,"FODF1310")}var r,o,i,a={},u=t.indexOf(e.decimalSeparator),s=u>=0,l=e.zeroDigit.charCodeAt(0),f=0,m=0,p=[],h=[],g=[],d=-1,v=-1,y=!1,S=!1,x=-1,N=0,b=s?u:t.length;for(r=0;r<b;r++)(i=t.charCodeAt(r))>=l&&i<l+10?(v>0&&n("digit follows $pc"),y?N++:(f<1&&d<0&&(d=r),f++,m++)):i==e.digit.charCodeAt(0)?(v>0&&n("digit follows $pc"),y&&n("$od follows $es"),f>0&&n("$od follows $md in $ip"),d<0&&(d=r,S=!0),m++):i==e.groupingSeparator.charCodeAt(0)?(d<0&&n("$gs before any digit"),g.length>0&&n("$gs follows $pc"),y&&n("$gs follows $es"),p.push(r)):i==e.percent.charCodeAt(0)||i==e.permille.charCodeAt(0)?s?n("$pp before $ds"):(d<0&&n("$pp before any digit"),v>0&&n("$pp follows $pc"),y&&n("$pp follows $es"),g.push(i),v<0&&(v=r),i==e.percent.charCodeAt(0)?a.percent=!0:a.permille=!0):!s&&d>=0&&i==e.exponentSeparator.charCodeAt(0)&&v<0?y?(g.push(i),N>0?v<0&&(v=r):(g.push(i),y=!1,x=-1,v<0&&(v=r-1))):(y=!0,x=r):d>=0&&s?n("$pc before $ds"):y&&0===N?(y=!1,x=-1,g.push(e.exponentSeparator.charCodeAt(0)),g.push(i),v<0&&(v=r-1)):d>=0?(g.push(i),v<0&&(v=r)):h.push(i);if(p.length>0){var w=s?u:y?x:v>0?v:t.length;p=p.map(function(t){return w-t-1}).reverse()}if(0!==p.length)for(0===p[0]&&n("$gs at end of $ip"),o=0;o<p.length-1;o++)p[o]+1==p[o+1]&&n("consecutive $gs in $ip");var T=0,E=0,C=[];if(s){var O=-1,A=t.substring(u+1);for(r=0;r<A.length;r++)(i=A.charCodeAt(r))>=l&&i<l+10?y&&v<0?N++:O>=0||v>=0?n("$md follows $od or $pc in $fp"):(T++,E++):i==e.digit.charCodeAt(0)?((v>=0||y)&&n("$od follows $pc or $es"),O<0&&(O=r),E++):i==e.groupingSeparator.charCodeAt(0)?((v>=0||y)&&n("$gs follows $pc or $es"),C.push(r-u+1)):i==e.decimalSeparator.charCodeAt(0)?n("more than one $ds"):i==e.percent.charCodeAt(0)||i==e.permille.charCodeAt(0)?((v>=0||y)&&n("$pp follows $pc or $es"),g.push(i),v=r,i==e.percent.charCodeAt(0)?a.percent=!0:a.permille=!0):i==e.exponentSeparator.charCodeAt(0)&&v<0?y?(g.push(i),N>0?v<0&&(v=r):(g.push(i),y=!1,x=-1,v<0&&(v=r-1))):(y=!0,x=r):y&&0===N?(y=!1,x=-1,g.push(e.exponentSeparator.charCodeAt(0)),g.push(i),v<0&&(v=r-1)):(g.push(i),v<0&&(v=r))}if(d<0&&0===E&&n("mantissa contains no digits"),0!==C.length)for(0===C[0]&&n("$gs at beginning of $fp"),o=0;o<C.length-1;o++)C[o]+1==C[o+1]&&n("consecutive $gs in $fp");return 0===f&&0===E&&(y?(T=1,E=1):f=1),y&&0===f&&S&&(f=1),0===f&&0===T&&(T=1),a.minimumIntegerPartSize=f,a.prefix=h,a.intGpPos=p,a.picIntPartContainsOptDigit=S,a.picIntPartSize=m,a.minimumFractionalPartSize=T,a.maximumFractionalPartSize=E,a.fracGpPos=C,a.expPartSize=N,a.exponentSeparator=e.exponentSeparator?e.exponentSeparator:"e",a.suffix=g,a}(u.length>1&&t<0?u[1]:u[0],a);if(isFinite(t)){var p;if(m.expPartSize>0)p=function(t,e){var n=e.minimumIntegerPartSize,r=e.minimumFractionalPartSize,o=e.maximumFractionalPartSize,i=e.exponentSeparator,a=1==n&&e.picIntPartContainsOptDigit;a&&(n=0,0===r&&(r=1,0===o&&(o=1)));var u=e.expPartSize,s=Big(t),l=s.c,f=0!==n?n+o:o,m=s.e;l.length>f&&(s=Big(s.toPrecision(f)));var p=m!=s.e;p&&(n+=1),n>1?s=s.div(Big(10).pow(n-1)):0===n&&(s=s.times(Big(10)));var h=0!==n?n+r:r;for(l=s.c;l.length<h;)l.push(0);var g="";if(!(l.length>0))throw c("Empty mantissa","SXJS0004");if(0===n&&e.picIntPartContainsOptDigit)g+="0";else for(var v=0;v<n;v++)g+=l[v];if(o>0&&l.length>n&&(!a||!p)){var y=l.join("").slice(n);g+="."+y}return g+i+d(s.e,u)}(t,m);else{var h=Math.abs(t);m.percent&&(h=Math.abs(100*t)),m.permille&&(h=Math.abs(1e3*t));var g=(p=h+""=="Infinity"?h+"":h<999999?h.toString():Big(h).toFixed()).indexOf(".");g<0&&(g=p.length,m.minimumFractionalPartSize>0&&(p+=".")),m.maximumFractionalPartSize>=0&&"."!=p.substring(g)&&g!=p.length&&(m.maximumFractionalPartSize>0?(p=Big(p).round(m.maximumFractionalPartSize,1).toString()).indexOf(".")<0&&(p+=".0"):p=Big(p).round(0,1).toString());var v=p.length-1-g;if(m.minimumFractionalPartSize>0)for(;v<m.minimumFractionalPartSize;)p+="0",v++;for(;g<m.minimumIntegerPartSize;)p="0"+p,g++;v>0&&0===m.minimumIntegerPartSize&&"0"==p.substring(0,g)&&(p=p.substring(g)),"0"==p&&0===m.minimumIntegerPartSize&&0===m.minimumFractionalPartSize&&m.maximumFractionalPartSize>0&&(p=".0")}var S,N="";for(S=0;S<10;S++)N+=String.fromCharCode(a.zeroDigit.charCodeAt(0)+S);if(s=function(t,e,n){var r,o="";for(r=0;r<t.length;r++){var i=t.charAt(r),a=e.indexOf(i);a<0?o+=i:a<n.length&&(o+=n.charAt(a))}return o}(p,"0123456789.",N+=a.decimalSeparator),m.intGpPos.length>0||m.fracGpPos.length>0){var b=s.indexOf(a.decimalSeparator);b<0&&(b=s.length);var w=s.substring(0,b);if(f=s.substring(b),m.intGpPos.length>0){for(var T=!0,O=1;O<m.intGpPos.length;O++)if((m.intGpPos[O]+1)%(m.intGpPos[0]+1)!=0){T=!1;break}T&&m.picIntPartSize+m.intGpPos.length-m.intGpPos[m.intGpPos.length-1]-1>m.intGpPos[0]&&(T=!1),w=T?y.addGroupingSeparators(w,a.groupingSeparator,m.intGpPos[0]):x(w,m.intGpPos,null,a.groupingSeparator)}m.fracGpPos.length>0&&(f=x(f,m.fracGpPos,null,a.groupingSeparator,!0)),s=w+f}}else s=a.infinity;return m.prefix.length>0&&(s=l.codepointsToString(m.prefix)+s),m.suffix.length>0&&(s+=l.codepointsToString(m.suffix)),i&&1==u.length&&(s=a.minusSign+s),s},formatDateTime:function(t,e,n,r,o,i){if(!/\[(\[|[^\]]*\])|\]\]/g.test(n))throw c("Date format picture doesn't match required syntax","FOFD1340");return n.replace(/\[(\[|[^\]]*\])|\]\]/g,function(n){return"[["==n?"[":"]]"==n?"]":F(t,e,n.substring(1,n.length-1).replace(/\s+/g,""))})}}}();!function(t){"use strict";var e,n=20,r=1,o=-7,i=21,a={},u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function s(t,e,n){var r=t.constructor,o=e-(t=new r(t)).e,i=t.c;for(i.length>++e&&c(t,o,r.RM),i[0]?n?o=e:(i=t.c,o=t.e+o+1):++o;i.length<o;i.push(0));return o=t.e,1===n||n&&(e<=o||o<=r.E_NEG)?(t.s<0&&i[0]?"-":"")+(i.length>1?i[0]+"."+i.join("").slice(1):i[0])+(o<0?"e":"e+")+o:t.toString()}function c(t,e,n,r){var o=t.c,i=t.e+e+1;if(1===n?r=o[i]>=5:2===n?r=o[i]>5||5==o[i]&&(r||i<0||void 0!==o[i+1]||1&o[i-1]):3===n?r=r||void 0!==o[i]||i<0:(r=!1,0!==n&&l("!Big.RM!")),i<1||!o[0])r?(t.e=-e,t.c=[1]):t.c=[t.e=0];else{if(o.length=i--,r)for(;++o[i]>9;)o[i]=0,i--||(++t.e,o.unshift(1));for(i=o.length;!o[--i];o.pop());}return t}function l(t){var e=new Error(t);throw e.name="BigError",e}a.abs=function(){var t=new this.constructor(this);return t.s=1,t},a.cmp=function(t){var e,n=this.c,r=(t=new this.constructor(t)).c,o=this.s,i=t.s,a=this.e,u=t.e;if(!n[0]||!r[0])return n[0]?o:r[0]?-i:0;if(o!=i)return o;if(e=o<0,a!=u)return a>u^e?1:-1;for(o=-1,i=(a=n.length)<(u=r.length)?a:u;++o<i;)if(n[o]!=r[o])return n[o]>r[o]^e?1:-1;return a==u?0:a>u^e?1:-1},a.div=function(t){var e=this.constructor,n=this.c,r=(t=new e(t)).c,o=this.s==t.s?1:-1,i=e.DP;if((i!==~~i||i<0||i>1e6)&&l("!Big.DP!"),!n[0]||!r[0])return n[0]==r[0]&&l(NaN),r[0]||l(o/0),new e(0*o);var a,u,s,f,m,p=r.slice(),h=a=r.length,g=n.length,d=n.slice(0,a),v=d.length,y=t,S=y.c=[],x=0,N=i+(y.e=this.e-t.e)+1;for(y.s=o,o=N<0?0:N,p.unshift(0);v++<a;d.push(0));do{for(s=0;s<10;s++){if(a!=(v=d.length))f=a>v?1:-1;else for(m=-1,f=0;++m<a;)if(r[m]!=d[m]){f=r[m]>d[m]?1:-1;break}if(!(f<0))break;for(u=v==a?r:p;v;){if(d[--v]<u[v]){for(m=v;m&&!d[--m];d[m]=9);--d[m],d[v]+=10}d[v]-=u[v]}for(;!d[0];d.shift());}S[x++]=f?s:++s,d[0]&&f?d[v]=n[h]||0:d=[n[h]]}while((h++<g||void 0!==d[0])&&o--);return S[0]||1==x||(S.shift(),y.e--),x>N&&c(y,i,e.RM,void 0!==d[0]),y},a.eq=function(t){return!this.cmp(t)},a.gt=function(t){return this.cmp(t)>0},a.gte=function(t){return this.cmp(t)>-1},a.lt=function(t){return this.cmp(t)<0},a.lte=function(t){return this.cmp(t)<1},a.sub=a.minus=function(t){var e,n,r,o,i=this.constructor,a=this.s,u=(t=new i(t)).s;if(a!=u)return t.s=-u,this.plus(t);var s=this.c.slice(),c=this.e,l=t.c,f=t.e;if(!s[0]||!l[0])return l[0]?(t.s=-u,t):new i(s[0]?this:0);if(a=c-f){for((o=a<0)?(a=-a,r=s):(f=c,r=l),r.reverse(),u=a;u--;r.push(0));r.reverse()}else for(n=((o=s.length<l.length)?s:l).length,a=u=0;u<n;u++)if(s[u]!=l[u]){o=s[u]<l[u];break}if(o&&(r=s,s=l,l=r,t.s=-t.s),(u=(n=l.length)-(e=s.length))>0)for(;u--;s[e++]=0);for(u=e;n>a;){if(s[--n]<l[n]){for(e=n;e&&!s[--e];s[e]=9);--s[e],s[n]+=10}s[n]-=l[n]}for(;0===s[--u];s.pop());for(;0===s[0];)s.shift(),--f;return s[0]||(t.s=1,s=[f=0]),t.c=s,t.e=f,t},a.mod=function(t){var e,n=this,r=n.constructor,o=n.s,i=(t=new r(t)).s;return t.c[0]||l(NaN),n.s=t.s=1,e=1==t.cmp(n),n.s=o,t.s=i,e?new r(n):(o=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=o,r.RM=i,this.minus(n.times(t)))},a.add=a.plus=function(t){var e,n=this.constructor,r=this.s,o=(t=new n(t)).s;if(r!=o)return t.s=-o,this.minus(t);var i=this.e,a=this.c,u=t.e,s=t.c;if(!a[0]||!s[0])return s[0]?t:new n(a[0]?this:0*r);if(a=a.slice(),r=i-u){for(r>0?(u=i,e=s):(r=-r,e=a),e.reverse();r--;e.push(0));e.reverse()}for(a.length-s.length<0&&(e=s,s=a,a=e),r=s.length,o=0;r;)o=(a[--r]=a[r]+s[r]+o)/10|0,a[r]%=10;for(o&&(a.unshift(o),++u),r=a.length;0===a[--r];a.pop());return t.c=a,t.e=u,t},a.pow=function(t){var e=this,n=new e.constructor(1),r=n,o=t<0;for((t!==~~t||t<-1e6||t>1e6)&&l("!pow!"),t=o?-t:t;1&t&&(r=r.times(e)),t>>=1;)e=e.times(e);return o?n.div(r):r},a.round=function(t,e){var n=this,r=n.constructor;return null==t?t=0:(t!==~~t||t<0||t>1e6)&&l("!round!"),c(n=new r(n),t,null==e?r.RM:e),n},a.sqrt=function(){var t,e,n,r=this.constructor,o=this.c,i=this.s,a=this.e,u=new r("0.5");if(!o[0])return new r(this);i<0&&l(NaN),0===(i=Math.sqrt(this.toString()))||i===1/0?((t=o.join("")).length+a&1||(t+="0"),(e=new r(Math.sqrt(t).toString())).e=((a+1)/2|0)-(a<0||1&a)):e=new r(i.toString()),i=e.e+(r.DP+=4);do{n=e,e=u.times(n.plus(this.div(n)))}while(n.c.slice(0,i).join("")!==e.c.slice(0,i).join(""));return c(e,r.DP-=4,r.RM),e},a.mul=a.times=function(t){var e,n=this.constructor,r=this.c,o=(t=new n(t)).c,i=r.length,a=o.length,u=this.e,s=t.e;if(t.s=this.s==t.s?1:-1,!r[0]||!o[0])return new n(0*t.s);for(t.e=u+s,i<a&&(e=r,r=o,o=e,s=i,i=a,a=s),e=new Array(s=i+a);s--;e[s]=0);for(u=a;u--;){for(a=0,s=i+u;s>u;)a=e[s]+o[u]*r[s-u-1]+a,e[s--]=a%10,a=a/10|0;e[s]=(e[s]+a)%10}for(a&&++t.e,e[0]||e.shift(),u=e.length;!e[--u];e.pop());return t.c=e,t},a.toString=a.valueOf=a.toJSON=function(){var t=this.constructor,e=this.e,n=this.c.join(""),r=n.length;if(e<=t.E_NEG||e>=t.E_POS)n=n.charAt(0)+(r>1?"."+n.slice(1):"")+(e<0?"e":"e+")+e;else if(e<0){for(;++e;n="0"+n);n="0."+n}else if(e>0)if(++e>r)for(e-=r;e--;n+="0");else e<r&&(n=n.slice(0,e)+"."+n.slice(e));else r>1&&(n=n.charAt(0)+"."+n.slice(1));return this.s<0&&this.c[0]?"-"+n:n},a.toExponential=function(t){return null==t?t=this.c.length-1:(t!==~~t||t<0||t>1e6)&&l("!toExp!"),s(this,t,1)},a.toFixed=function(t){var e,n=this.constructor,r=n.E_NEG,o=n.E_POS;return n.E_NEG=-(n.E_POS=1/0),null==t?e=this.toString():t===~~t&&t>=0&&t<=1e6&&(e=s(this,this.e+t),this.s<0&&this.c[0]&&e.indexOf("-")<0&&(e="-"+e)),n.E_NEG=r,n.E_POS=o,e||l("!toFix!"),e},a.toPrecision=function(t){return null==t?this.toString():((t!==~~t||t<1||t>1e6)&&l("!toPre!"),s(this,t-1,2))},e=function t(){function e(n){if(!(this instanceof e))return void 0===n?t():new e(n);n instanceof e?(this.s=n.s,this.e=n.e,this.c=n.c.slice()):function(t,e){var n,r,o;for(0===e&&1/e<0?e="-0":u.test(e+="")||l(NaN),t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;"0"==e.charAt(r);r++);if(r==(o=e.length))t.c=[t.e=0];else{for(;"0"==e.charAt(--o););for(t.e=n-r-1,t.c=[],n=0;r<=o;t.c[n++]=+e.charAt(r++));}}(this,n),this.constructor=e}return e.prototype=a,e.DP=n,e.RM=r,e.E_NEG=o,e.E_POS=i,e}(),"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.Big=e}(this);var S=function(){"use strict";var t=l.KNOWN_URI.fn;function e(t,e,r,o,i){var a=n.string.fromString(e);if(t&&t.containsKey(a)){var u=t.get(a);if("function"==r)throw c("Option "+a+" must be a function","XPTY0004");if(1==u.length&&n[r].matches(u[0])){if(i&&i.indexOf(u[0].value)<0)throw c("Invalid value "+a+"="+u[0],"FOJS0005");return u[0].value}throw c("Invalid option: "+e+": must be "+r,"XPTY0004")}return o}function r(t,e,n){var r=0,o=a();function i(t){throw c(t,"FOJS0001")}function a(){return o=function(){var e,n;o="";for(;;){if(r>=t.length)return["eof"];if(n=t.charAt(r++),!/[ \n\r\t]/.test(n))break}switch(n){case"[":case"{":case"]":case"}":case":":case",":return[n];case'"':for(var a=!1;;){if('"'==(e=t.charAt(r++))&&!a)return["string",o];o+=e,a="\\"==e&&!a,r>=t.length&&i("Unclosed quotes in string literal")}return["string",o];case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o+=n;r<t.length;){if(e=t.charAt(r++),!/[0-9\-+\.eE]/.test(e)){r--;break}o+=e}return["number",(u=o,/^-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?[0-9]+)?$/.test(u)?u:i("Invalid JSON number "+u))];case"t":case"f":case"n":for(o+=n;(e=t.charAt(r))>="a"&&e<="z"&&(o+=e,!(++r>=t.length)););if(/^(true|false|null)$/.test(o))return[o];i("Unknown constant "+o);break;default:return i("Unexpected character '"+n+"' ("+l.stringToCodepoints(n)+") at position "+r),-1}var u}()}function u(t){o[0]!==t&&i("Expected "+t+", found "+o[0])}function s(t){return o[0]===t&&(a(),!0)}function f(t){return o[0]===t?(a(),!0):","===o[0]?(a(),!1):void i("Expected ',' or '"+t+"', found '"+o[0]+"'")}function m(){switch(o[0]){case"[":a(),function(){if(n.startArray(),!s("]"))do{m()}while(!f("]"));n.endArray()}();break;case"{":a(),function(){if(n.startMap(),!s("}"))do{u("string"),n.emitKey(o[1]),a(),u(":"),a(),m()}while(!f("}"));n.endMap()}();break;case"string":n.emitString(o[1]),a();break;case"number":n.emitNumber(o[1]),a();break;case"true":case"false":n.emitBoolean(o[0]),a();break;case"null":n.emitNull(),a();break;default:i("Unexpected token "+o[0])}}return m(),u("eof"),n.result()}function o(t){try{return JSON.parse('"'+t+'"')}catch(t){throw c(t.toString(),"FOJS0001")}}var i=/[\x00-\x08\x0B\x0C\x0E-\x0F\x80-\x9F]/;function f(t){return t.replace(i,"�").replace(/[\uD800-\uDFFF]+/g,function(t){for(var e="",n=0;n<t.length;n++){var r=t.charAt(n);e+=n%2==r<"\udc00"||n==t.length-1&&r<"\udc00"?"�":r}return e})}function m(t){for(var e=t.charCodeAt(0).toString(16);e.length<4;)e="0"+e;return"\\u"+e.toUpperCase()}function p(t){this._valStack=[],this._keyStack=[],e(t,"liberal","boolean",!1),this._escape=e(t,"escape","boolean",!1),this._duplicates=e(t,"duplicates","string","use-first",["reject","use-first","use-last"])}function g(t,n){this._valStack=[],this._keyStack=[],this._mapStack=[],this._context=n,e(t,"liberal","boolean",!1),e(t,"validate","boolean",!1),e(t,"fallback","function"),this._escape=e(t,"escape","boolean",!1),this._duplicates=e(t,"duplicates","string","use-first",["reject","use-first","retain"])}return p.prototype={_valStack:[],_keyStack:[],_optionsMap:{},_escape:!1,_duplicates:"use-first",reEscape:function(t){return this._escape?JSON.stringify(t).replace(/^"|"$/g,"").replace(/\\"/g,'"').replace(/[\uD800-\uDFFF]/g,m):f(t)},peek:function(){return this._valStack[this._valStack.length-1]},writeItem:function(t){if(0===this._valStack.length)this._valStack.push(t);else if(this.peek()instanceof l.XdmArray)this.peek().value.push(t);else{var e=this.peek(),r=n.string.fromString(this._keyStack.pop());if(e.containsKey(r))switch(this._duplicates){case"reject":throw c("json-to-xml: duplicate key '"+r.toString()+"'","FOJS0003");case"use-first":return}e.inSituPut(r,t)}},emitNull:function(){this.writeItem([])},emitBoolean:function(t){this.writeItem([n.boolean.fromString(t)])},emitNumber:function(t){this.writeItem([n.double.fromNumber(parseFloat(t))])},emitString:function(t){this.writeItem([n.string.fromString(this.reEscape(o(t)))])},emitKey:function(t){this._keyStack.push(this.reEscape(o(t)))},startArray:function(){this._valStack.push(new l.XdmArray([]))},endArray:function(){this.writeItem([this._valStack.pop()])},startMap:function(){this._valStack.push(new u)},endMap:function(){this.writeItem([this._valStack.pop()])},result:function(){return void 0!==this.peek()[0]?this.peek()[0]:null}},g.prototype={_valStack:[],_keyStack:[{}],_mapStack:[],_context:null,_optionsMap:{},_escape:!1,_duplicates:"use-first",reEscape:function(t){return this._escape?JSON.stringify(t).replace(/^"|"$/g,"").replace(/\\"/g,'"').replace(/[\uD800-\uDFFF]/g,m):f(t)},peek:function(){return this._valStack[this._valStack.length-1]},writeItem:function(e){if(0===this._valStack.length)e.setAttribute("xmlns",t),this._valStack.push(e);else{var n=this.peek();if("map"==n.tagName){var r=this._keyStack.pop(),o=this._mapStack[this._mapStack.length-1];if(r in o)switch(this._duplicates){case"reject":throw c("parse-json: duplicate key '"+r.toString()+"'","FOJS0003");case"use-first":return}o[r]=e,e.setAttribute("key",r),this._escape&&/\\/.test(r.toString())&&e.setAttribute("escaped-key","true")}n.appendChild(e)}},emitNull:function(){var e=this._context.resultDocument.createElementNS(t,"null");this.writeItem(e)},emitBoolean:function(e){var n=this._context.resultDocument.createElementNS(t,"boolean"),r=this._context.resultDocument.createTextNode(e.toString());n.appendChild(r),this.writeItem(n)},emitNumber:function(e){var n=this._context.resultDocument.createElementNS(t,"number"),r=this._context.resultDocument.createTextNode(e.toString());n.appendChild(r),this.writeItem(n)},emitString:function(e){var n=this._context.resultDocument.createElementNS(t,"string");if(""!==e){var r=this.reEscape(o(e)),i=this._context.resultDocument.createTextNode(r);this._escape&&/\\/.test(r)&&n.setAttribute("escaped","true"),n.appendChild(i)}this.writeItem(n)},emitKey:function(t){this._keyStack.push(this.reEscape(o(t)))},startArray:function(){var e=this._context.resultDocument.createElementNS(t,"array");this._valStack.push(e)},endArray:function(){this.writeItem(this._valStack.pop())},startMap:function(){var e=this._context.resultDocument.createElementNS(t,"map");this._valStack.push(e),this._mapStack.push({})},endMap:function(){this._mapStack.pop(),this.writeItem(this._valStack.pop())},result:function(){return this.peek()}},{parseToMap:function(t,e){return r(t,0,new p(e))},parseToXml:function(t,e,n){return r(t,0,new g(e,n))},xmlToJson:function(r,i){var u=a;function l(t){throw new c("Invalid input to xml-to-json(): "+t,"FOJS0006")}function f(t){0!==u.getChildElements(t).length&&l("node "+t.tagName+" must have no element children")}function p(t){s.child(t).filter(function(t){return t.nodeType==u.TEXT_NODE&&t.nodeValue&&""!==h.trim(t.nodeValue)}).next()&&l("node "+t.tagName+" must have no text content")}function g(t){try{return n.boolean.fromString(t).toBoolean()}catch(e){l("invalid boolean: '"+t+"'")}}function d(t){try{JSON.parse('"'+t+'"')}catch(t){throw c("invalid escape sequence: "+t.toString(),"FOJS0007")}}return e(i,"indent","boolean",!1),function e(r){if(r.nodeType==u.DOCUMENT_NODE||r.nodeType==u.DOCUMENT_FRAGMENT_NODE){var i=u.getChildElements(r);return 1!=i.length&&l("document node has "+i.length+" element children"),e(i[0])}if(r.nodeType==u.ELEMENT_NODE){var a=!1;if(r.namespaceURI==t)switch(s.attribute(r).forEachItem(function(e){(e.name.indexOf(":")<0||e.namespaceURI==t)&&("key"==e.name||"escaped-key"==e.name?"escaped-key"==e.name?(u.xdmParentNode(r)&&"map"==u.xdmParentNode(r).localName||l("@escaped-key is allowed only on children of map"),g(e.value)&&d(r.getAttribute("key"))):u.xdmParentNode(r)&&"map"===u.xdmParentNode(r).localName||l("@key is allowed only on children of map"):"escaped"==e.name?("string"!=r.localName&&l("@escaped is allowed only on string"),a=g(e.value)):l("invalid attribute "+e.name))}),!r.hasAttribute("escaped-key")||u.xdmParentNode&&"map"!=u.xdmParentNode.localName||l("escaped-key is allowed only on children of map"),r.localName){case"null":return s.child(r).filter(function(t){return t.nodeType!=u.COMMENT_NODE&&t.nodeType!=u.PROCESSING_INSTRUCTION_NODE}).next()&&l("null element must have no content"),"null";case"string":f(r);var c=r.textContent;return a?(d(c=c.replace(/^"/g,'\\"').replace(/^[\b]/g,"\\b").replace(/^\f/g,"\\f").replace(/^\n/g,"\\n").replace(/^\r/g,"\\r").replace(/^\t/g,"\\t").replace(/^\//g,"\\/").replace(/([^\\])"/g,'$1\\"').replace(/([^\\])[\b]/g,"$1\\b").replace(/([^\\])\f/g,"$1\\f").replace(/([^\\])\n/g,"$1\\n").replace(/([^\\])\r/g,"$1\\r").replace(/([^\\])\t/g,"$1\\t").replace(/([^\\])\//g,"$1\\/").replace(/[\u0001-\u001F\u007F-\u009F]/g,m)),'"'+c+'"'):JSON.stringify(c).replace(/\//g,"\\/");case"number":var h;f(r);try{h=n.double.fromString(r.textContent)}catch(t){l("invalid number")}return isFinite(h.toNumber())||l("NaN and INF not allowed"),h.toString();case"boolean":return f(r),g(r.textContent),n.boolean.fromString(r.textContent).toString();case"array":p(r);var v="[",y="";return u.getChildElements(r).forEach(function(t){v+=y+e(t),y=","}),v+"]";case"map":p(r);var S="{",x="",N={};return u.getChildElements(r).forEach(function(t){t.hasAttribute("key")||l("child element of map must have a key");var n=u.getAttribute(t,"key"),r=n,i=u.getAttribute(t,"escaped-key"),a=!1;i&&g(i)&&(a=!0,r=o(n)),N[r]&&l("duplicate key '"+n+"'"),N[r]=!0,S+=x+(a?'"'+n+'"':JSON.stringify(n).replace(/\//g,"\\/"))+":"+e(t),x=","}),S+"}";default:l("unknown local name "+r.localName)}else l("wrong namespace "+r.namespaceURI)}else u.isNode(r)||l("not a node"),Error.dumpStack&&Error.dumpStack(),l("wrong node kind "+r.nodeType)}(r)}}}(),x=function(){"use strict";function t(e,n,r,o){if(n.nodeType==a.ATTRIBUTE_NODE||n.nodeType==a.NAMESPACE_NODE)throw c("Accumulators are not available on attribute or namespace nodes","XTTE3360");return n._saxonOriginal?t(e,n._saxonOriginal,r,o):(n._saxonAccumulators&&n._saxonAccumulators.hasOwnProperty(e)||function(t,e,n){var r=n.fixed.accumulators[e];if(!r)throw c("Unknown accumulator "+e,"XTDE3340");var o=a.getChildElements(r,"pre")[0],i=a.getChildElements(r,"post")[0],u=g(a.getChildElements(o,"accRule")),f=g(a.getChildElements(i,"accRule")),h=l.evaluate(l.argRole(r,"init"),n).expand();function g(t){for(var e=[],n=t.length-1;n>=0;n--)e.push({rule:t[n],action:a.getChildElements(t[n])[1],pattern:p(a.getChildElements(t[n])[0])});return e}function d(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n].pattern(e))return t[n];return null}function v(t,e){var r=n.newContext(!0);return r.focus=m.Solo(e),r.localVars=[h],l.evaluate(t.action,r).expand()}!function t(n){n._saxonAccumulators||(n._saxonAccumulators={}),n._saxonAccumulators[e]={};var r=d(u,n);r&&(h=v(r,n)),n._saxonAccumulators[e].pre=h,s.child(n).forEachItem(t),(r=d(f,n))&&(h=v(r,n)),n._saxonAccumulators[e].post=h}(t)}(a.ownerDocument(n),e,r),n._saxonAccumulators[e][o])}return{accumBefore:function(e,n,r){return t(e,n,r,"pre")},accumAfter:function(e,n,r){return t(e,n,r,"post")}}}(),N=function(){"use strict";function t(t,n,o){var i,u=e(n),s=a.getChildElements(n,"sortKey"),f=r.getConverters(s,o),p=[],h=o.newContext(!1);h.focus=m.Tracker(t);for(var g=function(t,e){var n=l.evalChild1(t,h),r=n.next();if(r&&n.next())throw c("Multiple values in merge key","XTTE1020");return f[e](r)};null!==(i=h.focus.next());){var d=s.map(g);p.push({item:i,keys:d,ms:u})}return p}function e(t){return t.hasAttribute("name")?t.getAttribute("name"):"#unnamed"}function n(t,e,n){for(var r=[],o=0,i=0;;){if(o>=t.length){for(;i<e.length;)r.push(e[i++]);break}if(i>=e.length){for(;o<t.length;)r.push(t[o++]);break}var a=n(t[o],e[i]);a<=0&&r.push(t[o++]),a>=0&&r.push(e[i++])}return r}return{merge:function(o,i){for(var u=a.getChildElements(o,"mergeSrc"),s=u.map(function(t){return e=t,n=i,a.getChildElements(e,"sortKey").map(function(t){return r.sortKeyProps(t,n)});var e,n}),f=s[0],p=1;p<s.length;p++)for(var h=0;h<f.length;h++){var g=f[h],d=s[p][h];if(g.order!==d.order||g.lang!==d.lang||g.caseOrder!==d.caseOrder||g.dataType!==d.dataType)throw c("All merge sources must have compatible merge keys","XTDE2210")}for(var v,y=f.map(function(t){return r.compareFnWithProps(t,i)}),S=(v=y,function(t,e){for(var n=0;n<v.length;n++){var r=v[n](t.keys[n],e.keys[n]);if(0!==r)return r}return 0}),x=null,N=0;N<u.length;N++){var b=u[N],w=i.newContext(!1),T=l.argRole(b,"forEachItem");w.focus=T?m.Tracker(l.evaluate(T,i)):m.Tracker(m.Singleton(i.getCurrentFocus()));for(var E=l.argRole(b,"selectRows");null!==w.focus.next();){var C=t(l.evaluate(E,w),b,w);x=null===x?C:n(x,C,S)}}if(null===x)return m.Empty;for(var O=function(t,n,r){for(var o=null,i=[],a={},u=0;u<n.length;u++){var s=n[u];if(null===o||0!==r(o,s)){a={items:[s.item],keys:s.keys,groups:{}};for(var c=0;c<t.length;c++)a.groups[e(t[c])]=[];a.groups[s.ms]=[s.item],i.push(a)}else a.items.push(s.item),a.groups[s.ms].push(s.item);o=s}return i}(u,x,S),A=l.argRole(o,"action"),D=[],_=0;_<O.length;_++){var F=i.newContext(!1);F.focus=m.Tracker(m.Singleton(O[_].items[0])),F.currentMergeGroup=O[_];for(var M,I=l.evaluate(A,F);null!==(M=I.next());)D.push(M)}return m.ForArray(D)}}}(),b=function(){function t(){var t=SaxonJS.getPlatform().readResource("lib/xpath/XPathJS.min.js"),e=new Function(t+="return XPath;");SaxonJS.XPath=e()}return{parse:function(){return t(),SaxonJS.XPath.parse.apply(null,arguments)},compile:function(){return t(),SaxonJS.XPath.compile.apply(null,arguments)},evaluate:function(){return t(),SaxonJS.XPath.evaluate.apply(null,arguments)},evaluateXDM:function(){return t(),SaxonJS.XPath.evaluateXDM.apply(null,arguments)},setStaticContext:function(){return t(),SaxonJS.XPath.setStaticContext.apply(null,arguments)}}}(),w={},T="undefined"!=typeof window;function E(t){"use strict";w=t}var C=1;function O(t,e){0===e||e||(e=1),e<=C&&w.saxonPrint(t)}var A=null;var D,_=null;function F(t){"use strict";var e=new Function("uri","local",t?t.getAttribute("test"):"return false");return function(t){return function t(n){switch(n.nodeType){case a.DOCUMENT_NODE:t(n.documentElement);break;case a.DOCUMENT_FRAGMENT_NODE:case a.ELEMENT_NODE:for(var r=a.nameOfNode(n),o=a.getInheritedAttribute(n,"xml:space"),i=e(r.uri,r.local)&&!(o&&"preserve"==o),u=n.childNodes,s=0;s<u.length;){var c=u[s];if(c.nodeType==a.CDATA_SECTION){var l=a.ownerDocument(n).createTextNode(c.nodeValue);n.replaceChild(l,c),c=l}c.nodeType==a.TEXT_NODE?i&&""===h.trim(c.nodeValue)?n.removeChild(c):s++:(t(c),s++)}}}(t),t}}function M(t,e,o){"use strict";var i=s.child(t.documentElement).filter(function(t){return"stripJS"==t.tagName}).next();_=F(i),e&&_&&(e=_(e)),o.saxonVersion=A;var u=function(t,e,n){function o(e,n){s.descendant(t).filter(function(t){return t.nodeType==a.ELEMENT_NODE&&t.tagName==e}).forEachItem(n)}function i(t){var e=a.getAttribute(t,"name");return e?/^Q\{/.test(e)?e:"Q{}"+e:null}var u=new U;u.fixed={options:n,stylesheet:t,globalContextItem:e,topPackage:null,packages:{},components:{},globalVars:{},modes:{},userFunctions:{},accumulators:{},decimalFormats:{},resultDocUris:{},_nextDocumentNumber:0,currentDate:{}},n.collations||(n.collations={});function m(t,e){function n(t){for(var n=a.getChildElements(t,"co"),r=0;r<n.length;r++)e(n[r])}n(t);var r=a.firstElementChild(t,"overridden");null!==r&&n(r)}if(n.collations[r.codepointCollationUri]=r.codepointCollation(),n.collations[r.fotsCaseblindCollationUri]=r.caseblindCollation(),n.collations[r.htmlCaseInsensitiveCollationUri]=r.caseblindCollation(),n.collations[r.xsltsCaseblindCollationUri]=r.caseblindCollation(),o("package",function(t){var e={name:t.getAttribute("name"),decl:t,decimalFormats:{},keys:{}};u.fixed.packages[e.name]=e,u.fixed.topPackage||(u.fixed.topPackage=e),m(t,function(t){var n=parseInt(t.getAttribute("id"));u.fixed.components[n]={id:n,visibility:t.getAttribute("vis"),decl:t,pack:e,actor:null,bindings:t.getAttribute("binds").split(" ").map(function(t){return parseInt(t)})}})}),o("package",function(t){var e=u.fixed.packages[t.getAttribute("name")];m(t,function(t){var e=parseInt(t.getAttribute("id")),n=u.fixed.components[e],r=a.firstElementChild(t);if(null===r){u.fixed.packages[t.getAttribute("dpack")];var o=u.fixed.components[parseInt(t.getAttribute("base"))].decl;r=a.firstElementChild(o)}if(n.actor=r,"globalVariable"===r.tagName||"globalParam"===r.tagName)n.value=null;else if("mode"===r.tagName){var s=new f(r);n.mode=s;var c=i(r);u.fixed.modes[null===c?"":c]=s}});for(var n=a.getChildElements(t,"decimalFormat"),r=0;r<n.length;r++){var o=n[r],s=i(o);e.decimalFormats[null===s?"Q{}":s]=o}for(var c=a.getChildElements(t,"key"),l=0;l<c.length;l++){var p=c[l],h=i(p);e.keys[h]?e.keys[h].push(p):e.keys[h]=[p]}}),o("mode",function(t){var e=i(t);u.fixed.modes[null===e?"":e]=new f(t)}),o("globalVariable",function(t){var e=i(t);u.fixed.globalVars[e]={decl:t,value:null,isParam:!1}}),o("globalParam",function(t){var e=i(t);u.fixed.globalVars[e]={decl:t,value:null,isParam:!0}}),o("function",function(t){l.hasFlag(t,"m")&&l.notImplemented("memo function");var e=i(t),n=s.child(t).filter(function(t){return"arg"==t.tagName}).count();u.fixed.userFunctions[e+"#"+n]=l.argRole(t,"body"),u.fixed.userFunctions[e+"#-1"]=!0}),o("accumulator",function(t){var e=i(t);u.fixed.accumulators[e]=t}),u.fixed.documentPool={},u.fixed._nextDocumentNumber=0,u.fixed.currentDate=new Date,T){var p=window.document.baseURI;if(u.fixed.htmlURI=p,u.fixed.javascriptURI=w.baseUri(),n.stylesheetLocation&&!a.isAbsoluteURI(n.stylesheetLocation))throw c("stylesheetLocation should be absolute by now","SXJS0004");u.fixed.staticBaseURI=n.isDynamicStylesheet?null:"true"===D?n.stylesheetLocation||p:null}else u.fixed.staticBaseURI="true"===D?n.stylesheetFileName:null;return u.currentComponent=null,u.resultDocument=T?document.implementation.createDocument(null,"html",null):new Document,u.resultRoot=u.resultDocument.createDocumentFragment(),u.localVars=[],u.localParams={},u.tunnelParams={},u}(t,e,o);if(u.fixed.spaceStripper=_,e){a.obtainDocumentNumber(e);var p=e._saxonBaseUri;O("Adding "+p+" to doc pool (doc "+e._saxonBaseUri+")",2),u.fixed.documentPool[p]=e}var h,g=o.destination;T&&void 0===o.destination&&(g="application"),g&&!/^(appendToBody|prependToBody|replaceBody|application|native)$/.test(g)&&O("Warning: supplied transformation option not recognised - destination: "+g,1),T&&/^(appendToBody|prependToBody|replaceBody)$/.test(g)&&(u.resultDocument=window.document);var d=o.initialTemplate;d&&d.indexOf("Q{")<0&&(d="Q{}"+d);var v=o.initialFunction,y=o.initialMode;y||(y=t.documentElement.hasAttribute("defaultMode")?t.documentElement.getAttribute("defaultMode"):""),"#unnamed"==y&&(y=""),""!==y&&y.indexOf("Q{")<0&&(y="Q{}"+y);var S="Q{"+l.KNOWN_URI.xsl+"}initial-template";if(e||d||P(u,S)&&(d=S),v){var x=o.functionParams?o.functionParams:[],N=x.length,b=function(t,e,n){for(var r=t.fixed.topPackage,o=a.getChildElements(r.decl,"co"),i=0;i<o.length;i++){var u=parseInt(o[i].getAttribute("id")),s=t.fixed.components[u],c=s.actor;if("function"===c.tagName&&c.getAttribute("name")===e&&a.getChildElements(c,"arg").length==n)return s}}(u,v,N);if(!b)throw c("Unknown initial function "+v+"#"+N,"XTDE0041");var E=a.firstElementChild(b.decl);u.focus={},u.currentComponent=b,u.clearGrouping(),u.tempOutputState="function",u.currentMode={},u.currentTemplate=null,u.localVars=x.map(function(t){var e=l.convertFromJS(t,!1,!0);return Array.isArray(e)?e:[e]}),u.localParams={},h=l.evaluate(l.argRole(E,"body"),u)}else if(d){var C=P(u,d);if(!C)throw c("Unknown initial template "+d,"XTDE0040");var M=a.firstElementChild(C.decl);u.fixed.globalContextItem?u.focus=m.Solo(e):(u.focus=m.Tracker(m.Empty),u.focus.next()),l.checkTemplateFocus(M,u),u.currentComponent=C,u.currentMode={},I(o,u),h=l.evalChild1(M,u)}else{var k=u.fixed.modes[y];if(!k)throw c("Unknown initial mode "+y,"XTDE0045");if(!e)throw c("No source document, initial template, or initial mode supplied","SXJS0006");var R=parseInt(k._expr.parentNode.getAttribute("id"));u.currentComponent=u.fixed.components[R],u.focus=m.Tracker(m.Singleton(e)),I(o,u),h=k.applyTemplates(u)}if("application"==g)o.principalResult=o.isDynamicStylesheet?h:l.convertToJS(h.expand());else if("native"==g){var X=h.expand();1==X.length&&a.isNode(X[0])&&(X[0]=n.string.fromString(l.serialize(m.ForArray(X)))),o.principalResult=X}else{l.makeComplexContent(u.resultRoot,h,u);var B=s.child(u.resultRoot);if(B)if(T){var J=window.document.body;if("appendToBody"==g)B.forEachItem(function(t){J.appendChild(t)});else if("prependToBody"==g){var L=J.firstChild;B.forEachItem(function(t){J.insertBefore(t,L)})}else if("replaceBody"==g){for(;J.childNodes.length>0;)J.removeChild(J.childNodes[0]);B.forEachItem(function(t){J.appendChild(t)})}}else o.principalResult=u.resultRoot}T&&function(t){function e(e,n){var r=function(n){var r=n.target,o=t.newContext(!0);o.tempOutputState=!1,o.currentEvent=n,o.focus=m.Tracker(m.Singleton(l.convertFromJS(r)));var i=parseInt(e._expr.parentNode.getAttribute("id"));o.currentComponent=t.fixed.components[i],e.applyTemplates(o).expand()};-1==["httpabort","afterprint","beforeprint","beforeunload","hashchange","languagechange","message","offline","online","pagehide","pageshow","popstate","storage","unhandledrejection","unload"].indexOf(n)?window.document.addEventListener(n,r,!1):window.addEventListener(n,r,!1)}var n=t.fixed.modes;for(var r in n)if(n.hasOwnProperty(r)){var o=r.split("}");o[0]=="Q{"+l.KNOWN_URI.ixsl&&e(n[r],o[1].replace(/^on/,""))}}(u)}function I(t,e){function n(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=l.convertFromJS(t[n],!1,!0);e[n.indexOf("Q{")<0?"Q{}"+n:n]=Array.isArray(r)?r:[r]}return e}t.templateParams&&(e.localParams=n(t.templateParams)),t.tunnelParams&&(e.tunnelParams=n(t.tunnelParams))}var k=T&&window.performance&&window.performance.now?window.performance.now:function(){return Date.now().valueOf()};function P(t,e){for(var n=t.fixed.topPackage,r=a.getChildElements(n.decl,"co"),o=0;o<r.length;o++){var i=parseInt(r[o].getAttribute("id")),u=t.fixed.components[i],s=u.actor;if("template"===s.tagName&&s.getAttribute("name")===e)return u}}function U(){}function R(){return{version:3,vendor:"Saxonica",vendorURL:"http://www.saxonica.com/",productName:"Saxon-JS",productVersion:"1.1.0",isSchemaAware:!1,supportsSerialization:!1,supportsBackwardsCompatibility:!0,supportsNamespaceAxis:!0,supportsStreaming:!1,supportsDynamicEvaluation:!0,supportsHigherOrderFunctions:!1,xPathVersion:3.1,xsdVersion:1.1}}function X(t){"use strict";"number"==typeof t&&(C=t)}return U.prototype={depth:0,focus:null,currentComponent:null,resultDocument:null,tempOutputState:!1,fixed:{},localParams:{},tunnelParams:{},currentTemplate:null,currentMode:{},currentError:null,currentEvent:null,currentGroup:null,currentGroupingKey:null,currentMergeGroup:null,localVars:[],toString:function(){var t="{";for(var e in this.localParams)this.localParams.hasOwnProperty(e)&&(t+=e+":("+this.localParams[e]+"),");return t+="}","context: "+this.getCurrentFocus()+" localParams: "+t},newContext:function(t){var e=this,n=new U;return n.depth=e.depth+1,n.focus=e.focus,n.currentComponent=e.currentComponent,n.resultDocument=e.resultDocument,n.currentMode=e.currentMode,n.currentTemplate=e.currentTemplate,n.currentError=e.currentError,n.currentGroup=e.currentGroup,n.currentGroupingKey=e.currentGroupingKey,n.currentMergeGroup=e.currentMergeGroup,n.fixed=e.fixed,n.tempOutputState=e.tempOutputState,n.currentEvent=e.currentEvent,t?(n.localParams={},n.tunnelParams={},n.localVars=[]):(n.localParams=e.localParams,n.tunnelParams=e.tunnelParams,n.localVars=e.localVars),n},clearGrouping:function(){this.currentGroup=null,this.currentGroupingKey=null,this.currentMergeGroup=null},createElement:function(t,e){return""!==t&&"http://www.w3.org/1999/xhtml"!=t||!T||this.resultDocument!=window.document?this.resultDocument.createElementNS(t,e):this.resultDocument.createElement(e)},createAttribute:function(t,e){return new i(new n.QName.fromEQName("Q{"+t+"}"+e),null,null)},createAttributeFromQName:function(t){return new i(t,null,null)},noCurrentFocus:function(){return!this.focus||!this.focus.current},getCurrentFocus:function(){return this.noCurrentFocus()?null:this.focus.current}},function(){"use strict";T?(E(t.platform),O("Saxon-JS 1.1.0 in browser",0)):(E(JSTestDriver.platform),O("Saxon-JS 1.1.0 in Nashorn")),"function"==typeof w.initialize&&w.initialize()}(),{transform:function(t,e){"use strict";var r,o;function i(r,o){if(null===r)throw c("No stylesheet supplied","SXJS0006");!function(t){var e=0,r=0;function o(t,e){for(var n=e<<8,r=0;r<t.length;r++)n=(n<<1)+t.charCodeAt(r);return n}function i(t,e){return o(t.local,e)^o(t.uri,e)}var u=!1;if(s.child(t).forEachItem(function(t){if(t.nodeType==a.ELEMENT_NODE){if("package"==a.nameOfNode(t).local){var l=a.getAttribute(t,"target","not specified");if(A=a.getAttribute(t,"saxonVersion","9.7.0.7"),D=a.getAttribute(t,"relocatable","false"),O("SEF generated by Saxon-EE version "+A+" with -target:"+l+" -relocate:"+D,0),"9.7.0.7"!=A&&"JS"!=l)throw c("Supplied SEF is not customized for use with Saxon-JS. The option -target:JS should be set when generating the export. target is: "+l,"SXJS0006");if(t.hasAttribute("expiry")&&n.date.fromString(t.getAttribute("expiry")).compareTo(n.date.fromDate(new Date,0))<0)throw c("Development license for supplied stylesheet has expired","SXJS0006")}!function t(n){e^=i(a.nameOfNode(n),r++),s.attribute(n).forEachItem(function(t){e^=i(a.nameOfNode(t),r),e^=o(t.value,r)}),s.child(n).filter(function(t){return t.nodeType==a.ELEMENT_NODE}).forEachItem(function(e){t(e)}),e^=1}(t)}else if(t.nodeType==a.PROCESSING_INSTRUCTION_NODE&&a.nameOfNode(t).local==String.fromCharCode(931)){var f=(e<0?4294967295+e+1:e).toString(16);if(f!=t.data)throw c("Invalid checksum in SEF "+t.data+" != "+f,"SXJS0006");u=!0}}),!u)throw c("No checksum found in SEF","SXJS0006")}(r),M(r,o,t),e&&e(t.principalResult)}if(O("Transform options supplied: "+function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+", ");return e}(t),0),t.stylesheetParams||(t.stylesheetParams={}),"function"==typeof w.deliverMessage&&w.deliverMessage(t),"number"==typeof t.logLevel&&X(t.logLevel),T){var u=[],l=window.document.baseURI;t.stylesheetLocation&&(t.stylesheetLocation=w.resolveUri(t.stylesheetLocation.toString(),l),u.push(t.stylesheetLocation)),t.sourceLocation&&(t.sourceLocation=w.resolveUri(t.sourceLocation.toString(),l),u.push(t.sourceLocation)),r=t.stylesheetNode?t.stylesheetNode:null,o=t.sourceNode?t.sourceNode:t.sourceText?w.parseXmlFromString(t.sourceText):null,t.sourceNode&&t.sourceNode.baseURI&&(o._saxonBaseUri=t.sourceNode.baseURI),0===u.length?i(r,o):w.asyncGetMultipleXml(u,function(e){r=t.stylesheetLocation?e[t.stylesheetLocation]:r,o=t.sourceLocation?e[t.sourceLocation]:o,i(r,o)})}else{if(!(r=t.stylesheetNode)){var f=t.stylesheetText;if(!f){var m=t.stylesheetFileName;if(!m)throw c("No stylesheet supplied","SXJS0006");f=w.readFile(m)}r=w.parseXmlFromString(f)}if((o=t.sourceNode)&&t.sourceNode.baseURI&&(o._saxonBaseUri=t.sourceNode.baseURI),!o){var p=t.sourceText;if(!p){var h=t.sourceFileName;h&&(p=w.readFile(h))}p&&((o=w.parseXmlFromString(p))._saxonBaseUri=t.sourceLocation?t.sourceLocation:t.sourceFileName)}i(r,o)}},getProcessorInfo:R,setLogLevel:X,getLogLevel:function(){return C},setPlatform:E,getPlatform:function(){return w},getNavigator:function(){return window.navigator.userAgent},timeStamp:k,internalTransform:M,U:{Atomic:n,Axis:s,Context:U,Compare:r,calculator:v,nameOfNode:a.nameOfNode,isNode:a.isNode,isAttr:a.isAttr,isNamespaceNode:a.isNSNode,declareNS:a.declareNS,getInheritedAttribute:a.getInheritedAttribute,getChildElements:a.getChildElements,isMap:l.isMap,isArray:l.isArray,roleDiagnostic:l.roleDiagnostic,wsCollapse:l.wsCollapse,ForArray:m.ForArray,AnyIterator:m.AnyIterator,obtainDocumentNumber:a.obtainDocumentNumber,evaluate:l.evaluate,declaringPackage:l.declaringPackage,Iter:m,convertFromJS:l.convertFromJS,convertToJS:l.convertToJS,stringToCodepoints:l.stringToCodepoints},XError:c,XPath:b}}();